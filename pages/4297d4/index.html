<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx反向代理 | chggx-knowledge</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <meta name="description" content="一个基于VuePress的 知识管理&amp;博客 主题">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/chggx-knowlodge-vuepress/assets/css/0.styles.2ef74c7b.css" as="style"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/app.15d702c5.js" as="script"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/2.796b80a3.js" as="script"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/102.bea11a8f.js" as="script"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/10.14778c29.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/100.8c2cdfe4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/101.084d25ca.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/103.98c88297.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/104.714d479c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/105.dd6f1464.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/106.a347aeff.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/107.a5b6c17a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/108.d30082ce.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/109.c89b18cf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/11.b2ab41a0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/110.03b92b32.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/111.9fdd8be8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/112.664a846c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/113.3b725605.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/114.db1c03ee.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/115.0c406f7f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/116.42239c74.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/117.8feb1545.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/118.a23b5881.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/119.bd8744a8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/12.2f225dd6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/120.535e1aff.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/121.05b36b64.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/13.1eb3a13b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/14.2f36f7fe.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/15.aff17ecc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/16.d13394b5.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/17.af2cb2fd.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/18.6d75b999.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/19.415788af.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/20.32d6be5f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/21.9d43962a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/22.d8eee8f9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/23.35f5fabc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/24.63c5b35c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/25.91fe27ea.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/26.bfa87a83.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/27.c9b2afa2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/28.a422313a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/29.76810b5d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/3.52be1d17.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/30.0d27c741.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/31.e1c45fa1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/32.fd3dbda7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/33.ea85c33c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/34.77117408.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/35.985312bc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/36.cf909541.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/37.c8357c19.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/38.845a6f3e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/39.39924048.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/4.1abb0fb3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/40.17aa6630.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/41.340b3b09.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/42.abc8e666.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/43.2f8510af.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/44.7a2b625d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/45.68e5089c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/46.703c2c3c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/47.b8de861e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/48.031d9184.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/49.5749269b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/5.611bb8b1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/50.58c15c01.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/51.e554d613.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/52.2222db4d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/53.57168bca.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/54.76f8de08.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/55.417a8dc0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/56.151e6313.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/57.8f626616.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/58.b1bbb4c7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/59.810cfbed.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/6.5730c3e8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/60.c8d34a75.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/61.7bea5573.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/62.ff5e28c6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/63.585fd217.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/64.64a42da3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/65.9d0f6c3a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/66.41395651.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/67.c64f278f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/68.dfafb342.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/69.49614350.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/7.6c6fb746.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/70.ab001da9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/71.d38af3d6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/72.84bb87a7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/73.e84f2d2b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/74.59ae79ca.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/75.087560b6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/76.e4ef24f7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/77.949001e9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/78.6b883906.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/79.2dfbbe49.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/8.ced0820d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/80.291a4f0c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/81.3cd2c060.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/82.9938d2b3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/83.0686593a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/84.d7bf3e6a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/85.baebf9bf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/86.965d175f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/87.f6c024ab.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/88.7954028a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/89.cf8c3d6e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/9.c16e6e51.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/90.4b78327a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/91.37c6be6b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/92.755cae8a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/93.571e2b5a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/94.4337e268.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/95.b31b4e1c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/96.be0fc7bf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/97.71630198.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/98.29743814.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/99.54d6b97b.js">
    <link rel="stylesheet" href="/chggx-knowlodge-vuepress/assets/css/0.styles.2ef74c7b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chggx-knowlodge-vuepress/" class="home-link router-link-active"><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png" alt="chggx-knowledge" class="logo"> <span class="site-name can-hide">chggx-knowledge</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/chggx-knowlodge-vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JAVA语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="nav-link">语言基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9faa36/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">并发&amp;多线程</a></li></ul></li><li class="dropdown-item"><h4>C语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/40db50/" class="nav-link">语言基础</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/29740f/" class="nav-link">MySQL基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">MySQL高级</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ff9a50/" class="nav-link">Influxdb</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">三大件</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">基础库</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据结构和算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">算法</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">操作系统</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/391852/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>集成开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="nav-link">IDEA</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">VSCode</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/17afa5/" class="nav-link">数据库工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/5082de/" class="nav-link">接口测试工具</a></li></ul></li><li class="dropdown-item"><h4>Linux系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1056fc/" class="nav-link">Linux基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/dfd34f/" class="nav-link">CentOS</a></li></ul></li><li class="dropdown-item"><h4>代码管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/00b1bb/" class="nav-link">Svn</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目管理&amp;构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/020d30/" class="nav-link">Maven</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/e8fc76/" class="nav-link">代码质量检查</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring家族</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">SpringMVC</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/c71dea/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0a5c18/" class="nav-link">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>服务器软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="nav-link">Web服务器</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/62479e/" class="nav-link">应用服务器</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1db5d1/" class="nav-link">缓存</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/19fb99/" class="nav-link">消息队列</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">RPC架构</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">ORM层框架</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">连接池</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">分库分表</a></li></ul></li><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6641bc/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>模板框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">Thymeleaf</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">FreeMarker</a></li></ul></li><li class="dropdown-item"><h4>前端组件化框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/abd7cf/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">VUE</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/b0e900/" class="nav-link">在线文档</a></div> <a href="https://github.com/ABirdFree" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/chggx-knowlodge-vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JAVA语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="nav-link">语言基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9faa36/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">并发&amp;多线程</a></li></ul></li><li class="dropdown-item"><h4>C语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/40db50/" class="nav-link">语言基础</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/29740f/" class="nav-link">MySQL基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">MySQL高级</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ff9a50/" class="nav-link">Influxdb</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">三大件</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">基础库</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据结构和算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">算法</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">操作系统</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/391852/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>集成开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="nav-link">IDEA</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">VSCode</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/17afa5/" class="nav-link">数据库工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/5082de/" class="nav-link">接口测试工具</a></li></ul></li><li class="dropdown-item"><h4>Linux系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1056fc/" class="nav-link">Linux基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/dfd34f/" class="nav-link">CentOS</a></li></ul></li><li class="dropdown-item"><h4>代码管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/00b1bb/" class="nav-link">Svn</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目管理&amp;构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/020d30/" class="nav-link">Maven</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/e8fc76/" class="nav-link">代码质量检查</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring家族</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">SpringMVC</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/c71dea/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0a5c18/" class="nav-link">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>服务器软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="nav-link">Web服务器</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/62479e/" class="nav-link">应用服务器</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1db5d1/" class="nav-link">缓存</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/19fb99/" class="nav-link">消息队列</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">RPC架构</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">ORM层框架</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">连接池</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">分库分表</a></li></ul></li><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6641bc/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>模板框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">Thymeleaf</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">FreeMarker</a></li></ul></li><li class="dropdown-item"><h4>前端组件化框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/abd7cf/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">VUE</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/b0e900/" class="nav-link">在线文档</a></div> <a href="https://github.com/ABirdFree" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring家族</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>服务器软件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Web服务器</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="sidebar-link">Nginx简介</a></li><li><a href="/chggx-knowlodge-vuepress/pages/a959d4/" class="sidebar-link">Nginx环境搭建</a></li><li><a href="/chggx-knowlodge-vuepress/pages/3a3f45/" class="sidebar-link">Nginx核心配置文件结构</a></li><li><a href="/chggx-knowlodge-vuepress/pages/62a7b2/" class="sidebar-link">Nginx基础配置</a></li><li><a href="/chggx-knowlodge-vuepress/pages/6ee143/" class="sidebar-link">Nginx静态资源部署</a></li><li><a href="/chggx-knowlodge-vuepress/pages/4297d4/" aria-current="page" class="active sidebar-link">Nginx反向代理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#_1-nginx反向代理概述" class="sidebar-link">1. Nginx反向代理概述</a></li><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#_2-nginx反向代理的配置语法" class="sidebar-link">2. Nginx反向代理的配置语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#proxy-pass" class="sidebar-link">proxy_pass</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#proxy-set-header" class="sidebar-link">proxysetheader</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#proxy-redirect" class="sidebar-link">proxy_redirect</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#_3-nginx反向代理实战" class="sidebar-link">3. Nginx反向代理实战</a></li><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#_4-nginx的安全控制" class="sidebar-link">4. Nginx的安全控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#如何使用ssl对流量进行加密" class="sidebar-link">如何使用SSL对流量进行加密</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#nginx添加ssl的支持" class="sidebar-link">nginx添加SSL的支持</a></li><li class="sidebar-sub-header level5"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#生成证书" class="sidebar-link">生成证书</a></li><li class="sidebar-sub-header level5"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#开启ssl实例" class="sidebar-link">开启SSL实例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/4297d4/#_5-反向代理系统调优" class="sidebar-link">5. 反向代理系统调优</a></li></ul></li><li><a href="/chggx-knowlodge-vuepress/pages/657d87/" class="sidebar-link">Nginx负载均衡</a></li><li><a href="/chggx-knowlodge-vuepress/pages/75263d/" class="sidebar-link">Nginx缓存集成</a></li><li><a href="/chggx-knowlodge-vuepress/pages/0551a7/" class="sidebar-link">Nginx实现服务器端集群搭建</a></li><li><a href="/chggx-knowlodge-vuepress/pages/cec101/" class="sidebar-link">Nginx的扩展</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>应用服务器</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>搜索引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模板框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端组件化框架</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/chggx-knowlodge-vuepress/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>应用框架</span></li><li data-v-06225672><span data-v-06225672>服务器软件</span></li><li data-v-06225672><span data-v-06225672>Web服务器</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/ABirdFree" target="_blank" title="作者" class="beLink" data-v-06225672>晨光-向</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Nginx反向代理<!----></h1> <div class="page-slot page-slot-top">
    <div class="wwads-cn wwads-horizontal page-wwads" data-id="136"></div>
    <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><h1 id="nginx反向代理"><a href="#nginx反向代理" class="header-anchor">#</a> Nginx反向代理</h1> <h2 id="_1-nginx反向代理概述"><a href="#_1-nginx反向代理概述" class="header-anchor">#</a> 1. Nginx反向代理概述</h2> <p>关于正向代理和反向代理，我们在前面的章节已经通过一张图给大家详细的介绍过了，简而言之就是正向代理代理的对象是客户端，反向代理代理的是服务端，这是两者之间最大的区别。</p> <p>Nginx即可以实现正向代理，也可以实现反向代理。</p> <p>我们先来通过一个小案例演示下Nginx正向代理的简单应用。</p> <p>先提需求：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182013147.png" alt=""></p> <p>(1)服务端的设置：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">http</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">  log_format</span> <span class="token value attr-value">main 'client send request=&gt;clientIp=$remote_addr serverIp=&gt;$host';</span>
	server{
<span class="token key attr-name">		listen</span> <span class="token value attr-value">80;</span>
		server_name	localhost;
<span class="token key attr-name">		access_log</span> <span class="token value attr-value">logs/access.log main;</span>
<span class="token key attr-name">		location</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">			root</span> <span class="token value attr-value">html;</span>
<span class="token key attr-name">			index</span> <span class="token value attr-value">index.html index.htm;</span>
		}
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>(2)使用客户端访问服务端，打开日志查看结果</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182013653.png" alt="1589729000713"></p> <p>(3)代理服务器设置：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>

<span class="token key attr-name">        listen</span> <span class="token value attr-value"> 82;</span>
<span class="token key attr-name">        resolver</span> <span class="token value attr-value">8.8.8.8;</span>
<span class="token key attr-name">        location</span> <span class="token value attr-value">/{</span>
<span class="token key attr-name">                proxy_pass</span> <span class="token value attr-value">http://$host$request_uri;</span>
        }
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>(4)查看代理服务器的IP(192.168.200.146)和Nginx配置监听的端口(82)</p> <p>(5)在客户端配置代理服务器</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182013299.png" alt=""></p> <p>(6)设置完成后，再次通过浏览器访问服务端</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182013094.png" alt="1589729479920"></p> <p>通过对比，上下两次的日志记录，会发现虽然我们是客户端访问服务端，但是如何使用了代理，那么服务端能看到的只是代理发送过去的请求，这样的化，就使用Nginx实现了正向代理的设置。</p> <p>但是Nginx正向代理，在实际的应用中不是特别多，所以我们简单了解下，接下来我们继续学习Nginx的反向代理，这是Nginx比较重要的一个功能。</p> <h2 id="_2-nginx反向代理的配置语法"><a href="#_2-nginx反向代理的配置语法" class="header-anchor">#</a> 2. Nginx反向代理的配置语法</h2> <p>Nginx反向代理模块的指令是由<code>ngx_http_proxy_module</code>模块进行解析，该模块在安装Nginx的时候已经自己加装到Nginx中了，接下来我们把反向代理中的常用指令一一介绍下：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>proxy_pass
proxy_set_header
proxy_redirect
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="proxy-pass"><a href="#proxy-pass" class="header-anchor">#</a> proxy_pass</h3> <p>该指令用来设置被代理服务器地址，可以是主机名称、IP地址加端口号形式。</p> <table><thead><tr><th>语法</th> <th>proxy_pass URL;</th></tr></thead> <tbody><tr><td>默认值</td> <td>—</td></tr> <tr><td>位置</td> <td>location</td></tr></tbody></table> <p>URL:为要设置的被代理服务器地址，包含传输协议(<code>http</code>,<code>https://</code>)、主机名称或IP地址加端口号、URI等要素。</p> <p>举例：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">proxy_pass</span> <span class="token value attr-value">http://www.baidu.com;</span>
<span class="token key attr-name">location</span> <span class="token value attr-value">/server{}</span>
<span class="token key attr-name">proxy_pass</span> <span class="token value attr-value">http://192.168.200.146;</span>
<span class="token key attr-name">    http</span><span class="token punctuation">:</span><span class="token value attr-value">//192.168.200.146/server/index.html</span>
<span class="token key attr-name">proxy_pass</span> <span class="token value attr-value">http://192.168.200.146/;</span>
<span class="token key attr-name">    http</span><span class="token punctuation">:</span><span class="token value attr-value">//192.168.200.146/index.html</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>大家在编写proxy_pass的时候，后面的值要不要加&quot;/&quot;?</p> <p>接下来通过例子来说明刚才我们提到的问题：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">	listen</span> <span class="token value attr-value">80;</span>
<span class="token key attr-name">	server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">	location</span> <span class="token value attr-value">/{</span>
<span class="token comment">		#proxy_pass http://192.168.200.146;</span>
<span class="token key attr-name">		proxy_pass</span> <span class="token value attr-value">http://192.168.200.146/;</span>
	}
}
<span class="token key attr-name">当客户端访问</span> <span class="token value attr-value">http://localhost/index.html,效果是一样的</span>
server{
<span class="token key attr-name">	listen</span> <span class="token value attr-value">80;</span>
<span class="token key attr-name">	server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">	location</span> <span class="token value attr-value">/server{</span>
<span class="token comment">		#proxy_pass http://192.168.200.146;</span>
<span class="token key attr-name">		proxy_pass</span> <span class="token value attr-value">http://192.168.200.146/;</span>
	}
}
<span class="token key attr-name">当客户端访问</span> <span class="token value attr-value">http://localhost/server/index.html</span>
<span class="token key attr-name">这个时候，第一个proxy_pass就变成了http</span><span class="token punctuation">:</span><span class="token value attr-value">//localhost/server/index.html</span>
<span class="token key attr-name">第二个proxy_pass就变成了http</span><span class="token punctuation">:</span><span class="token value attr-value">//localhost/index.html效果就不一样了。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="proxy-set-header"><a href="#proxy-set-header" class="header-anchor">#</a> proxy_set_header</h3> <p>该指令可以更改Nginx服务器接收到的客户端请求的请求头信息，然后将新的请求头发送给代理的服务器</p> <table><thead><tr><th>语法</th> <th>proxy_set_header field value;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_set_header Host $proxy_host;<br>proxy_set_header Connection close;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>需要注意的是，如果想要看到结果，必须在被代理的服务器上来获取添加的头信息。</p> <p>被代理服务器： [192.168.200.146]</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value"> 8080;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">        default_type</span> <span class="token value attr-value">text/plain;</span>
<span class="token key attr-name">        return</span> <span class="token value attr-value">200 $http_username;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>代理服务器: [192.168.200.133]</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value"> 8080;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">        location</span> <span class="token value attr-value">/server {</span>
<span class="token key attr-name">                proxy_pass</span> <span class="token value attr-value">http://192.168.200.146:8080/;</span>
<span class="token key attr-name">                proxy_set_header</span> <span class="token value attr-value">username TOM;</span>
        }
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>访问测试</p> <h3 id="proxy-redirect"><a href="#proxy-redirect" class="header-anchor">#</a> proxy_redirect</h3> <p>该指令是用来重置头信息中的&quot;Location&quot;和&quot;Refresh&quot;的值。</p> <table><thead><tr><th>语法</th> <th>proxy_redirect redirect replacement;<br>proxy_redirect default;<br>proxy_redirect off;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_redirect default;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>》为什么要用该指令?</p> <p>服务端[192.168.200.146]</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">    listen</span> <span class="token value attr-value"> 8081;</span>
<span class="token key attr-name">    server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">    if</span> <span class="token value attr-value">(!-f $request_filename){</span>
<span class="token key attr-name">    	return</span> <span class="token value attr-value">302 http://192.168.200.146;</span>
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>代理服务端[192.168.200.133]</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">	listen</span> <span class="token value attr-value"> 8081;</span>
<span class="token key attr-name">	server_name</span> <span class="token value attr-value">localhost;</span>
<span class="token key attr-name">	location</span> <span class="token value attr-value">/ {</span>
<span class="token key attr-name">		proxy_pass</span> <span class="token value attr-value">http://192.168.200.146:8081/;</span>
<span class="token key attr-name">		proxy_redirect</span> <span class="token value attr-value">http://192.168.200.146 http://192.168.200.133;</span>
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>》该指令的几组选项</p> <p>proxy_redirect redirect replacement;</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">redirect</span><span class="token punctuation">:</span><span class="token value attr-value">目标,Location的值</span>
<span class="token key attr-name">replacement</span><span class="token punctuation">:</span><span class="token value attr-value">要替换的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>proxy_redirect default;</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>default;
将location块的uri变量作为replacement,
将proxy_pass变量作为redirect进行替换
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>proxy_redirect off;</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>关闭proxy_redirect的功能
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-nginx反向代理实战"><a href="#_3-nginx反向代理实战" class="header-anchor">#</a> 3. Nginx反向代理实战</h2> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182014440.png" alt="1581883378672"></p> <p>服务器1,2,3存在两种情况</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">第一种情况</span><span class="token punctuation">:</span> <span class="token value attr-value">三台服务器的内容不一样。</span>
<span class="token key attr-name">第二种情况</span><span class="token punctuation">:</span> <span class="token value attr-value">三台服务器的内容是一样。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li>如果服务器1、服务器2和服务器3的内容不一样，那我们可以根据用户请求来分发到不同的服务器。</li></ol> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>代理服务器
<span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value">         8082;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">    localhost;</span>
<span class="token key attr-name">        location</span> <span class="token value attr-value">/server1 {</span>
<span class="token key attr-name">                proxy_pass</span> <span class="token value attr-value">http://192.168.200.146:9001/;</span>
        }
<span class="token key attr-name">        location</span> <span class="token value attr-value">/server2 {</span>
<span class="token key attr-name">                proxy_pass</span> <span class="token value attr-value">http://192.168.200.146:9002/;</span>
        }
<span class="token key attr-name">        location</span> <span class="token value attr-value">/server3 {</span>
<span class="token key attr-name">                proxy_pass</span> <span class="token value attr-value">http://192.168.200.146:9003/;</span>
        }
}

服务端
server1
<span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value">         9001;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">    localhost;</span>
<span class="token key attr-name">        default_type</span> <span class="token value attr-value">text/html;</span>
<span class="token key attr-name">        return</span> <span class="token value attr-value">200 '&lt;h1&gt;192.168.200.146:9001&lt;/h1&gt;'</span>
}
server2
<span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value">         9002;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">    localhost;</span>
<span class="token key attr-name">        default_type</span> <span class="token value attr-value">text/html;</span>
<span class="token key attr-name">        return</span> <span class="token value attr-value">200 '&lt;h1&gt;192.168.200.146:9002&lt;/h1&gt;'</span>
}
server3
<span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">        listen</span> <span class="token value attr-value">         9003;</span>
<span class="token key attr-name">        server_name</span> <span class="token value attr-value">    localhost;</span>
<span class="token key attr-name">        default_type</span> <span class="token value attr-value">text/html;</span>
<span class="token key attr-name">        return</span> <span class="token value attr-value">200 '&lt;h1&gt;192.168.200.146:9003&lt;/h1&gt;'</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ol start="2"><li>如果服务器1、服务器2和服务器3的内容是一样的，该如何处理?</li></ol> <h2 id="_4-nginx的安全控制"><a href="#_4-nginx的安全控制" class="header-anchor">#</a> 4. Nginx的安全控制</h2> <p>关于web服务器的安全是比较大的一个话题，里面所涉及的内容很多，Nginx反向代理是如何来提升web服务器的安全呢？</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>安全隔离
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>什么是安全隔离?</p> <p>通过代理分开了客户端到应用程序服务器端的连接，实现了安全措施。在反向代理之前设置防火墙，仅留一个入口供代理服务器访问。</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182014621.png" alt="1589908851340"></p> <h3 id="如何使用ssl对流量进行加密"><a href="#如何使用ssl对流量进行加密" class="header-anchor">#</a> 如何使用SSL对流量进行加密</h3> <p>翻译成大家能熟悉的说法就是将我们常用的http请求转变成https请求，那么这两个之间的区别简单的来说两个都是HTTP协议，只不过https是身披SSL外壳的http.</p> <p>HTTPS是一种通过计算机网络进行安全通信的传输协议。它经由HTTP进行通信，利用SSL/TLS建立全通信，加密数据包，确保数据的安全性。</p> <p>SSL(Secure Sockets Layer)安全套接层</p> <p>TLS(Transport Layer Security)传输层安全</p> <p>上述这两个是为网络通信提供安全及数据完整性的一种安全协议，TLS和SSL在传输层和应用层对网络连接进行加密。</p> <p>总结来说为什么要使用https:</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>http协议是明文传输数据，存在安全问题，而https是加密传输，相当于http+ssl，并且可以防止流量劫持。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Nginx要想使用SSL，需要满足一个条件即需要添加一个模块<code>--with-http_ssl_module</code>,而该模块在编译的过程中又需要OpenSSL的支持，这个我们之前已经准备好了。</p> <h4 id="nginx添加ssl的支持"><a href="#nginx添加ssl的支持" class="header-anchor">#</a> nginx添加SSL的支持</h4> <p>（1）完成 <code>--with-http_ssl_module</code>模块的增量添加</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>》将原有/usr/local/nginx/sbin/nginx进行备份
》拷贝nginx之前的配置信息
<span class="token key attr-name">》在nginx的安装源码进行配置指定对应模块</span> <span class="token value attr-value"> ./configure --with-http_ssl_module</span>
》通过make模板进行编译
》将objs下面的nginx移动到/usr/local/nginx/sbin下
<span class="token key attr-name">》在源码目录下执行</span> <span class="token value attr-value"> make upgrade进行升级，这个可以实现不停机添加新模块的功能</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Nginx的SSL相关指令</p> <p>因为刚才我们介绍过该模块的指令都是通过ngx_http_ssl_module模块来解析的。</p> <p>》ssl:该指令用来在指定的服务器开启HTTPS,可以使用 listen 443 ssl,后面这种方式更通用些。</p> <table><thead><tr><th>语法</th> <th>ssl on | off;</th></tr></thead> <tbody><tr><td>默认值</td> <td>ssl off;</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>server{
<span class="token key attr-name">	listen</span> <span class="token value attr-value">443 ssl;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>》ssl_certificate:为当前这个虚拟主机指定一个带有PEM格式证书的证书。</p> <table><thead><tr><th>语法</th> <th>ssl_certificate file;</th></tr></thead> <tbody><tr><td>默认值</td> <td>—</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <p>》ssl_certificate_key:该指令用来指定PEM secret key文件的路径</p> <table><thead><tr><th>语法</th> <th>ssl_ceritificate_key file;</th></tr></thead> <tbody><tr><td>默认值</td> <td>—</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <p>》ssl_session_cache:该指令用来配置用于SSL会话的缓存</p> <table><thead><tr><th>语法</th> <th>ssl_sesion_cache off|none|[builtin[:size]] [shared:name:size]</th></tr></thead> <tbody><tr><td>默认值</td> <td>ssl_session_cache none;</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <p>off:禁用会话缓存，客户端不得重复使用会话</p> <p>none:禁止使用会话缓存，客户端可以重复使用，但是并没有在缓存中存储会话参数</p> <p>builtin:内置OpenSSL缓存，仅在一个工作进程中使用。</p> <p>shared:所有工作进程之间共享缓存，缓存的相关信息用name和size来指定</p> <p>》ssl_session_timeout：开启SSL会话功能后，设置客户端能够反复使用储存在缓存中的会话参数时间。</p> <table><thead><tr><th>语法</th> <th>ssl_session_timeout time;</th></tr></thead> <tbody><tr><td>默认值</td> <td>ssl_session_timeout 5m;</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <p>》ssl_ciphers:指出允许的密码，密码指定为OpenSSL支持的格式</p> <table><thead><tr><th>语法</th> <th>ssl_ciphers ciphers;</th></tr></thead> <tbody><tr><td>默认值</td> <td>ssl_ciphers HIGH:!aNULL:!MD5;</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <p>可以使用<code>openssl ciphers</code>查看openssl支持的格式。</p> <p>》ssl_prefer_server_ciphers：该指令指定是否服务器密码优先客户端密码</p> <table><thead><tr><th>语法</th> <th>ssl_perfer_server_ciphers on|off;</th></tr></thead> <tbody><tr><td>默认值</td> <td>ssl_perfer_server_ciphers off;</td></tr> <tr><td>位置</td> <td>http、server</td></tr></tbody></table> <h5 id="生成证书"><a href="#生成证书" class="header-anchor">#</a> 生成证书</h5> <p>方式一：使用阿里云/腾讯云等第三方服务进行购买。</p> <p>方式二:使用openssl生成证书</p> <p>先要确认当前系统是否有安装openssl</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">openssl</span> <span class="token value attr-value">version</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装下面的命令进行生成</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">mkdir</span> <span class="token value attr-value">/root/cert</span>
<span class="token key attr-name">cd</span> <span class="token value attr-value">/root/cert</span>
<span class="token key attr-name">openssl</span> <span class="token value attr-value">genrsa -des3 -out server.key 1024</span>
<span class="token key attr-name">openssl</span> <span class="token value attr-value">req -new -key server.key -out server.csr</span>
<span class="token key attr-name">cp</span> <span class="token value attr-value">server.key server.key.org</span>
<span class="token key attr-name">openssl</span> <span class="token value attr-value">rsa -in server.key.org -out server.key</span>
<span class="token key attr-name">openssl</span> <span class="token value attr-value">x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="开启ssl实例"><a href="#开启ssl实例" class="header-anchor">#</a> 开启SSL实例</h5> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server</span> <span class="token value attr-value">{</span>
<span class="token key attr-name">    listen</span> <span class="token value attr-value">      443 ssl;</span>
<span class="token key attr-name">    server_name</span> <span class="token value attr-value"> localhost;</span>

<span class="token key attr-name">    ssl_certificate</span> <span class="token value attr-value">     server.cert;</span>
<span class="token key attr-name">    ssl_certificate_key</span> <span class="token value attr-value"> server.key;</span>

<span class="token key attr-name">    ssl_session_cache</span> <span class="token value attr-value">   shared:SSL:1m;</span>
<span class="token key attr-name">    ssl_session_timeout</span> <span class="token value attr-value"> 5m;</span>

<span class="token key attr-name">    ssl_ciphers</span> <span class="token value attr-value"> HIGH:!aNULL:!MD5;</span>
<span class="token key attr-name">    ssl_prefer_server_ciphers</span> <span class="token value attr-value"> on;</span>

<span class="token key attr-name">    location</span> <span class="token value attr-value">/ {</span>
<span class="token key attr-name">        root</span> <span class="token value attr-value">  html;</span>
<span class="token key attr-name">        index</span> <span class="token value attr-value"> index.html index.htm;</span>
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>（4）验证</p> <h2 id="_5-反向代理系统调优"><a href="#_5-反向代理系统调优" class="header-anchor">#</a> 5. 反向代理系统调优</h2> <p>反向代理值Buffer和Cache</p> <p>Buffer翻译过来是&quot;缓冲&quot;，Cache翻译过来是&quot;缓存&quot;。</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182014739.png" alt="1581879638569"></p> <p>总结下：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">相同点</span><span class="token punctuation">:</span>
两种方式都是用来提供IO吞吐效率，都是用来提升Nginx代理的性能。
<span class="token key attr-name">不同点</span><span class="token punctuation">:</span>
缓冲主要用来解决不同设备之间数据传递速度不一致导致的性能低的问题，缓冲中的数据一旦此次操作完成后，就可以删除。
缓存主要是备份，将被代理服务器的数据缓存一份到代理服务器，这样的话，客户端再次获取相同数据的时候，就只需要从代理服务器上获取，效率较高，缓存中的数据可以重复使用，只有满足特定条件才会删除.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>（1）Proxy Buffer相关指令</p> <p>》proxy_buffering :该指令用来开启或者关闭代理服务器的缓冲区；</p> <table><thead><tr><th>语法</th> <th>proxy_buffering on|off;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_buffering on;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>》proxy_buffers:该指令用来指定单个连接从代理服务器读取响应的缓存区的个数和大小。</p> <table><thead><tr><th>语法</th> <th>proxy_buffers number size;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_buffers 8 4k | 8K;(与系统平台有关)</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>number:缓冲区的个数</p> <p>size:每个缓冲区的大小，缓冲区的总大小就是number*size</p> <p>》proxy_buffer_size:该指令用来设置从被代理服务器获取的第一部分响应数据的大小。保持与proxy_buffers中的size一致即可，当然也可以更小。</p> <table><thead><tr><th>语法</th> <th>proxy_buffer_size size;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_buffer_size 4k | 8k;(与系统平台有关)</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>》proxy_busy_buffers_size：该指令用来限制同时处于BUSY状态的缓冲总大小。</p> <table><thead><tr><th>语法</th> <th>proxy_busy_buffers_size size;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_busy_buffers_size 8k|16K;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>》proxy_temp_path:当缓冲区存满后，仍未被Nginx服务器完全接受，响应数据就会被临时存放在磁盘文件上，该指令设置文件路径</p> <table><thead><tr><th>语法</th> <th>proxy_temp_path  path;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_temp_path proxy_temp;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>注意path最多设置三层。</p> <p>》proxy_temp_file_write_size：该指令用来设置磁盘上缓冲文件的大小。</p> <table><thead><tr><th>语法</th> <th>proxy_temp_file_write_size size;</th></tr></thead> <tbody><tr><td>默认值</td> <td>proxy_temp_file_write_size 8K|16K;</td></tr> <tr><td>位置</td> <td>http、server、location</td></tr></tbody></table> <p>通用网站的配置</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">proxy_buffering</span> <span class="token value attr-value">on;</span>
<span class="token key attr-name">proxy_buffer_size</span> <span class="token value attr-value">4 32k;</span>
<span class="token key attr-name">proxy_busy_buffers_size</span> <span class="token value attr-value">64k;</span>
<span class="token key attr-name">proxy_temp_file_write_size</span> <span class="token value attr-value">64k;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>根据项目的具体内容进行相应的调节。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/18, 22:23:14</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/chggx-knowlodge-vuepress/pages/6ee143/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Nginx静态资源部署</div></a> <a href="/chggx-knowlodge-vuepress/pages/657d87/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Nginx负载均衡</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/chggx-knowlodge-vuepress/pages/6ee143/" class="prev">Nginx静态资源部署</a></span> <span class="next"><a href="/chggx-knowlodge-vuepress/pages/657d87/">Nginx负载均衡</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:1348088236@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/ABirdFree" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>晨光向 | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/chggx-knowlodge-vuepress/assets/js/app.15d702c5.js" defer></script><script src="/chggx-knowlodge-vuepress/assets/js/2.796b80a3.js" defer></script><script src="/chggx-knowlodge-vuepress/assets/js/102.bea11a8f.js" defer></script>
  </body>
</html>
