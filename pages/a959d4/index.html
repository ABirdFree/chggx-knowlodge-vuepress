<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx-环境搭建 | 晨光向的编码之旅</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <link rel="manifest" href="/chggx-knowlodge-vuepress/manifest.json">
    <link rel="apple-touch-icon" href="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <link rel="mask-icon" href="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png" color="#3eaf7c">
    <meta name="description" content="一个基于VuePress的 知识管理&amp;博客 主题">
    <meta property="article:published_time" content="2023-03-15T21:39:14.000Z">
    <meta property="article:modified_time" content="2023-04-12T08:35:55.000Z">
    <meta property="og:site_name" content="晨光向的编程之旅">
    <meta property="og:title" content="Nginx-环境搭建">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ts.cnlxc.cn//pages/a959d4/">
    <meta property="og:image" content="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <meta name="twitter:title" content="Nginx-环境搭建">
    <meta name="twitter:url" content="https://ts.cnlxc.cn//pages/a959d4/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="keywords" content="晨光向的编程之旅,晨光向,java,mysql,nginx,redis,spring,blog">
    <meta name="theme-color" content="#11a8cd">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/chggx-knowlodge-vuepress/assets/css/0.styles.ab634e08.css" as="style"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/app.c2a3e6d7.js" as="script"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/2.7f8741fb.js" as="script"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/147.06b02b43.js" as="script"><link rel="preload" href="/chggx-knowlodge-vuepress/assets/js/3.7b4d6574.js" as="script"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/10.661686d2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/100.4365d0f6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/101.00b801b7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/102.5a492d90.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/103.7baf13b7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/104.95e71193.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/105.c5f630f6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/106.67f4a194.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/107.bf6cddc1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/108.a87749ad.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/109.3773d822.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/11.acf1a56c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/110.c0622e6b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/111.681835e1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/112.d4703ec9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/113.61a30d98.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/114.6c0a8846.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/115.01b98f56.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/116.d0340d7b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/117.b75755e3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/118.a13f1057.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/119.43678509.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/12.b0a6e252.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/120.f3406835.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/121.6cc23800.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/122.e3c0ae8b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/123.23b5f7f4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/124.cce0fdb0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/125.877da01a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/126.1e532944.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/127.47a05e6e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/128.e14bb239.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/129.6c8afc8d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/13.804ffac3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/130.05213bf7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/131.ec63ccf8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/132.7d48b275.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/133.d8001f0c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/134.9d50e512.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/135.f19cf169.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/136.19956038.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/137.57e3c7c2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/138.a66a2b44.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/139.6f17c309.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/14.ca2451d0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/140.5b5cdb88.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/141.178dfcbf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/142.40387b22.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/143.e4cb1b2b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/144.93f5c0f4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/145.103a7d05.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/146.ab2150f9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/148.6a7882fe.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/149.2a1cbd20.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/15.11651e6f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/150.981cfbaa.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/151.30edcad3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/152.fcdf0071.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/153.2cfdc42a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/154.3fc56daf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/155.8650d114.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/156.71f47926.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/157.f316ee1b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/158.1a471eb7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/159.7979a346.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/16.357ebfa1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/160.ed21ec05.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/161.69839c28.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/162.ed2ea4dc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/163.fc494f21.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/164.68fdb80b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/165.0fb54685.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/166.8a7224e8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/167.a7f176a6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/168.46199e90.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/169.aa7ae3cb.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/17.9fe011ac.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/170.419b5461.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/171.f5d20bde.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/172.b8ce984f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/173.6866611e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/174.d0719e0c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/175.b1a4b531.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/176.8f536837.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/177.923b6f27.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/178.79b99cad.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/179.786bdc6d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/18.9e358201.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/180.0e9f8060.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/181.faa8709a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/182.eeb4cfb0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/183.7144cda0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/184.aa5a714e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/185.4b13bfce.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/186.dee9be1a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/187.8956b575.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/188.da117cf8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/189.62278389.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/19.8a8a13f3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/20.17a50d59.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/21.00af4b96.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/22.0f7f8b09.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/23.7e867340.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/24.524ae2d6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/25.76eb9b6c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/26.d0ce5b98.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/27.2840b941.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/28.014714ac.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/29.433e7ff1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/30.d5049101.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/31.fe8714b4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/32.7e0d6859.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/33.f36d51d7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/34.4ceb79e2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/35.e0d750c4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/36.a1f43f32.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/37.f8a22eeb.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/38.71fcd0f4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/39.c5ee4869.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/4.3db72c55.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/40.df712dce.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/41.13ff1ac7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/42.e397526b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/43.26711ecf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/44.d9280916.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/45.2c725a59.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/46.847749ec.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/47.40e1a3f3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/48.548674a6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/49.31474dd6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/5.0b6a42ae.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/50.d6fd2939.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/51.946cb5e5.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/52.416c9db2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/53.584294fc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/54.d1b92449.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/55.a30e1b0f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/56.d84f076b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/57.46e13066.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/58.d6b6b443.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/59.a418fb87.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/6.84c10d07.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/60.908bfe9b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/61.1dc493ca.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/62.60b07a7c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/63.1f946d7a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/64.8b641dff.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/65.abeece55.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/66.4e7b7328.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/67.c25cd268.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/68.8508e6cd.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/69.1a8fddf6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/7.291ad652.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/70.32784578.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/71.9972fc08.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/72.4903516b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/73.1880bf20.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/74.34de7ec5.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/75.52e40b76.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/76.3e6ab951.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/77.af9b1bad.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/78.baccc7e3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/79.ddcb792b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/8.d7738fe7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/80.6f29194a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/81.eb730a7e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/82.aae3df5f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/83.8c4e2ad4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/84.ec2bb578.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/85.d30a0264.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/86.c6e3fd71.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/87.252af8c6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/88.4fafea89.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/89.3c78d321.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/9.87e39e13.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/90.bb8b19e7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/91.6a369220.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/92.41fe39b0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/93.a0ae7bc9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/94.5fb278bb.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/95.60007888.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/96.87c7a503.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/97.81925429.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/98.7952e5bb.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/js/99.71cc54eb.js">
    <link rel="stylesheet" href="/chggx-knowlodge-vuepress/assets/css/0.styles.ab634e08.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chggx-knowlodge-vuepress/" class="home-link router-link-active"><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303170016613.png" alt="晨光向的编码之旅" class="logo"> <span class="site-name can-hide">晨光向的编码之旅</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/chggx-knowlodge-vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JAVA语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="nav-link">语言基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9faa36/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/3e9c3c/" class="nav-link">多线程</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a142ba/" class="nav-link">并发编程基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/818132/" class="nav-link">并发编程进阶</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/29740f/" class="nav-link">MySQL基础</a></li><li class="dropdown-subitem"><a href="https://note.youdao.com/s/dXUGd7xa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MySQL基础-常用工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">MySQL高级</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ff9a50/" class="nav-link">Influxdb</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="nav-link">数据结构和算法</a></li><li class="dropdown-item"><!----> <a href="https://www.r2coding.com/#/?id=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机网络
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.r2coding.com/#/?id=%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f" target="_blank" rel="noopener noreferrer" class="nav-link external">
  操作系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/391852/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>集成开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="nav-link">IDEA</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">VSCode</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/17afa5/" class="nav-link">数据库工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/5082de/" class="nav-link">接口测试工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/883ecf/" class="nav-link">Markdown</a></li></ul></li><li class="dropdown-item"><h4>Linux系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1056fc/" class="nav-link">Linux基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/dfd34f/" class="nav-link">CentOS</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/27c228/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>代码管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/00b1bb/" class="nav-link">Svn</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目管理&amp;构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/020d30/" class="nav-link">Maven</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/e8fc76/" class="nav-link">代码质量检查</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/b353b1/" class="nav-link">开发部署文档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring家族</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d04a9e/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/c71dea/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/376f90/" class="nav-link">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>服务器软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="nav-link">Web服务器</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/62479e/" class="nav-link">应用服务器</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1db5d1/" class="nav-link">缓存</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/19fb99/" class="nav-link">消息队列</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/52168a/" class="nav-link">RPC架构</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/adffbc/" class="nav-link">ORM层框架</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1e130e/" class="nav-link">连接池</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a37c17/" class="nav-link">分库分表</a></li></ul></li><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6a898f/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>前端组件化框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/abd7cf/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a959d4/404" class="nav-link">VUE</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/d2c6a1/" class="nav-link">问题汇总</a></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/b0e900/" class="nav-link">在线文档</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/chggx-knowlodge-vuepress/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="link-title">语言</a> <span class="title" style="display:none;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JAVA语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ec1391/" class="nav-link">语言基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9faa36/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/3e9c3c/" class="nav-link">多线程</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a142ba/" class="nav-link">并发编程基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/818132/" class="nav-link">并发编程进阶</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/29740f/" class="nav-link">MySQL基础</a></li><li class="dropdown-subitem"><a href="https://note.youdao.com/s/dXUGd7xa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MySQL基础-常用工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/" class="nav-link router-link-active">MySQL高级</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/ff9a50/" class="nav-link">Influxdb</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/febdf1/" class="nav-link">数据结构和算法</a></li><li class="dropdown-item"><!----> <a href="https://www.r2coding.com/#/?id=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机网络
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.r2coding.com/#/?id=%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f" target="_blank" rel="noopener noreferrer" class="nav-link external">
  操作系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/391852/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="link-title">开发工具</a> <span class="title" style="display:none;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>集成开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6ad6ad/" class="nav-link">IDEA</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">VSCode</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/17afa5/" class="nav-link">数据库工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/5082de/" class="nav-link">接口测试工具</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/883ecf/" class="nav-link">Markdown</a></li></ul></li><li class="dropdown-item"><h4>Linux系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1056fc/" class="nav-link">Linux基础</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/dfd34f/" class="nav-link">CentOS</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/27c228/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>代码管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/00b1bb/" class="nav-link">Svn</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d486f7/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>项目管理&amp;构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/020d30/" class="nav-link">Maven</a></li></ul></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/e8fc76/" class="nav-link">代码质量检查</a></li><li class="dropdown-item"><!----> <a href="/chggx-knowlodge-vuepress/pages/b353b1/" class="nav-link">开发部署文档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring家族</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/0705f0/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/d04a9e/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/c71dea/" class="nav-link">SpringBoot</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/376f90/" class="nav-link">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>服务器软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="nav-link">Web服务器</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/62479e/" class="nav-link">应用服务器</a></li></ul></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1db5d1/" class="nav-link">缓存</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/19fb99/" class="nav-link">消息队列</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/52168a/" class="nav-link">RPC架构</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/adffbc/" class="nav-link">ORM层框架</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/1e130e/" class="nav-link">连接池</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a37c17/" class="nav-link">分库分表</a></li></ul></li><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/6a898f/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>前端组件化框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/abd7cf/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/chggx-knowlodge-vuepress/pages/a959d4/404" class="nav-link">VUE</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/d2c6a1/" class="nav-link">问题汇总</a></div><div class="nav-item"><a href="/chggx-knowlodge-vuepress/pages/b0e900/" class="nav-link">在线文档</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring家族</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>服务器软件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Web服务器</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="sidebar-link">Nginx-简介</a></li><li><a href="/chggx-knowlodge-vuepress/pages/a959d4/" aria-current="page" class="active sidebar-link">Nginx-环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#nginx-环境搭建-linux版" class="sidebar-link">Nginx-环境搭建(Linux版)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_1-nginx版本介绍" class="sidebar-link">1. Nginx版本介绍</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_2-获取nginx源码" class="sidebar-link">2. 获取Nginx源码</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_3-准备服务器系统" class="sidebar-link">3. 准备服务器系统</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_4-nginx安装方式介绍" class="sidebar-link">4. Nginx安装方式介绍</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_4-1-nginx的源码简单安装" class="sidebar-link">4.1 Nginx的源码简单安装</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_4-2-yum安装" class="sidebar-link">4.2 yum安装</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#源码简单安装和yum安装的差异" class="sidebar-link">源码简单安装和yum安装的差异：</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_4-3-nginx的源码复杂安装" class="sidebar-link">4.3 Nginx的源码复杂安装 😄</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_4-rpm安装包安装nginx" class="sidebar-link">4. rpm安装包安装nginx</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_5-nginx目录结构分析" class="sidebar-link">5. Nginx目录结构分析</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_6-nginx服务器启停命令" class="sidebar-link">6. Nginx服务器启停命令</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#nginx服务的信号控制" class="sidebar-link">Nginx服务的信号控制</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#nginx的命令行控制" class="sidebar-link">Nginx的命令行控制</a></li><li class="sidebar-sub-header level3"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#_7-nginx服务器版本升级和新增模块" class="sidebar-link">7. Nginx服务器版本升级和新增模块</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#环境准备" class="sidebar-link">环境准备</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#方案一-使用nginx服务信号进行升级" class="sidebar-link">方案一:使用Nginx服务信号进行升级</a></li><li class="sidebar-sub-header level4"><a href="/chggx-knowlodge-vuepress/pages/a959d4/#方案二-使用nginx安装目录的make命令完成升级" class="sidebar-link">方案二:使用Nginx安装目录的make命令完成升级</a></li></ul></li></ul></li><li><a href="/chggx-knowlodge-vuepress/pages/3a3f45/" class="sidebar-link">Nginx-核心配置文件结构</a></li><li><a href="/chggx-knowlodge-vuepress/pages/62a7b2/" class="sidebar-link">Nginx-基础配置</a></li><li><a href="/chggx-knowlodge-vuepress/pages/6ee143/" class="sidebar-link">Nginx-静态资源部署</a></li><li><a href="/chggx-knowlodge-vuepress/pages/4297d4/" class="sidebar-link">Nginx-反向代理</a></li><li><a href="/chggx-knowlodge-vuepress/pages/657d87/" class="sidebar-link">Nginx-负载均衡</a></li><li><a href="/chggx-knowlodge-vuepress/pages/75263d/" class="sidebar-link">Nginx-缓存集成</a></li><li><a href="/chggx-knowlodge-vuepress/pages/0551a7/" class="sidebar-link">Nginx-实现服务器端集群搭建</a></li><li><a href="/chggx-knowlodge-vuepress/pages/5b50b1/" class="sidebar-link">Nginx-使用技巧</a></li><li><a href="/chggx-knowlodge-vuepress/pages/cec101/" class="sidebar-link">Nginx-扩展</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>应用服务器</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>搜索引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端组件化框架</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/chggx-knowlodge-vuepress/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>应用框架</span></li><li data-v-06225672><span data-v-06225672>服务器软件</span></li><li data-v-06225672><span data-v-06225672>Web服务器</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://gitee.com/afreebird" target="_blank" title="作者" class="beLink" data-v-06225672>晨光-向</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Nginx-环境搭建<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="nginx-环境搭建-linux版"><a href="#nginx-环境搭建-linux版" class="header-anchor">#</a> Nginx-环境搭建(Linux版)</h2> <h3 id="_1-nginx版本介绍"><a href="#_1-nginx版本介绍" class="header-anchor">#</a> 1. Nginx版本介绍</h3> <p><a href="http://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx的官方网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>打开源码可以看到如下的页面内容</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152111528.png" alt="202303152111528"></p> <p>Nginx的官方下载网站为<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">http://nginx.org/en/download.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，当然你也可以之间在首页选中右边的download进入版本下载网页。在下载页面我们会看到如下内容：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152111265.png" alt="202303152111265"></p> <h3 id="_2-获取nginx源码"><a href="#_2-获取nginx源码" class="header-anchor">#</a> 2. 获取Nginx源码</h3> <p><a href="http://nginx.org/download/" target="_blank" rel="noopener noreferrer">http://nginx.org/download/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>打开上述网站，就可以查看到Nginx的所有版本，选中自己需要的版本进行下载。下载我们可以直接在windows上下载然后上传到服务器，也可以直接从服务器上下载，这个时候就需要准备一台服务器。</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152111695.png" alt="202303152111695"></p> <h3 id="_3-准备服务器系统"><a href="#_3-准备服务器系统" class="header-anchor">#</a> 3. 准备服务器系统</h3> <p>环境准备</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>系统版本：Centos7
远程连接工具：MobaXterm,xsheel,SecureCRT
网络
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>(1)确认centos的内核</p> <p>准备一个内核为2.6及以上版本的操作系统，因为linux2.6及以上内核才支持epoll,而Nginx需要解决高并发压力问题是需要用到epoll，所以我们需要有这样的版本要求。</p> <p>我们可以使用<code>uname -a</code>命令来查询linux的内核版本。</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152141806.png" alt="1581416022481"></p> <p>(2)确保centos能联网</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> www.baidu.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152111951.png" alt="1585224061192"></p> <p>(3)确认关闭防火墙</p> <p>这一项的要求仅针对于那些对linux系统的防火墙设置规则不太清楚的，建议大家把防火墙都关闭掉，因为我们此次课程主要的内容是对Nginx的学习，把防火墙关闭掉，可以省掉后续Nginx学习过程中遇到的诸多问题。</p> <p>关闭的方式有如下两种：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl stop firewalld      <span class="token comment"># 关闭运行的防火墙，系统重新启动后，防火墙将重新打开</span>
systemctl disable firewalld  <span class="token comment"># 永久关闭防火墙，，系统重新启动后，防火墙依然关闭</span>
systemctl status firewalld	 <span class="token comment"># 查看防火墙状态</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（4）确认停用selinux</p> <p>selinux(security-enhanced linux),美国安全局对于强制访问控制的实现，在linux2.6内核以后的版本中，selinux已经成功内核中的一部分。可以说selinux是linux史上最杰出的新安全子系统之一。虽然有了selinux，我们的系统会更安全，但是对于我们的学习Nginx的历程中，会多很多设置，所以这块建议大家将selinux进行关闭。</p> <p>sestatus查看状态</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112453.png" alt="1581419845687"></p> <p>如果查看不是disabled状态，我们可以通过修改配置文件来进行设置,修改SELINUX=disabled，然后重启下系统即可生效。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">vim</span> /etc/selinux/config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112945.png" alt="1581419902873"></p> <h3 id="_4-nginx安装方式介绍"><a href="#_4-nginx安装方式介绍" class="header-anchor">#</a> 4. Nginx安装方式介绍</h3> <p>如果通过Nginx源码安装需要提前准备的内容：</p> <p><strong>GCC编译器</strong></p> <p>Nginx是使用C语言编写的程序，因此想要运行Nginx就需要安装一个编译工具。GCC就是一个开源的编译器集合，用于处理各种各样的语言，其中就包含了C语言。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 使用命令`yum install -y gcc`来安装</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc

<span class="token comment"># 安装成功后，可以通过`gcc --version`来查看gcc是否安装成功</span>
gcc <span class="token parameter variable">--version</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>PCRE</strong></p> <p>Nginx在编译过程中需要使用到PCRE库（perl Compatible Regular Expressoin 兼容正则表达式库)，因为在Nginx的Rewrite模块和http核心模块都会使用到PCRE正则表达式语法。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 可以使用命令`yum install -y pcre pcre-devel`来进行安装</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> pcre pcre-devel

<span class="token comment"># 安装成功后，可以通过`rpm -qa pcre pcre-devel`来查看是否安装成功</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> pcre pcre-devel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>zlib</strong></p> <p>zlib库提供了开发人员的压缩算法，在Nginx的各个模块中需要使用gzip压缩，所以我们也需要提前安装其库及源代码zlib和zlib-devel</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 可以使用命令`yum install -y zlib zlib-devel`来进行安装</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> zlib zlib-devel

<span class="token comment"># 安装成功后，可以通过`rpm -qa zlib zlib-devel`来查看是否安装成功</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> zlib zlib-devel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>OpenSSL</strong></p> <p>OpenSSL是一个开放源代码的软件库包，应用程序可以使用这个包进行安全通信，并且避免被窃听。</p> <p>SSL:Secure Sockets Layer安全套接协议的缩写，可以在Internet上提供秘密性传输，其目标是保证两个应用间通信的保密性和可靠性。在Nginx中，如果服务器需要提供安全网页时就需要用到OpenSSL库，所以我们需要对OpenSSL的库文件及它的开发安装包进行一个安装。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 可以使用命令`yum install -y openssl openssl-devel`来进行安装</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> openssl openssl-devel

<span class="token comment"># 安装成功后，可以通过`rpm -qa openssl openssl-devel`来查看是否安装成功</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> openssl openssl-devel

<span class="token comment"># 上述命令，一个个来的话比较麻烦，我们也可以通过一条命令来进行安装</span>
<span class="token variable"><span class="token variable">`</span>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel<span class="token variable">`</span></span>进行全部安装。
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_4-1-nginx的源码简单安装"><a href="#_4-1-nginx的源码简单安装" class="header-anchor">#</a> 4.1 Nginx的源码简单安装</h4> <h5 id="安装nginx"><a href="#安装nginx" class="header-anchor">#</a> 安装nginx</h5> <ul><li>进入官网查找需要下载版本的链接地址，然后使用wget命令进行下载</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">wget</span> http://nginx.org/download/nginx-1.16.1.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>建议大家将下载的资源进行包管理</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> nginx/core
<span class="token function">mv</span> nginx-1.16.1.tar.gz nginx/core
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>解压缩</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-xzf</span> nginx-1.16.1.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>进入资源文件中，发现configure</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>编译</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>安装</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意默认安装目录在:  <code>/usr/local/nginx/</code> 下</p> <p>配置文件：<code>/usr/local/nginx/conf/nginx.conf</code></p></blockquote> <h5 id="启动nginx"><a href="#启动nginx" class="header-anchor">#</a> 启动nginx</h5> <ul><li>启动nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果修改了配置⽂件后想重新加载Nginx,重新加载nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4-2-yum安装"><a href="#_4-2-yum安装" class="header-anchor">#</a> 4.2 yum安装</h4> <blockquote><p><a href="http://nginx.org/en/linux_packages.html#RHEL" target="_blank" rel="noopener noreferrer">官网文档地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>使用源码进行简单安装，我们会发现安装的过程比较繁琐，需要提前准备<code>GCC编译器、PCRE兼容正则表达式库、zlib压缩库、OpenSSL安全通信</code>的软件库包，然后才能进行Nginx的安装。</p> <ul><li>安装yum-utils</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> yum  <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>添加yum源文件</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">vim</span> /etc/yum.repos.d/nginx.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>nginx-stable<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx stable repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>nginx-mainline<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx mainline repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/mainline/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>查看是否安装成功</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yum list <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112967.png" alt="1581416861684"></p> <ul><li>使用yum进行安装</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yun <span class="token function">install</span> <span class="token parameter variable">-y</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看nginx的安装位置</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">whereis</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112230.png" alt="1581416981939"></p> <h5 id="启动nginx-2"><a href="#启动nginx-2" class="header-anchor">#</a> 启动nginx</h5> <ul><li>启动nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/sbin/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/sbin/nginx <span class="token parameter variable">-s</span> stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果修改了配置⽂件后想重新加载Nginx,重新加载nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/sbin/nginx <span class="token parameter variable">-s</span> reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="源码简单安装和yum安装的差异"><a href="#源码简单安装和yum安装的差异" class="header-anchor">#</a> 源码简单安装和yum安装的差异：</h4> <p>这里先介绍一个命令: <code>./nginx -V</code>,通过该命令可以查看到所安装Nginx的版本及相关配置信息。</p> <p>简单安装</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112440.png" alt="1586016586042"></p> <p>yum安装</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112029.png" alt="1586016605581"></p> <h5 id="解压nginx目录"><a href="#解压nginx目录" class="header-anchor">#</a> 解压Nginx目录</h5> <p>执行<code>tar -zxvf nginx-1.16.1.tar.gz</code>对下载的资源进行解压缩，进入压缩后的目录，可以看到如下结构</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112257.png" alt="1581421319232"></p> <p>内容解释：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">auto</span><span class="token punctuation">:</span> <span class="token value attr-value">存放的是编译相关的脚本</span>
<span class="token key attr-name">CHANGES</span><span class="token punctuation">:</span> <span class="token value attr-value">版本变更记录</span>
<span class="token key attr-name">CHANGES.ru</span><span class="token punctuation">:</span> <span class="token value attr-value">俄罗斯文的版本变更记录</span>
<span class="token key attr-name">conf</span><span class="token punctuation">:</span> <span class="token value attr-value">nginx默认的配置文件</span>
<span class="token key attr-name">configure</span><span class="token punctuation">:</span> <span class="token value attr-value">nginx软件的自动脚本程序,是一个比较重要的文件，作用如下：</span>
	（1）检测环境及根据环境检测结果生成C代码
	（2）生成编译代码需要的Makefile文件
<span class="token key attr-name">contrib</span><span class="token punctuation">:</span> <span class="token value attr-value">存放的是几个特殊的脚本文件，其中README中对脚本有着详细的说明</span>
<span class="token key attr-name">html</span><span class="token punctuation">:</span> <span class="token value attr-value">存放的是Nginx自带的两个html页面，访问Nginx的首页和错误页面</span>
<span class="token key attr-name">LICENSE</span><span class="token punctuation">:</span> <span class="token value attr-value">许可证的相关描述文件</span>
<span class="token key attr-name">man</span><span class="token punctuation">:</span> <span class="token value attr-value">nginx的man手册</span>
<span class="token key attr-name">README</span><span class="token punctuation">:</span> <span class="token value attr-value">Nginx的阅读指南</span>
<span class="token key attr-name">src</span><span class="token punctuation">:</span> <span class="token value attr-value">Nginx的源代码</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_4-3-nginx的源码复杂安装"><a href="#_4-3-nginx的源码复杂安装" class="header-anchor">#</a> 4.3 Nginx的源码复杂安装 😄</h4> <p>这种方式和简单的安装配置不同的地方在第一步，通过<code>./configure</code>来对编译参数进行设置，需要我们手动来指定。那么都有哪些参数可以进行设置，接下来我们进行一个详细的说明。</p> <p><code>PATH</code>:是和路径相关的配置信息</p> <p><code>with</code>:是启动模块，默认是关闭的</p> <p><code>without</code>:是关闭模块，默认是开启的</p> <p>我们先来认识一些简单的路径配置已经通过这些配置来完成一个简单的编译：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">--prefix</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向Nginx的安装目录，默认值为/usr/local/nginx</span>
<span class="token key attr-name">--sbin-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向(执行)程序文件(nginx)的路径,默认值为&lt;prefix&gt;/sbin/nginx</span>
<span class="token key attr-name">--modules-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向Nginx动态模块安装目录，默认值为&lt;prefix&gt;/modules</span>
<span class="token key attr-name">--conf-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向配置文件(nginx.conf)的路径,默认值为&lt;prefix&gt;/conf/nginx.conf</span>
<span class="token key attr-name">--error-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向错误日志文件的路径,默认值为&lt;prefix&gt;/logs/error.log</span>
<span class="token key attr-name">--http-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向访问日志文件的路径,默认值为&lt;prefix&gt;/logs/access.log</span>
<span class="token key attr-name">--pid-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向Nginx启动后进行ID的文件路径，默认值为&lt;prefix&gt;/logs/nginx.pid</span>
<span class="token key attr-name">--lock-path</span><span class="token punctuation">=</span><span class="token value attr-value">PATH: 指向Nginx锁文件的存放路径,默认值为&lt;prefix&gt;/logs/nginx.lock</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>要想使用可以通过如下命令</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/nginx <span class="token punctuation">\</span>
--sbin-path<span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token punctuation">\</span>
--modules-path<span class="token operator">=</span>/usr/local/nginx/modules <span class="token punctuation">\</span>
--conf-path<span class="token operator">=</span>/usr/local/nginx/conf/nginx.conf <span class="token punctuation">\</span>
--error-log-path<span class="token operator">=</span>/usr/local/nginx/logs/error.log <span class="token punctuation">\</span>
--http-log-path<span class="token operator">=</span>/usr/local/nginx/logs/access.log <span class="token punctuation">\</span>
--pid-path<span class="token operator">=</span>/usr/local/nginx/logs/nginx.pid <span class="token punctuation">\</span>
--lock-path<span class="token operator">=</span>/usr/local/nginx/logs/nginx.lock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="卸载之前版本"><a href="#卸载之前版本" class="header-anchor">#</a> 卸载之前版本</h5> <p>在使用上述命令之前，需要将之前服务器已经安装的nginx进行卸载（之前有安装过），卸载的步骤分为三步骤：</p> <p>步骤一：需要将nginx的进程关闭</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>步骤二:将安装的nginx进行删除</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>步骤三:将安装包之前编译的环境清除掉</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span> clean
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="安装新版本"><a href="#安装新版本" class="header-anchor">#</a> 安装新版本</h5> <ol><li>进入官网查找需要下载版本的链接地址，然后使用<code>wget</code>命令进行下载</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">wget</span> http://nginx.org/download/nginx-1.16.1.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>建议大家将下载的资源进行包管理</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> nginx/core
<span class="token function">mv</span> nginx-1.16.1.tar.gz nginx/core
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>解压缩</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-xzf</span> nginx-1.16.1.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(4)进入资源文件中，发现configure</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/nginx <span class="token punctuation">\</span>
--sbin-path<span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token punctuation">\</span>
--modules-path<span class="token operator">=</span>/usr/local/nginx/modules <span class="token punctuation">\</span>
--conf-path<span class="token operator">=</span>/usr/local/nginx/conf/nginx.conf <span class="token punctuation">\</span>
--error-log-path<span class="token operator">=</span>/usr/local/nginx/logs/error.log <span class="token punctuation">\</span>
--http-log-path<span class="token operator">=</span>/usr/local/nginx/logs/access.log <span class="token punctuation">\</span>
--pid-path<span class="token operator">=</span>/usr/local/nginx/logs/nginx.pid <span class="token punctuation">\</span>
--lock-path<span class="token operator">=</span>/usr/local/nginx/logs/nginx.lock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303181734596.png" alt="image-20230318173421545"></p> <blockquote><p><a href="https://www.cnblogs.com/tudou1179006580/p/14875457.html" target="_blank" rel="noopener noreferrer">安装nginx出错the HTTP rewrite module requires the PCRE library - 卡洛小豆 - 博客园 (cnblogs.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol start="4"><li>编译</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>安装</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>4和5可以合为 <code>make &amp; make install</code></p></blockquote> <h5 id="离线安装"><a href="#离线安装" class="header-anchor">#</a> 离线安装 🚗</h5> <ol><li>离线安装</li></ol> <p><a href="https://blog.csdn.net/sinat_36521092/article/details/124731532" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sinat_36521092/article/details/124731532<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="2"><li>Centos系统中如何在指定位置下安装Nginx</li></ol> <p><a href="https://www.jb51.net/article/190645.htm" target="_blank" rel="noopener noreferrer">https://www.jb51.net/article/190645.htm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure <span class="token punctuation">\</span>
<span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/nginx/ <span class="token punctuation">\</span>
--sbin-path<span class="token operator">=</span>/opt/nginx/nginx <span class="token punctuation">\</span>
--conf-path<span class="token operator">=</span>/opt/nginx/nginx.conf <span class="token punctuation">\</span>
--pid-path<span class="token operator">=</span>/opt/nginx/nginx.pid <span class="token punctuation">\</span>
--with-http_ssl_module <span class="token punctuation">\</span>
--with-pcre<span class="token operator">=</span>/opt/nginx/pcre-8.44 <span class="token punctuation">\</span>
--with-zlib<span class="token operator">=</span>/opt/nginx/zlib-1.2.11 <span class="token punctuation">\</span>
--with-openssl<span class="token operator">=</span>/opt/nginx/openssl-1.0.2h <span class="token punctuation">\</span>

<span class="token comment"># 编译命令行</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> 
<span class="token builtin class-name">test</span> <span class="token parameter variable">-d</span> <span class="token comment"># 重要!!!如果不执行则不会创建真正的 nginx 文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="启动nginx-3"><a href="#启动nginx-3" class="header-anchor">#</a> 启动nginx</h5> <ul><li>启动nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果修改了配置⽂件后想重新加载Nginx,重新加载nginx</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="将nginx配置为服务"><a href="#将nginx配置为服务" class="header-anchor">#</a> 将Nginx配置为服务 🚗</h5> <p>配置信息</p> <p>systemctl启动服务编写
Centos7的服务systemctl脚本存放在：<code>/usr/lib/systemd/</code>目录下，有系统（system）和用户（user）之分，一般需要开机不登录就能运行的程序，就存放在<code>c</code>目录下</p> <p>每一个服务以.service结尾，一般会分为3部分：[Unit]、[Service]和[Install]，以sshd为实例如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>OpenSSH server daemon
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>man:sshd<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> man:sshd_config<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target sshd-keygen.service
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>sshd-keygen.service

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>/etc/sysconfig/sshd
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/sshd <span class="token parameter variable">-D</span> <span class="token variable">$OPTIONS</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-HUP</span> <span class="token variable">$MAINPID</span>
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>process
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-failure
<span class="token assign-left variable">RestartSec</span><span class="token operator">=</span>42s

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Nginx配置如下</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/20220702175006.png" alt=""></p> <p>操作命令</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl start ssh.service <span class="token comment"># 启动sshd服务：</span>
systemctl stop ssh.service <span class="token comment"># 停止sshd服务</span>
systemctl status ssh.service <span class="token comment"># 查看sshd服务状态</span>
systemctl restart ssh.service <span class="token comment"># 重启sshd服务</span>
systemctl <span class="token builtin class-name">enable</span> ssh.service <span class="token comment"># 设置开机自启动ngi</span>
systemctl disable ssh.service <span class="token comment"># 禁止开机自启动</span>
systemctl list-units <span class="token parameter variable">--type</span><span class="token operator">=</span>service <span class="token comment"># 查看所有已经启动的服务</span>
systemctl daemon-reload <span class="token comment"># 修改完配置文件后，重新加载配置文件,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>参考：</p> <p><a href="https://blog.csdn.net/sinron_wu/article/details/105216132" target="_blank" rel="noopener noreferrer">三种开机自启方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://blog.csdn.net/weixin_45876097/article/details/120378316" target="_blank" rel="noopener noreferrer">Linux启动配置文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://longgege.blog.csdn.net/article/details/109781230" target="_blank" rel="noopener noreferrer">systemctl设置开机自启<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h5 id="修改完配置文件进行验证"><a href="#修改完配置文件进行验证" class="header-anchor">#</a> 修改完配置文件进行验证 🚗</h5> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 全局路径</span>
/usr/local/nginx/sbin/nginx <span class="token parameter variable">-t</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或者进入目录</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303181811077.png" alt="image-20230318181154033"></p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303181817435.png" alt="image-20230318181705404"></p> <h4 id="_4-rpm安装包安装nginx"><a href="#_4-rpm安装包安装nginx" class="header-anchor">#</a> 4. <a href="https://so.csdn.net/so/search?q=rpm%E5%AE%89%E8%A3%85&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">rpm安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>包安装nginx</h4> <h5 id="rpm安装nginx包"><a href="#rpm安装nginx包" class="header-anchor">#</a> rpm安装nginx包</h5> <ol><li>官网下载<a href="https://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.20.2-1.el7.ngx.x86_64.rpm" target="_blank" rel="noopener noreferrer">安装包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">wget</span> https://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.20.2-1.el7.ngx.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>安装nginx包</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> nginx-1.20.2-1.el7.ngx.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li><p>配置权限</p> <p>使用root账号创建nginx用户和组</p></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">groupadd</span> nginx
<span class="token function">useradd</span> nginx <span class="token parameter variable">-g</span> nginx <span class="token parameter variable">-s</span> /sbin/nologin <span class="token parameter variable">-M</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​	授权列表清单给nginx</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/log/logrotate.d/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/conf.d
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/config.d/default.conf
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/fastcgi_params
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/mime.types
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/modules
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/nginx.conf
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/scgi_params
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /etc/nginx/uwsgi_params
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/lib/systemd/system/nginx-debug.service
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/lib/systemd/system/nginx.service
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/lib64/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/lib64/nginx/modules
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/libexec/initscripts/legacy-actions/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/libexec/initscripts/legacy-actions/nginx/check-reload
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/libexec/initscripts/legacy-actions/nginx/upgrade
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/sbin/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/sbin/nginx-debug
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/doc/nginx-1.20.1
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/doc/nginx-1.20.1/COPYRIGHT
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/man/man8/nginx.8.gz
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/nginx/html
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/nginx/html/50x.html
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /usr/share/nginx/html/index.html
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /var/cache/nginx
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx /var/log/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ol start="4"><li>启动nginx</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl start nginix
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>验证</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">curl</span> IP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="卸载"><a href="#卸载" class="header-anchor">#</a> 卸载</h5> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 查看nginx安装文件</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> nginx
nginx-1.20.2-1.el7.ngx.x86_64 <span class="token comment"># 已安装的nginx</span>

<span class="token comment"># 卸载nginx安装文件</span>
 <span class="token function">rpm</span> <span class="token parameter variable">-e</span> nginx-1.20.2-1.el7.ngx.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-nginx目录结构分析"><a href="#_5-nginx目录结构分析" class="header-anchor">#</a> 5. Nginx目录结构分析</h3> <p>在使用Nginx之前，我们先对安装好的Nginx目录文件进行一个分析，在这块给大家介绍一个工具tree，通过tree我们可以很方面的去查看centos系统上的文件目录结构，当然，如果想使用tree工具，</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 就得先通过`yum install -y tree`来进行安装，安装成功后，</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> tree

<span class="token comment"># 可以通过执行`tree /usr/local/nginx`(tree后面跟的是Nginx的安装目录)，</span>
tree /usr/local/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>获取的结果如下：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112882.png" alt="1581439634265"></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">conf</span><span class="token punctuation">:</span><span class="token value attr-value">nginx所有配置文件目录</span>
<span class="token key attr-name">    CGI(Common</span> <span class="token value attr-value">Gateway Interface)通用网关【接口】，主要解决的问题是从客户端发送一个请求和数据，服务端获取到请求和数据后可以调用调用CGI【程序】处理及相应结果给客户端的一种标准规范。</span>
<span class="token key attr-name">	fastcgi.conf</span><span class="token punctuation">:</span> <span class="token value attr-value">fastcgi相关配置文件</span>
<span class="token key attr-name">	fastcgi.conf.default</span><span class="token punctuation">:</span> <span class="token value attr-value">fastcgi.conf的备份文件</span>
<span class="token key attr-name">	fastcgi_params</span><span class="token punctuation">:</span> <span class="token value attr-value">fastcgi的参数文件</span>
<span class="token key attr-name">	fastcgi_params.default</span><span class="token punctuation">:</span> <span class="token value attr-value">fastcgi的参数备份文件</span>
<span class="token key attr-name">	scgi_params</span><span class="token punctuation">:</span> <span class="token value attr-value">scgi的参数文件</span>
<span class="token key attr-name">	scgi_params.default</span><span class="token punctuation">:</span> <span class="token value attr-value">scgi的参数备份文件</span>
<span class="token key attr-name">    uwsgi_params</span><span class="token punctuation">:</span> <span class="token value attr-value">uwsgi的参数文件</span>
<span class="token key attr-name">	uwsgi_params.default</span><span class="token punctuation">:</span> <span class="token value attr-value">uwsgi的参数备份文件</span>
<span class="token key attr-name">	mime.types</span><span class="token punctuation">:</span> <span class="token value attr-value">记录的是HTTP协议中的Content-Type的值和文件后缀名的对应关系</span>
<span class="token key attr-name">	mime.types.default</span><span class="token punctuation">:</span> <span class="token value attr-value">mime.types的备份文件</span>
<span class="token key attr-name">	nginx.conf</span><span class="token punctuation">:</span> <span class="token value attr-value">这个是Nginx的核心配置文件，这个文件非常重要，也是我们即将要学习的重点</span>
<span class="token key attr-name">	nginx.conf.default</span><span class="token punctuation">:</span> <span class="token value attr-value">nginx.conf的备份文件</span>
<span class="token key attr-name">	koi-utf、koi-win、win-utf</span><span class="token punctuation">:</span> <span class="token value attr-value">这三个文件都是与编码转换映射相关的配置文件，用来将一种编码转换成另一种编码</span>
<span class="token key attr-name">html</span><span class="token punctuation">:</span> <span class="token value attr-value">存放nginx自带的两个静态的html页面</span>
<span class="token key attr-name">	50x.html</span><span class="token punctuation">:</span> <span class="token value attr-value">访问失败后的失败页面</span>
<span class="token key attr-name">	index.html</span><span class="token punctuation">:</span> <span class="token value attr-value">成功访问的默认首页</span>
<span class="token key attr-name">logs</span><span class="token punctuation">:</span> <span class="token value attr-value">记录入门的文件，当nginx服务器启动后，这里面会有 access.log error.log 和nginx.pid三个文件出现。</span>
<span class="token key attr-name">sbin</span><span class="token punctuation">:</span> <span class="token value attr-value">是存放执行程序文件nginx</span>
<span class="token key attr-name">	nginx</span><span class="token punctuation">:</span><span class="token value attr-value">是用来控制Nginx的启动和停止等相关的命令。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_6-nginx服务器启停命令"><a href="#_6-nginx服务器启停命令" class="header-anchor">#</a> 6. Nginx服务器启停命令</h3> <p>Nginx安装完成后，接下来我们要学习的是如何启动、重启和停止Nginx的服务。</p> <p>对于Nginx的启停在linux系统中也有很多种方式，我们本次课程介绍两种方式：</p> <ul><li><p>Nginx服务的信号控制</p></li> <li><p>Nginx的命令行控制</p></li></ul> <h4 id="nginx服务的信号控制"><a href="#nginx服务的信号控制" class="header-anchor">#</a> Nginx服务的信号控制</h4> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>Nginx中的master和worker进程?
Nginx的工作方式?
如何获取进程的PID?
信号有哪些?
如何通过信号控制Nginx的启停等相关操作?
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>前面在提到Nginx的高性能，其实也和它的架构模式有关。Nginx默认采用的是多进程的方式来工作的，当将Nginx启动后，我们通过<code>ps -ef | grep nginx</code>命令可以查看到如下内容：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112666.png" alt="1581444289294"></p> <p>从上图中可以看到,Nginx后台进程中包含<code>一个master进程和多个worker进程</code>，master进程主要用来管理worker进程，包含接收外界的信息，并将接收到的信号发送给各个worker进程，监控worker进程的状态，当worker进程出现异常退出后，会自动重新启动新的worker进程。而worker进程则是专门用来处理用户请求的，各个worker进程之间是平等的并且相互独立，处理请求的机会也是一样的。nginx的进程模型，我们可以通过下图来说明下：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152112700.png" alt="1581444603231"></p> <p>我们现在作为管理员，只需要通过给master进程发送信号就可以来控制Nginx,这个时候我们需要有两个前提条件，一个是要操作的master进程，一个是信号。</p> <p>（1）要想操作Nginx的master进程，就需要获取到master进程的进程号ID。获取方式简单介绍两个，</p> <p>方式一：通过<code>ps -ef | grep nginx</code>；</p> <p>方式二：在讲解nginx的<code>./configure</code>的配置参数的时候，有一个参数是<code>--pid-path=PATH</code>默认是<code>/usr/local/nginx/logs/nginx.pid</code>,所以可以通过查看该文件来获取nginx的master进程ID.</p> <p>（2）信号</p> <table><thead><tr><th>信号</th> <th>作用</th></tr></thead> <tbody><tr><td>TERM/INT</td> <td>立即关闭整个服务</td></tr> <tr><td>QUIT</td> <td>&quot;优雅&quot;地关闭整个服务</td></tr> <tr><td>HUP</td> <td>重读配置文件并使用服务对新配置项生效</td></tr> <tr><td>USR1</td> <td>重新打开日志文件，可以用来进行日志切割</td></tr> <tr><td>USR2</td> <td>平滑升级到最新版的nginx</td></tr> <tr><td>WINCH</td> <td>所有子进程不在接收处理新连接，相当于给work进程发送QUIT指令</td></tr></tbody></table> <p>调用命令为<code>kill -signal PID</code></p> <p>signal:即为信号；PID即为获取到的master线程ID</p> <ol><li>发送TERM/INT信号给master进程，会将Nginx服务立即关闭。</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-TERM</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-TERM</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
<span class="token function">kill</span> <span class="token parameter variable">-INT</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-INT</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>发送QUIT信号给master进程，master进程会控制所有的work进程不再接收新的请求，等所有请求处理完后，在把进程都关闭掉。</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-QUIT</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-TERM</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>发送HUP信号给master进程，master进程会把控制旧的work进程不再接收新的请求，等处理完请求后将旧的work进程关闭掉，然后根据nginx的配置文件重新启动新的work进程</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-HUP</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-TERM</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>发送USR1信号给master进程，告诉Nginx重新开启日志文件</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-USR1</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-TERM</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>发送USR2信号给master进程，告诉master进程要平滑升级，这个时候，会重新开启对应的master进程和work进程，整个系统中将会有两个master进程，并且新的master进程的PID会被记录在<code>/usr/local/nginx/logs/nginx.pid</code>而之前的旧的master进程PID会被记录在<code>/usr/local/nginx/logs/nginx.pid.oldbin</code>文件中，接着再次发送QUIT信号给旧的master进程，让其处理完请求后再进行关闭</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-USR2</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-USR2</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-QUIT</span> PID / <span class="token function">kill</span> <span class="token parameter variable">-QUIT</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid.oldbin<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152141807.png" alt="1586368250085"></p> <ol start="6"><li>发送WINCH信号给master进程,让master进程控制不让所有的work进程在接收新的请求了，请求处理完后关闭work进程。注意master进程不会被关闭掉</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-WINCH</span> PID /kill -WINCH<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /usr/local/nginx/logs/nginx.pid<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="nginx的命令行控制"><a href="#nginx的命令行控制" class="header-anchor">#</a> Nginx的命令行控制</h4> <p>此方式是通过Nginx安装目录下的sbin下的可执行文件nginx来进行Nginx状态的控制，我们可以通过<code>nginx -h</code>来查看都有哪些参数可以用：</p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152113086.png" alt="1581486604517"></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">-?和-h</span><span class="token punctuation">:</span><span class="token value attr-value">显示帮助信息</span>
<span class="token key attr-name">-v</span><span class="token punctuation">:</span><span class="token value attr-value">打印版本号信息并退出</span>
<span class="token key attr-name">-V</span><span class="token punctuation">:</span><span class="token value attr-value">打印版本号信息和配置信息并退出</span>
<span class="token key attr-name">-t</span><span class="token punctuation">:</span><span class="token value attr-value">测试nginx的配置文件语法是否正确并退出</span>
<span class="token key attr-name">-T</span><span class="token punctuation">:</span><span class="token value attr-value">测试nginx的配置文件语法是否正确并列出用到的配置文件信息然后退出</span>
<span class="token key attr-name">-q</span><span class="token punctuation">:</span><span class="token value attr-value">在配置测试期间禁止显示非错误消息</span>
<span class="token key attr-name">-s</span><span class="token punctuation">:</span><span class="token value attr-value">signal信号，后面可以跟 ：</span>
	 stop[快速关闭，类似于TERM/INT信号的作用]
<span class="token key attr-name">	quit[优雅的关闭，类似于QUIT信号的作用]</span> 
<span class="token key attr-name">	reopen[重新打开日志文件类似于USR1信号的作用]</span> 
	reload[类似于HUP信号的作用]
<span class="token key attr-name">-p</span><span class="token punctuation">:</span><span class="token value attr-value">prefix，指定Nginx的prefix路径，(默认为: /usr/local/nginx/)</span>
<span class="token key attr-name">-c</span><span class="token punctuation">:</span><span class="token value attr-value">filename,指定Nginx的配置文件路径,(默认为: conf/nginx.conf)</span>
<span class="token key attr-name">-g</span><span class="token punctuation">:</span><span class="token value attr-value">用来补充Nginx配置文件，向Nginx服务指定启动时应用全局的配置</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_7-nginx服务器版本升级和新增模块"><a href="#_7-nginx服务器版本升级和新增模块" class="header-anchor">#</a> 7. Nginx服务器版本升级和新增模块</h3> <p>如果想对Nginx的版本进行更新，或者要应用一些新的模块，最简单的做法就是停止当前的Nginx服务，然后开启新的Nginx服务。但是这样会导致在一段时间内，用户是无法访问服务器。为了解决这个问题，我们就需要用到Nginx服务器提供的平滑升级功能。这个也是Nginx的一大特点，使用这种方式，就可以使Nginx在7*24小时不间断的提供服务了。接下来我们分析下需求：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>需求：Nginx的版本最开始使用的是Nginx-1.14.2,由于服务升级，需要将Nginx的版本升级到Nginx-1.16.1,要求Nginx不能中断提供服务。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>为了应对上述的需求，这里我们给大家提供两种解决方案:</p> <p>方案一:使用Nginx服务信号完成Nginx的升级</p> <p>方案二:使用Nginx安装目录的make命令完成升级</p> <h4 id="环境准备"><a href="#环境准备" class="header-anchor">#</a> 环境准备</h4> <p>（1）先准备两个版本的Nginx分别是 1.14.2和1.16.1</p> <p>（2）使用Nginx源码安装的方式将1.14.2版本安装成功并正确访问</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>进入安装目录
./configure
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（3）将Nginx1.16.1进行参数配置和编译，不需要进行安装。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>进入安装目录
./configure
<span class="token function">make</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="方案一-使用nginx服务信号进行升级"><a href="#方案一-使用nginx服务信号进行升级" class="header-anchor">#</a> 方案一:使用Nginx服务信号进行升级</h4> <p>第一步:将1.14.2版本的sbin目录下的nginx进行备份</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /usr/local/nginx/sbin
<span class="token function">mv</span> nginx nginxold
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二步:将Nginx1.16.1安装目录编译后的objs目录下的nginx文件，拷贝到原来<code>/usr/local/nginx/sbin</code>目录下</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> ~/nginx/core/nginx-1.16.1/objs
<span class="token function">cp</span> nginx /usr/local/nginx/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第三步:发送信号USR2给Nginx的1.14.2版本对应的master进程</p> <p>第四步:发送信号QUIT给Nginx的1.14.2版本对应的master进程</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">kill</span> <span class="token parameter variable">-QUIT</span> <span class="token variable"><span class="token variable">`</span><span class="token function">more</span> /usr/local/logs/nginx.pid.oldbin<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="方案二-使用nginx安装目录的make命令完成升级"><a href="#方案二-使用nginx安装目录的make命令完成升级" class="header-anchor">#</a> 方案二:使用Nginx安装目录的make命令完成升级</h4> <p>第一步:将1.14.2版本的sbin目录下的nginx进行备份</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /usr/local/nginx/sbin
<span class="token function">mv</span> nginx nginxold
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二步:将Nginx1.16.1安装目录编译后的objs目录下的nginx文件，拷贝到原来<code>/usr/local/nginx/sbin</code>目录下</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> ~/nginx/core/nginx-1.16.1/objs
<span class="token function">cp</span> nginx /usr/local/nginx/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第三步:进入到安装目录，执行<code>make upgrade</code></p> <p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303152113961.png" alt="1581494652284"></p> <p>第四步:查看是否更新成功</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./nginx <span class="token parameter variable">-v</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在整个过程中，其实Nginx是一直对外提供服务的。并且当Nginx的服务器启动成功后，我们是可以通过浏览器进行直接访问的，同时我们可以通过更改html目录下的页面来修改我们在页面上所看到的内容，那么问题来了，为什么我们要修改html目录下的文件，能不能多添加一些页面是Nginx的功能更加丰富，还有前面聊到Nginx的前端功能又是如何来实现的，这就需要我们对Nginx的核心配置文件进行一个详细的学习。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/04/12, 16:35:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Nginx-简介</div></a> <a href="/chggx-knowlodge-vuepress/pages/3a3f45/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Nginx-核心配置文件结构</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/chggx-knowlodge-vuepress/pages/9e3fdb/" class="prev">Nginx-简介</a></span> <span class="next"><a href="/chggx-knowlodge-vuepress/pages/3a3f45/">Nginx-核心配置文件结构</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:1348088236@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/afreebird" title="Gitee" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>晨光向 <br/> <a title="工信部备案号" target="_blank" href="http://beian.miit.gov.cn/">豫ICP备2023005584号</a> | <a  title="公安备案号" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41048202000165"> <img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303301208019.png" width="15px" height="15px"/>  豫公网安备 41048202000165号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><!----><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://ts.cnlxc.cn/upFiles/music/别知己-海来阿木.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/music/1878406903.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/music/1878406903.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>别知己</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>海来阿木</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/chggx-knowlodge-vuepress/assets/js/app.c2a3e6d7.js" defer></script><script src="/chggx-knowlodge-vuepress/assets/js/2.7f8741fb.js" defer></script><script src="/chggx-knowlodge-vuepress/assets/js/147.06b02b43.js" defer></script><script src="/chggx-knowlodge-vuepress/assets/js/3.7b4d6574.js" defer></script>
  </body>
</html>
