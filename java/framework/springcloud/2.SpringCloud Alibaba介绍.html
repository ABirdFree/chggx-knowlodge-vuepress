<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/logo/logo-0.2.5.1.png" type="image/png" sizes="16x16"><meta name="referrer" content="no-referrer"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=2"><title>SpringCloud Alibaba å®˜ç½‘ | chggx Konwledge</title><meta name="description" content="æ™¨å…‰å‘çš„çŸ¥è¯†åº“">
    <link rel="modulepreload" href="/chggx-knowlodge-vuepress/assets/app.099ebd34.js"><link rel="modulepreload" href="/chggx-knowlodge-vuepress/assets/2.SpringCloud Alibabaä»‹ç».html.954edee6.js"><link rel="modulepreload" href="/chggx-knowlodge-vuepress/assets/2.SpringCloud Alibabaä»‹ç».html.4df72d19.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.7965f4da.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.2f2f1f94.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.ae2ce70a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.ac2b8553.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.e14c572b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.f78e20f6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.aa654337.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨.html.79d75c4c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨.html.0f3fe687.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨.html.4e5590bc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.Rediså…¥é—¨.html.72bd8315.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Redisæ•°æ®ç±»å‹.html.1dca25a7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Redisäº‹åŠ¡.html.d6541a87.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.Rediså®ç°ä¹è§‚é”.html.0fccfc6b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.Redis-Jedis.html.e0339753.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.SpringBootæ•´åˆ.html.4f6d0361.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£.html.3f71e5f7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/Redisé¢è¯•å¿…å¤‡.html.565f37a4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringBootåŸºç¡€.html.addd68ab.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.SpringBootæ•´åˆRabbitMQ.html.2130697f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringCloud.HåŸºç¡€.html.579c7733.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/0.Javaè®¾è®¡æ¨¡å¼-å†…å®¹ä»‹ç».html.4c64431b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.Javaè®¾è®¡æ¨¡å¼-è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™.html.f7724ac0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Javaè®¾è®¡æ¨¡å¼-UMLç±»å›¾.html.dd535d53.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Javaè®¾è®¡æ¨¡å¼-è®¾è®¡æ¨¡å¼æ¦‚è¿°.html.578ab5c8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼.html.8e694f61.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.Javaè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼.html.f2d2a3e8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.Javaè®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼.html.96389af1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.Javaè®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼.html.6c1164f4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/0.åå°„_æ³¨è§£.html.915ba1a7.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringåŸºç¡€.html.09d5c115.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.JVM-JVMä¸Javaä½“ç³»ç»“æ„.html.20b97bab.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/10.JVM-å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html.e0452d45.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/12.JVM-æ‰§è¡Œå¼•æ“.html.09a5fcdb.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/13.JVM-StringTable.html.9c6fa66b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/14.JVM-åƒåœ¾å›æ”¶æ¦‚è¿°.html.f24da324.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/15.JVM-åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html.6c1eee28.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/16.JVM-åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html.555ad5c8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.JVM-ç±»åŠ è½½å­ç³»ç»Ÿ.html.d23d9307.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°åŠçº¿ç¨‹.html.73115a90.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.JVM-ç¨‹åºè®¡æ•°å™¨(PCå¯„å­˜å™¨).html.eaa43a7a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.JVM-è™šæ‹Ÿæœºæ ˆ.html.4a5da7d1.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.JVM-æœ¬åœ°æ–¹æ³•æ¥å£.html.6202cb8b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.JVM-æœ¬åœ°æ–¹æ³•æ ˆ.html.fbe12cb8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/8.JVM-å †.html.2a6f83f4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/9.JVM-æ–¹æ³•åŒº.html.6b2c2b0c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Java8æ–°ç‰¹æ€§-Streamæµ.html.eec6de9c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Java8æ–°ç‰¹æ€§-æ—¥æœŸ.html.b8efb717.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SVNåŸºç¡€.html.68038d62.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Gitå¸¸ç”¨å‘½ä»¤.html.44d60505.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.18b0ea6d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.ee108be9.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.0bf44c21.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.fdfeec7c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.f615de6f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.656af16d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/index.html.e6fe2efc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨.html.2aa4ca42.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨.html.2064eebc.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨.html.98f907c0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.Rediså…¥é—¨.html.a0317cb6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Redisæ•°æ®ç±»å‹.html.f9096454.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Redisäº‹åŠ¡.html.a99f54a2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.Rediså®ç°ä¹è§‚é”.html.fbfdb9f3.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.Redis-Jedis.html.75dfaa97.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.SpringBootæ•´åˆ.html.b6c0ae73.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£.html.ed363f3e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/Redisé¢è¯•å¿…å¤‡.html.cffad8a6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringBootåŸºç¡€.html.e574f8aa.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.SpringBootæ•´åˆRabbitMQ.html.3234b0ce.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringCloud.HåŸºç¡€.html.16addf58.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/0.Javaè®¾è®¡æ¨¡å¼-å†…å®¹ä»‹ç».html.d767132a.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.Javaè®¾è®¡æ¨¡å¼-è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™.html.b750374f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Javaè®¾è®¡æ¨¡å¼-UMLç±»å›¾.html.62fef168.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Javaè®¾è®¡æ¨¡å¼-è®¾è®¡æ¨¡å¼æ¦‚è¿°.html.80544a2f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼.html.1b36b209.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.Javaè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼.html.d9a560e8.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.Javaè®¾è®¡æ¨¡å¼-åŸå‹æ¨¡å¼.html.c16662fa.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.Javaè®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼.html.4ffa1cf2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/0.åå°„_æ³¨è§£.html.8c8a5821.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SpringåŸºç¡€.html.8e907486.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.JVM-JVMä¸Javaä½“ç³»ç»“æ„.html.def8831c.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/10.JVM-å¯¹è±¡çš„å®ä¾‹åŒ–å†…å­˜å¸ƒå±€ä¸è®¿é—®å®šä½.html.c1bc7c3f.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/12.JVM-æ‰§è¡Œå¼•æ“.html.a86974db.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/13.JVM-StringTable.html.592c3824.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/14.JVM-åƒåœ¾å›æ”¶æ¦‚è¿°.html.c3c69a48.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/15.JVM-åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•.html.8a87682e.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/16.JVM-åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ.html.97355adf.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.JVM-ç±»åŠ è½½å­ç³»ç»Ÿ.html.c51da7a2.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°åŠçº¿ç¨‹.html.e550b9a4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/4.JVM-ç¨‹åºè®¡æ•°å™¨(PCå¯„å­˜å™¨).html.5f49930d.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/5.JVM-è™šæ‹Ÿæœºæ ˆ.html.fe4052e4.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/6.JVM-æœ¬åœ°æ–¹æ³•æ¥å£.html.2ca30aed.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/7.JVM-æœ¬åœ°æ–¹æ³•æ ˆ.html.ff1e6b43.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/8.JVM-å †.html.c6130241.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/9.JVM-æ–¹æ³•åŒº.html.60bc82f0.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Java8æ–°ç‰¹æ€§-Streamæµ.html.b14b4cf6.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/3.Java8æ–°ç‰¹æ€§-æ—¥æœŸ.html.30ca8164.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/1.SVNåŸºç¡€.html.d1d6cb97.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/2.Gitå¸¸ç”¨å‘½ä»¤.html.1a2dc50b.js"><link rel="prefetch" href="/chggx-knowlodge-vuepress/assets/404.html.3e165de1.js">
    <link rel="stylesheet" href="/chggx-knowlodge-vuepress/assets/style.19ddbf83.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/chggx-knowlodge-vuepress/" class=""><img class="logo" src="/chggx-knowlodge-vuepress/logo/logo-1.5.2.png" alt="chggx Konwledge"><span class="site-name can-hide">chggx Konwledge</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/chggx-knowlodge-vuepress/" class="" aria-label="  é¦–é¡µ  "><!--[--><!--]-->   é¦–é¡µ   <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  JAVA  "><span class="title">  JAVA  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  JAVA  "><span class="title">  JAVA  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/java-base/" class="" aria-label="JavaåŸºç¡€"><!--[--><!--]--> JavaåŸºç¡€ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/java-advence/" class="" aria-label="Javaè¿›é˜¶"><!--[--><!--]--> Javaè¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/framework/" class="router-link-active" aria-label="æ¡†æ¶"><!--[--><!--]--> æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/until/" class="" aria-label="å·¥å…·"><!--[--><!--]--> å·¥å…· <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  æ•°æ®åº“  "><span class="title">  æ•°æ®åº“  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  æ•°æ®åº“  "><span class="title">  æ•°æ®åº“  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/sql/mysql" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Redis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/1.Redis%E5%85%A5%E9%97%A8.html" class="" aria-label="Rediså…¥é—¨"><!--[--><!--]--> Rediså…¥é—¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/2.Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="" aria-label="Redisæ•°æ®ç±»å‹"><!--[--><!--]--> Redisæ•°æ®ç±»å‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/3.Redis%E4%BA%8B%E5%8A%A1.html" class="" aria-label="Redisäº‹åŠ¡"><!--[--><!--]--> Redisäº‹åŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/4.Redis%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81.html" class="" aria-label="Rediså®ç°ä¹è§‚é”"><!--[--><!--]--> Rediså®ç°ä¹è§‚é” <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/5.Redis-Jedis.html" class="" aria-label="Redis-Jedis"><!--[--><!--]--> Redis-Jedis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/6.SpringBoot%E6%95%B4%E5%90%88.html" class="" aria-label="SpringBootæ•´åˆ"><!--[--><!--]--> SpringBootæ•´åˆ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/7.Redis%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3.html" class="" aria-label="Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£"><!--[--><!--]--> Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/Redis%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87.html" class="" aria-label="Redisé¢è¯•å¿…å¤‡"><!--[--><!--]--> Redisé¢è¯•å¿…å¤‡ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>influxdb</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/influxdb/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93-influxdb1.x%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/influxdb/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93-influxdb2.x%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  æœç´¢å¼•æ“  "><span class="title">  æœç´¢å¼•æ“  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  æœç´¢å¼•æ“  "><span class="title">  æœç´¢å¼•æ“  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>ElasticSearch</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/search/elasticSearch/ElasticSearch7.6.1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  ä¸­é—´ä»¶  "><span class="title">  ä¸­é—´ä»¶  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  ä¸­é—´ä»¶  "><span class="title">  ä¸­é—´ä»¶  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="RabbitMQ"><!--[--><!--]--> RabbitMQ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  éƒ¨ç½²è¿ç»´  "><span class="title">  éƒ¨ç½²è¿ç»´  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  éƒ¨ç½²è¿ç»´  "><span class="title">  éƒ¨ç½²è¿ç»´  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="è™šæ‹Ÿæœº"><!--[--><!--]--> è™šæ‹Ÿæœº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  é—®é¢˜æ±‡æ€»  "><span class="title">  é—®é¢˜æ±‡æ€»  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  é—®é¢˜æ±‡æ€»  "><span class="title">  é—®é¢˜æ±‡æ€»  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="æ•°æ®åº“"><!--[--><!--]--> æ•°æ®åº“ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="éƒ¨ç½²"><!--[--><!--]--> éƒ¨ç½² <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  å‰ç«¯  "><span class="title">  å‰ç«¯  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  å‰ç«¯  "><span class="title">  å‰ç«¯  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/vue/" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/chggx-knowlodge-vuepress/" class="" aria-label="  é¦–é¡µ  "><!--[--><!--]-->   é¦–é¡µ   <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  JAVA  "><span class="title">  JAVA  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  JAVA  "><span class="title">  JAVA  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/java-base/" class="" aria-label="JavaåŸºç¡€"><!--[--><!--]--> JavaåŸºç¡€ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/java-advence/" class="" aria-label="Javaè¿›é˜¶"><!--[--><!--]--> Javaè¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/framework/" class="router-link-active" aria-label="æ¡†æ¶"><!--[--><!--]--> æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/java/until/" class="" aria-label="å·¥å…·"><!--[--><!--]--> å·¥å…· <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  æ•°æ®åº“  "><span class="title">  æ•°æ®åº“  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  æ•°æ®åº“  "><span class="title">  æ•°æ®åº“  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/sql/mysql" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Redis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/1.Redis%E5%85%A5%E9%97%A8.html" class="" aria-label="Rediså…¥é—¨"><!--[--><!--]--> Rediså…¥é—¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/2.Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="" aria-label="Redisæ•°æ®ç±»å‹"><!--[--><!--]--> Redisæ•°æ®ç±»å‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/3.Redis%E4%BA%8B%E5%8A%A1.html" class="" aria-label="Redisäº‹åŠ¡"><!--[--><!--]--> Redisäº‹åŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/4.Redis%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81.html" class="" aria-label="Rediså®ç°ä¹è§‚é”"><!--[--><!--]--> Rediså®ç°ä¹è§‚é” <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/5.Redis-Jedis.html" class="" aria-label="Redis-Jedis"><!--[--><!--]--> Redis-Jedis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/6.SpringBoot%E6%95%B4%E5%90%88.html" class="" aria-label="SpringBootæ•´åˆ"><!--[--><!--]--> SpringBootæ•´åˆ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/7.Redis%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3.html" class="" aria-label="Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£"><!--[--><!--]--> Redisçš„é…ç½®æ–‡ä»¶è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/redis/Redis%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87.html" class="" aria-label="Redisé¢è¯•å¿…å¤‡"><!--[--><!--]--> Redisé¢è¯•å¿…å¤‡ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>influxdb</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/influxdb/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93-influxdb1.x%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> æ—¶åºæ•°æ®åº“-influxdb1.x å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/sql/influxdb/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93-influxdb2.x%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> æ—¶åºæ•°æ®åº“-influxdb2.x å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  æœç´¢å¼•æ“  "><span class="title">  æœç´¢å¼•æ“  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  æœç´¢å¼•æ“  "><span class="title">  æœç´¢å¼•æ“  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>ElasticSearch</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/chggx-knowlodge-vuepress/search/elasticSearch/ElasticSearch7.6.1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="" aria-label="ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> ElasticSearch7.6.1å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  ä¸­é—´ä»¶  "><span class="title">  ä¸­é—´ä»¶  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  ä¸­é—´ä»¶  "><span class="title">  ä¸­é—´ä»¶  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="RabbitMQ"><!--[--><!--]--> RabbitMQ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  éƒ¨ç½²è¿ç»´  "><span class="title">  éƒ¨ç½²è¿ç»´  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  éƒ¨ç½²è¿ç»´  "><span class="title">  éƒ¨ç½²è¿ç»´  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="è™šæ‹Ÿæœº"><!--[--><!--]--> è™šæ‹Ÿæœº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  é—®é¢˜æ±‡æ€»  "><span class="title">  é—®é¢˜æ±‡æ€»  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  é—®é¢˜æ±‡æ€»  "><span class="title">  é—®é¢˜æ±‡æ€»  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="æ•°æ®åº“"><!--[--><!--]--> æ•°æ®åº“ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/mq/mysql" class="" aria-label="éƒ¨ç½²"><!--[--><!--]--> éƒ¨ç½² <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="  å‰ç«¯  "><span class="title">  å‰ç«¯  </span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="  å‰ç«¯  "><span class="title">  å‰ç«¯  </span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/vue/" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/chggx-knowlodge-vuepress/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Spring <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/chggx-knowlodge-vuepress/java/framework/spring/0.%E5%8F%8D%E5%B0%84&amp;%E6%B3%A8%E8%A7%A3.html" class="sidebar-item" aria-label="åå°„&amp;æ³¨è§£"><!--[--><!--]--> åå°„&amp;æ³¨è§£ <!--[--><!--]--></a><!----></li><li><a href="/chggx-knowlodge-vuepress/java/framework/spring/1.Spring%E5%9F%BA%E7%A1%80.html" class="sidebar-item" aria-label="SpringåŸºç¡€"><!--[--><!--]--> SpringåŸºç¡€ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">SpringBoot <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/chggx-knowlodge-vuepress/java/framework/springboot/1.SpringBoot%E5%9F%BA%E7%A1%80.html" class="sidebar-item" aria-label="SpringBootåŸºç¡€"><!--[--><!--]--> SpringBootåŸºç¡€ <!--[--><!--]--></a><!----></li><li><a href="/chggx-knowlodge-vuepress/java/framework/springboot/2.SpringBoot%E6%95%B4%E5%90%88RabbitMQ.html" class="sidebar-item" aria-label="SpringBootæ•´åˆRabbitMQ"><!--[--><!--]--> SpringBootæ•´åˆRabbitMQ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">SpringCloud <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/chggx-knowlodge-vuepress/java/framework/springcloud/1.SpringCloud.H%E5%9F%BA%E7%A1%80.html" class="sidebar-item" aria-label="SpringCloud.HåŸºç¡€"><!--[--><!--]--> SpringCloud.HåŸºç¡€ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="SpringCloud Alibaba å®˜ç½‘"><!--[--><!--]--> SpringCloud Alibaba å®˜ç½‘ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_1-springcloud-alibabaå…¥é—¨ç®€ä»‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. SpringCloud Alibabaå…¥é—¨ç®€ä»‹"><!--[--><!--]--> 1. SpringCloud Alibabaå…¥é—¨ç®€ä»‹ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_1-ä¸ºä»€ä¹ˆå‡ºç°springcloud-alibaba" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.  ä¸ºä»€ä¹ˆå‡ºç°SpringCloud Alibaba"><!--[--><!--]--> 1.  ä¸ºä»€ä¹ˆå‡ºç°SpringCloud Alibaba <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_2-alibaba-èƒ½å¹²ä»€ä¹ˆ" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. alibaba  èƒ½å¹²ä»€ä¹ˆ?"><!--[--><!--]--> 2. alibaba  èƒ½å¹²ä»€ä¹ˆ? <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_2-springcloud-alibaba-nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ ğŸ˜„"><!--[--><!--]--> 2. SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ ğŸ˜„ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_1-æ¦‚è¿°" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. æ¦‚è¿°"><!--[--><!--]--> 1. æ¦‚è¿° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_2-nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ-å®˜æ–¹æ–‡æ¡£" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ å®˜æ–¹æ–‡æ¡£"><!--[--><!--]--> 2. NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ å®˜æ–¹æ–‡æ¡£ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_3-nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ-ç­‰åŒ-eureka-config-bus" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ  ==ç­‰åŒ: eureka+config+bus=="><!--[--><!--]--> 3. Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ  ==ç­‰åŒ: eureka+config+bus== <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_4-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–"><!--[--><!--]--> 4. Nacosé›†ç¾¤å’ŒæŒä¹…åŒ– <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_3-springcloud-alibaba-sentinel-å®ç°ç†”æ–­ä¸é™æµ" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. SpringCloud Alibaba Sentinel å®ç°ç†”æ–­ä¸é™æµ ğŸ˜„"><!--[--><!--]--> 3. SpringCloud Alibaba Sentinel å®ç°ç†”æ–­ä¸é™æµ ğŸ˜„ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_1-sentinel-ä»£æ›¿äº†-hystrix" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Sentinel ä»£æ›¿äº† Hystrix"><!--[--><!--]--> 1. Sentinel ä»£æ›¿äº† Hystrix <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_2-æ¡ˆä¾‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. æ¡ˆä¾‹"><!--[--><!--]--> 2. æ¡ˆä¾‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_3-æµæ§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. æµæ§è§„åˆ™ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦"><!--[--><!--]--> 3. æµæ§è§„åˆ™ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_4-é™çº§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. é™çº§è§„åˆ™ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦"><!--[--><!--]--> 4. é™çº§è§„åˆ™ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_5-çƒ­ç‚¹keyé™æµ-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. çƒ­ç‚¹keyé™æµ ğŸ˜„ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦"><!--[--><!--]--> 5. çƒ­ç‚¹keyé™æµ ğŸ˜„ å®˜ç½‘ æ–¹æ³•ç»†ç²’åº¦ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_6-ç³»ç»Ÿè§„åˆ™-å®˜ç½‘-ç³»ç»Ÿ-åº”ç”¨æ•´ä½“-ä»å…¥å£åº§æ•´ä½“" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. ç³»ç»Ÿè§„åˆ™ å®˜ç½‘ ç³»ç»Ÿ(åº”ç”¨æ•´ä½“,ä»å…¥å£åº§æ•´ä½“)"><!--[--><!--]--> 6. ç³»ç»Ÿè§„åˆ™ å®˜ç½‘ ç³»ç»Ÿ(åº”ç”¨æ•´ä½“,ä»å…¥å£åº§æ•´ä½“) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_7-sentinelresource" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. @SentinelResource"><!--[--><!--]--> 7. @SentinelResource <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_8-æœåŠ¡é€šæ–­" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. æœåŠ¡é€šæ–­"><!--[--><!--]--> 8. æœåŠ¡é€šæ–­ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_9-è§„åˆ™æŒä¹…åŒ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. è§„åˆ™æŒä¹…åŒ–"><!--[--><!--]--> 9. è§„åˆ™æŒä¹…åŒ– <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_4-springcloud-alibaba-seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. SpringCloud Alibaba Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡"><!--[--><!--]--> 4. SpringCloud Alibaba Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_1-seateæ¦‚è¿°-å®˜ç½‘" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. seateæ¦‚è¿° å®˜ç½‘"><!--[--><!--]--> 1. seateæ¦‚è¿° å®˜ç½‘ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chggx-knowlodge-vuepress/java/framework/springcloud/2.SpringCloud%20Alibaba%E4%BB%8B%E7%BB%8D.html#_2-æ¡ˆä¾‹-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. æ¡ˆä¾‹"><!--[--><!--]--> 2. æ¡ˆä¾‹ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="springcloud-alibaba-å®˜ç½‘" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba-å®˜ç½‘" aria-hidden="true">#</a> SpringCloud Alibaba <a href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h1><h2 id="_1-springcloud-alibabaå…¥é—¨ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1-springcloud-alibabaå…¥é—¨ç®€ä»‹" aria-hidden="true">#</a> 1. SpringCloud Alibabaå…¥é—¨ç®€ä»‹</h2><h3 id="_1-ä¸ºä»€ä¹ˆå‡ºç°springcloud-alibaba" tabindex="-1"><a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆå‡ºç°springcloud-alibaba" aria-hidden="true">#</a> 1. ä¸ºä»€ä¹ˆå‡ºç°SpringCloud Alibaba</h3><ul><li>SpringCloud Netflix é¡¹ç›®è¿›å…¥ç»´æŠ¤ 2018.12.12</li><li>https://spring.io/blog/2018/12/12/spring-cloud-greenwich-rc1-available-now</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160327.png" alt=""></p><h3 id="_2-alibaba-èƒ½å¹²ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2-alibaba-èƒ½å¹²ä»€ä¹ˆ" aria-hidden="true">#</a> 2. alibaba èƒ½å¹²ä»€ä¹ˆ?</h3><h4 id="_1-ä¸»è¦æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#_1-ä¸»è¦æŠ€æœ¯" aria-hidden="true">#</a> 1. ä¸»è¦æŠ€æœ¯</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160334.png" alt=""></p><ol><li><p>æœåŠ¡é™æµé™çº§ï¼šé»˜è®¤æ”¯æŒServletã€Feignã€RestTemplateã€Dubboå’ŒRocketMQé™æµé™çº§åŠŸèƒ½çš„æ¥å…¥ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡æ§åˆ¶å°å®æ—¶ä¿®æ”¹é™æµé™çº§è§„åˆ™ï¼Œè¿˜æ”¯æŒæŸ¥çœ‹é™æµé™çº§Metricsç›‘æ§ã€‚</p></li><li><p>æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šé€‚é…SpringCloudæœåŠ¡æ³¨å†Œä¸å‘ç°æ ‡å‡†ï¼Œé»˜è®¤é›†æˆäº†Ribbonçš„æ”¯æŒã€‚</p></li><li><p>åˆ†å¸ƒå¼é…ç½®ç®¡ç†ï¼šæ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®ï¼Œé…ç½®æ›´æ”¹æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚</p></li><li><p>æ¶ˆæ¯é©±åŠ¨èƒ½åŠ›ï¼šåŸºäºSpringCloud Streamä¸ºå¾®æœåŠ¡åº”ç”¨æ„å»ºæ¶ˆæ¯é©±åŠ¨èƒ½åŠ›ã€‚</p></li><li><p>é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ï¼šé˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚æ”¯æŒåœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</p></li><li><p>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ï¼šæä¾›ç§’çº§ã€ç²¾å‡†ã€é«˜å¯é ã€é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäºCronè¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦ä»»åŠ¡ã€‚åŒæ—¶æä¾›åˆ†å¸ƒå¼çš„ä»»åŠ¡æ‰§è¡Œæ¨¡å‹ï¼Œå¦‚ç½‘æ ¼ä»»åŠ¡ã€‚ç½‘æ ¼ä»»åŠ¡æ”¯æŒæµ·é‡å­ä»»åŠ¡å‡åŒ€åˆ†é…åˆ°æ‰€æœ‰Workerï¼ˆschedulerx-clientï¼‰ä¸Šæ‰§è¡Œã€‚</p></li></ol><h4 id="_2-ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-ä¾èµ–" aria-hidden="true">#</a> 2. ä¾èµ–</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-ç»„ä»¶" aria-hidden="true">#</a> 3.. ç»„ä»¶</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160340.png" alt=""></p><h4 id="_4-å­¦ä¹ èµ„æ–™" tabindex="-1"><a class="header-anchor" href="#_4-å­¦ä¹ èµ„æ–™" aria-hidden="true">#</a> 4. å­¦ä¹ èµ„æ–™</h4><p><a href="https://spring.io/projects/spring-cloud-alibaba#overview" target="_blank" rel="noopener noreferrer">SpringCloudå®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://github.com/alibaba/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md" target="_blank" rel="noopener noreferrer">ä¸­æ–‡å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_2-springcloud-alibaba-nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#_2-springcloud-alibaba-nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ" aria-hidden="true">#</a> 2. SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ ğŸ˜„</h2><h3 id="_1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1-æ¦‚è¿°" aria-hidden="true">#</a> 1. æ¦‚è¿°</h3><ul><li>æ³¨å†Œä¸­å¿ƒ: eureka,zookeeper,consul,nacos</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160346.png" alt=""></p><ul><li>å‰å››ä¸ªå­—æ¯åˆ†åˆ«ä¸ºNamingå’ŒConfigurationçš„å‰ä¸¤ä¸ªå­—æ¯ï¼Œæœ€åçš„sä¸ºServiceã€‚</li></ul><h4 id="_1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 1. æ˜¯ä»€ä¹ˆ?</h4><p>ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚</p><ul><li>Nacosï¼šDynamic Naming and Configuration Service</li><li>Nacoså°±æ˜¯ æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒçš„ç»„åˆ</li><li>==Nacos = Eureka + Config + Bus==</li></ul><h4 id="_2-èƒ½å¹²å˜›" tabindex="-1"><a class="header-anchor" href="#_2-èƒ½å¹²å˜›" aria-hidden="true">#</a> 2. èƒ½å¹²å˜›?</h4><ul><li>æ›¿ä»£EurekaåšæœåŠ¡<strong>æ³¨å†Œä¸­å¿ƒ</strong></li><li>æ›¿ä»£ConfigåšæœåŠ¡<strong>é…ç½®ä¸­å¿ƒ</strong></li></ul><h4 id="_3-å»å“ªé‡Œä¸‹" tabindex="-1"><a class="header-anchor" href="#_3-å»å“ªé‡Œä¸‹" aria-hidden="true">#</a> 3. å»å“ªé‡Œä¸‹?</h4><p><a href="https://github.com/alibaba/Nacos" target="_blank" rel="noopener noreferrer">github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> , <a href="https://nacos.io/zh-cn/index.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_nacos_config" target="_blank" rel="noopener noreferrer">å­¦ä¹ æ‰‹å†Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_4-å®‰è£…è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_4-å®‰è£…è¿è¡Œ" aria-hidden="true">#</a> 4. å®‰è£…è¿è¡Œ</h4><ol><li><p>æœ¬åœ°Java8 + Mavenç¯å¢ƒå·²ç»OK</p></li><li><p>å…ˆä»å®˜ç½‘ä¸‹è½½Nacos</p></li><li><p>è§£å‹å®‰è£…åŒ…ï¼Œç›´æ¥è¿è¡Œbinç›®å½•ä¸‹çš„startup.cmd</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160351.png" alt=""></p></li><li><p>è¿è¡ŒæˆåŠŸåç›´æ¥è®¿é—® https://localhost:8848/nacos é»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯nacos</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160356.png" alt=""></p></li></ol><p>linux</p><ol><li><p>tar zxvf nacos-server-1.1.4.tar.gz</p></li><li><p>bash startup.sh -m standalone (å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼):</p><p>sh startup.sh -m standalone)</p></li><li><p><em># MySQLé…ç½®</em></p><p>spring.datasource.platform=mysql</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -p 3306:3306 --name mysql -v /root/mysql/conf:/etc/mysql/conf.d -v /root/mysql/logs:/logs -v /root/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=326868 -d mysql:5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>db.num=1</p><p>db.url.0=jdbc:mysql://116.196.118.167:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</p><p>db.user=root</p><p>db.password=326868</p></li></ol><h3 id="_2-nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ-å®˜æ–¹æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_2-nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ-å®˜æ–¹æ–‡æ¡£" aria-hidden="true">#</a> 2. NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ <a href="https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><h4 id="_1-æœåŠ¡ç«¯" tabindex="-1"><a class="header-anchor" href="#_1-æœåŠ¡ç«¯" aria-hidden="true">#</a> 1. æœåŠ¡ç«¯</h4><h5 id="_1-ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-ä¾èµ–" aria-hidden="true">#</a> 1. ä¾èµ–</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--çˆ¶å·¥ç¨‹å¼•å…¥spring cloud alibaba 2.1.0.RELEASE--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--springcloud alibaba nacos--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Nacosè‡ªå¸¦ribbon</strong></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160404.png" alt=""></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®" aria-hidden="true">#</a> 2. é…ç½®</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>provider
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#é…ç½®Nacosåœ°å€</span>

<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>  <span class="token comment">#ç›‘æ§</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-ä¸»å¯åŠ¨ç±»-enablediscoveryclient" tabindex="-1"><a class="header-anchor" href="#_3-ä¸»å¯åŠ¨ç±»-enablediscoveryclient" aria-hidden="true">#</a> 3. ä¸»å¯åŠ¨ç±» <code>@EnableDiscoveryClient</code></h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain9001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain9001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-controler" tabindex="-1"><a class="header-anchor" href="#_4-controler" aria-hidden="true">#</a> 4. controler</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/nacos/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;******result: &quot;</span><span class="token operator">+</span>serverPort<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;nacos registry,serverPort: &quot;</span><span class="token operator">+</span> serverPort<span class="token operator">+</span><span class="token string">&quot;\t id&quot;</span><span class="token operator">+</span>id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#_5-æ•ˆæœ" aria-hidden="true">#</a> 5. æ•ˆæœ</h5><p>nacos</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160410.png" alt=""></p><ul><li>æ–°å»º9002 å®ç°è´Ÿè½½å‡è¡¡</li><li>ä¸æƒ³æ–°å»º(é‡‡ç”¨ä¸‹é¢æ–¹æ³•)</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160416.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160420.png" alt=""></p><h4 id="_2-å®¢æˆ·ç«¯" tabindex="-1"><a class="header-anchor" href="#_2-å®¢æˆ·ç«¯" aria-hidden="true">#</a> 2. å®¢æˆ·ç«¯</h4><h5 id="_1-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®" aria-hidden="true">#</a> 1. é…ç½®</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">83</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>order<span class="token punctuation">-</span>consumer
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment"># æ³¨å†Œä¸­å¿ƒNacosé…ç½®</span>

<span class="token comment">#æ¶ˆè´¹è€…å°†è¦å»è®¿é—®çš„å¾®æœåŠ¡åç§°ï¼ˆæˆåŠŸæ³¨å†Œè¿›nacosçš„å¾®æœåŠ¡æä¾›è€…ï¼‰ï¼Œåœ¨è¿™é…ç½®äº†è®¿é—®çš„æœåŠ¡ï¼Œä¸šåŠ¡ç±»å°±ä¸ç”¨åœ¨å®šä¹‰å¸¸é‡äº†</span>
<span class="token key atrule">service-url</span><span class="token punctuation">:</span>
  <span class="token key atrule">nacos-user-service</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//nacos<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>provider
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-å¯åŠ¨ç±»" tabindex="-1"><a class="header-anchor" href="#_2-å¯åŠ¨ç±»" aria-hidden="true">#</a> 2. å¯åŠ¨ç±»</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderNacosMain83</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderNacosMain83</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * RestTemplateç»“åˆRibbonåšè´Ÿè½½å‡è¡¡ä¸€å®šè¦åŠ @LoadBalanced
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-controller" tabindex="-1"><a class="header-anchor" href="#_3-controller" aria-hidden="true">#</a> 3. controller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderNacosController</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * å› ä¸ºåœ¨ymlä¸­é…ç½®äº†service-url.nacos-user-serviceï¼Œ
     * è¿™é‡Œä¸éœ€è¦å†å®šä¹‰è¦è®¿é—®å¾®æœåŠ¡åå¸¸é‡ï¼Œè€Œæ˜¯é€šè¿‡bootç›´æ¥è¯»å‡ºæ¥
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${service-url.nacos-user-service}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverURL<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Nacosæµ‹è¯•Ribbon
     * http://localhost:83/consumer/payment/nacos/1
     * <span class="token keyword">@param</span> <span class="token parameter">id</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/nacos/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;******serverURL: {}, id: {}&quot;</span> <span class="token operator">+</span> serverURL<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>serverURL <span class="token operator">+</span> <span class="token string">&quot;/payment/nacos/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_4-ç»“æœ" aria-hidden="true">#</a> 4. ç»“æœ</h5><p>http://localhost:83/consumer/payment/nacos/1</p><p>è½®è¯¢è®¿é—® 9001,9002,9011</p><h4 id="_3-æœåŠ¡ä¸­å¿ƒçš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡ä¸­å¿ƒçš„å¯¹æ¯”" aria-hidden="true">#</a> 3. æœåŠ¡ä¸­å¿ƒçš„å¯¹æ¯”</h4><h5 id="_1-nacos" tabindex="-1"><a class="header-anchor" href="#_1-nacos" aria-hidden="true">#</a> 1. nacos</h5><p>Nacosåœ°å›¾</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160428.jpg" alt=""></p><p><strong>Nacosç”Ÿæ€å›¾</strong></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160432.png" alt=""></p><p>å¦‚ Nacos å…¨æ™¯å›¾æ‰€ç¤ºï¼ŒNacos æ— ç¼æ”¯æŒä¸€äº›ä¸»æµçš„å¼€æºç”Ÿæ€ï¼Œä¾‹å¦‚</p><ul><li><a href="https://nacos.io/en-us/docs/quick-start-spring-cloud.html" target="_blank" rel="noopener noreferrer">Spring Cloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://nacos.io/zh-cn/docs/xx" target="_blank" rel="noopener noreferrer">Apache Dubbo and Dubbo Mesh TODO<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://nacos.io/zh-cn/docs/xx" target="_blank" rel="noopener noreferrer">Kubernetes and CNCF TODO<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li><li>......</li></ul><h5 id="_2-å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_2-å¯¹æ¯”" aria-hidden="true">#</a> 2. å¯¹æ¯”</h5><p>Nacosä¸å…¶ä»–æ³¨å†Œä¸­å¿ƒç‰¹æ€§å¯¹æ¯”</p><table><thead><tr><th></th><th>Nacos</th><th>Eureka</th><th>Consul</th><th>Zookeeper</th><th>CoreDNS</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§åè®®</td><td>CP+AP</td><td>AP</td><td>CP</td><td>CP</td><td>/</td></tr><tr><td>å¥åº·çŠ¶æ€</td><td>TCP/HTTP/MYSQL/Client Beat</td><td>Client Beat</td><td>TCP/HTTPgRPC</td><td>Client Beat</td><td>/</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>æƒé‡/DSL/metadata/CMDB</td><td>Ribbon</td><td>Fabio</td><td>/</td><td>RR</td></tr><tr><td>é›ªå´©æ•ˆåº”</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>è‡ªåŠ¨æ³¨é”€å®ä¾‹</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>è®¿é—®åè®®</td><td>HTTP/DNS/UDP</td><td>HTTP</td><td>HTTP/DNS</td><td>TCP</td><td>DNS</td></tr><tr><td>ç›‘å¬æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤šæ•°æ®ä¸­å¿ƒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>è·¨æ³¨å†Œä¸­å¿ƒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>SpringCloudé›†æˆ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Dubboé›†æˆ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>K8sé›†æˆ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160438.jpg" alt=""></p><h5 id="_3-nacosçš„apä¸cpåˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#_3-nacosçš„apä¸cpåˆ‡æ¢" aria-hidden="true">#</a> 3. Nacosçš„APä¸CPåˆ‡æ¢ ğŸ˜„</h5><p>==Cæ˜¯æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼›è€ŒAçš„å®šä¹‰æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå—åˆ°å“åº”ã€‚==</p><p>ä½•æ—¶é€‰æ‹©ä½¿ç”¨ä½•ç§æ¨¡å¼ï¼Ÿ</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸éœ€è¦å­˜å‚¨æœåŠ¡çº§åˆ«çš„ä¿¡æ¯ä¸”æœåŠ¡å®ä¾‹æ˜¯é€šè¿‡nacos-clientæ³¨å†Œï¼Œå¹¶èƒ½å¤Ÿä¿æŒå¿ƒè·³ä¸ŠæŠ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©APæ¨¡å¼ã€‚å½“å‰ä¸»æµçš„æœåŠ¡å¦‚SpringCloudå’ŒDubboæœåŠ¡ï¼Œéƒ½é€‚ç”¨ä¸APæ¨¡å¼ï¼ŒAPæ¨¡å¼ä¸ºäº†æœåŠ¡çš„å¯èƒ½æ€§è€Œå‡å¼±äº†ä¸€è‡´æ€§ï¼Œå› æ­¤==APæ¨¡å¼ä¸‹åªæ”¯æŒæ³¨å†Œä¸´æ—¶å®ä¾‹ã€‚==</p><p>å¦‚æœéœ€è¦åœ¨æœåŠ¡çº§åˆ«ç¼–è¾‘æˆ–å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆCPæ˜¯å¿…é¡»ï¼ŒK8SæœåŠ¡å’ŒDNSæœåŠ¡åˆ™é€‚ç”¨äºCPæ¨¡å¼ã€‚==CPæ¨¡å¼ä¸‹åˆ™æ”¯æŒæ³¨å†ŒæŒä¹…åŒ–å®ä¾‹ï¼Œ==æ­¤æ—¶åˆ™æ˜¯ä»¥Raftåè®®ä¸ºé›†ç¾¤è¿è¡Œæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹æ³¨å†Œå®ä¾‹ä¹‹å‰å¿…é¡»å…ˆæ³¨å†ŒæœåŠ¡ï¼Œå¦‚æœæœåŠ¡ä¸å‡ºå­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›é”™è¯¯ã€‚</p><p>==<strong>æ¨¡å¼çš„åˆ‡æ¢</strong>==</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>ç”¨ä¸‹é¢å‘½ä»¤åˆ‡æ¢
curl <span class="token operator">-</span><span class="token class-name">X</span> <span class="token constant">PUT</span> &#39;$<span class="token constant">NACOS_SERVER</span><span class="token operator">:</span><span class="token number">8848</span><span class="token operator">/</span>nacos<span class="token operator">/</span>v1<span class="token operator">/</span>ns<span class="token operator">/</span>operator<span class="token operator">/</span>switches<span class="token operator">?</span>entry<span class="token operator">=</span>serverMode<span class="token operator">&amp;</span>value<span class="token operator">=</span><span class="token constant">CP</span>&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ-ç­‰åŒ-eureka-config-bus" tabindex="-1"><a class="header-anchor" href="#_3-nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ-ç­‰åŒ-eureka-config-bus" aria-hidden="true">#</a> 3. Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒ ==<sup>ç­‰åŒ: eureka+config+bus</sup>==</h3><h4 id="_1-åŸºç¡€é…ç½®æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_1-åŸºç¡€é…ç½®æ“ä½œ" aria-hidden="true">#</a> 1. åŸºç¡€é…ç½®æ“ä½œ</h4><ol><li>ä¾èµ–</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>é…ç½®æ–‡ä»¶(åŒSpringCloud Config bootstrap.yml å’Œ application.yml) <ul><li>NacosåŒspringcloud-configä¸€æ ·ï¼Œåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œè¦ä¿è¯å…ˆä»é…ç½®ä¸­å¿ƒè¿›è¡Œé…ç½®æ‹‰å–ï¼Œæ‹‰å–é…ç½®åï¼Œæ‰èƒ½ä¿è¯é¡¹ç›®çš„æ­£å¸¸å¯åŠ¨ã€‚</li><li>SpringCloudä¸­é…ç½®æ–‡ä»¶çš„åŠ è½½æ˜¯å­˜åœ¨ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œbootstrapä¼˜å…ˆçº§é«˜äºapplication</li></ul></li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#application.yml  [bootstrap.yml ä¼˜å…ˆçº§é«˜äº application.yml]</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment">#å¼€å‘ç¯å¢ƒ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#bootstrap.xml</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3377</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Nacosä½œä¸ºé…ç½®ä¸­å¿ƒåœ°å€</span>
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml  <span class="token comment">#æŒ‡å®šyamlæ ¼å¼çš„é…ç½®</span>

<span class="token comment"># ${spring.application.name}-${spring.profile.active}.${spring.cloud.nacos.config.file.extension}</span>
<span class="token comment"># nacos-config-client-dev.yml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>å¯åŠ¨ç±»</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosConfigClientMain3377</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">NacosConfigClientMain3377</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä¸šåŠ¡ <code>@RefreshScope </code> SpringCloudåŸç”Ÿæ³¨è§£ æ”¯æŒNacosçš„åŠ¨æ€åˆ·æ–°åŠŸèƒ½</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Slf4j
@RestController
@RefreshScope 
public class ConfigClientController {

    @Value(&quot;${config.info}&quot;)
    private String configInfo;

    @GetMapping(&quot;/config/info&quot;)
    public String getConfigInfo(){
        log.info(&quot;******configInfo: {}, time: {}&quot;,configInfo,new Date());
        return configInfo;
    }
    
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li><p>å¯åŠ¨å‰</p><ul><li><p>ä¿è¯yamlå¯åŠ¨æ–‡ä»¶æœ‰</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160445.png" alt=""></p></li><li><p>è¿è¡Œå¯åŠ¨ç±»</p></li></ul></li><li><p>ç»“æœ</p></li></ol><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160451.png" alt=""></p><p>ç»“æœ: å½“ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¶å€™,åˆ·æ–°é¡µé¢==è‡ªåŠ¨åˆ·æ–°é…ç½®ä¿¡æ¯==(æ²¡æœ‰SpringCloud Configçš„ä¸€ç³»åˆ—è§£å†³[Config+Bus])</p><h4 id="_2-åœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯" aria-hidden="true">#</a> 2. åœ¨Nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯</h4><p><code>ç†è®ºï¼šNacosä¸­çš„åŒ¹é…è§„åˆ™ </code> <a href="https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> Nacosä¸­çš„dataidçš„ç»„æˆæ ¼å¼åŠä¸SpringBooté…ç½®æ–‡ä»¶ä¸­çš„åŒ¹é…è§„åˆ™</p><p>åœ¨ Nacos Spring Cloud ä¸­ï¼Œ<code>dataId</code> çš„å®Œæ•´æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-plain ext-plain line-numbers-mode"><pre class="language-plain"><code>${prefix}-${spring.profile.active}.${file-extension}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>prefix</code> é»˜è®¤ä¸º <code>spring.application.name</code> çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹ <code>spring.cloud.nacos.config.prefix</code>æ¥é…ç½®ã€‚</li><li><code>spring.profile.active</code> å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles" target="_blank" rel="noopener noreferrer">Spring Bootæ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚ <strong>æ³¨æ„ï¼šå½“ <code>spring.profile.active</code> ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦ <code>-</code> ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å˜æˆ <code>${prefix}.${file-extension}</code></strong></li><li><code>file-exetension</code> ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ <code>spring.cloud.nacos.config.file-extension</code> æ¥é…ç½®ã€‚ç›®å‰åªæ”¯æŒ <code>properties</code> å’Œ <code>yaml</code> ç±»å‹ã€‚</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160456.png" alt=""></p><p>Nacosä¸­é…ç½®</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160501.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160513.png" alt=""><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160517.png" alt=""></p><h4 id="_3-åˆ†ç±»é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-åˆ†ç±»é…ç½®" aria-hidden="true">#</a> 3. åˆ†ç±»é…ç½®</h4><h5 id="_1-å¤šç¯å¢ƒå¤šé¡¹ç›®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1-å¤šç¯å¢ƒå¤šé¡¹ç›®ç®¡ç†" aria-hidden="true">#</a> 1. å¤šç¯å¢ƒå¤šé¡¹ç›®ç®¡ç†</h5><ul><li>é—®é¢˜1ï¼š å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸€ä¸ªç³»ç»Ÿä¼šå‡†å¤‡devå¼€å‘ç¯å¢ƒã€testæµ‹è¯•ç¯å¢ƒã€prodç”Ÿäº§ç¯å¢ƒï¼Œå¦‚ä½•ä¿è¯æŒ‡å®šç¯å¢ƒå¯åŠ¨æ—¶æœåŠ¡èƒ½æ­£ç¡®è¯»å–åˆ°Nacosä¸Šç›¸åº”ç¯å¢ƒçš„é…ç½®æ–‡ä»¶å‘¢ï¼Ÿ</li><li>é—®é¢˜2ï¼š ä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿä¼šæœ‰å¾ˆå¤šå¾®æœåŠ¡å­é¡¹ç›®ï¼Œæ¯ä¸ªå¾®æœåŠ¡é¡¹ç›®åˆä¼šæœ‰ç›¸åº”çš„å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€é¢„å‘ç¯å¢ƒã€æ­£å¼ç¯å¢ƒâ€¦é‚£æ€ä¹ˆå¯¹è¿™äº›å¾®æœåŠ¡é…ç½®è¿›è¡Œç®¡ç†å‘¢ï¼Ÿ</li></ul><h5 id="_2-nacosç•Œé¢" tabindex="-1"><a class="header-anchor" href="#_2-nacosç•Œé¢" aria-hidden="true">#</a> 2. Nacosç•Œé¢</h5><p>é…ç½®ç®¡ç†</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160527.png" alt=""></p><p>å‘½åç©ºé—´</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160534.png" alt=""></p><h5 id="_3-namespace-group-data-idä¸‰è€…å…³ç³»-ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡" tabindex="-1"><a class="header-anchor" href="#_3-namespace-group-data-idä¸‰è€…å…³ç³»-ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡" aria-hidden="true">#</a> 3. Namespace + Group + Data IDä¸‰è€…å…³ç³»ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</h5><h6 id="_1-æ˜¯ä»€ä¹ˆ-1" tabindex="-1"><a class="header-anchor" href="#_1-æ˜¯ä»€ä¹ˆ-1" aria-hidden="true">#</a> 1. æ˜¯ä»€ä¹ˆ?</h6><p>ç±»ä¼¼Javaä¸­çš„packageåå’Œç±»å ==æœ€å¤–å±‚çš„namespaceæ˜¯å¯ä»¥ç”¨äºåŒºåˆ†éƒ¨ç½²ç¯å¢ƒçš„ï¼ŒGroupå’ŒDataIDé€»è¾‘ä¸ŠåŒºåˆ†ä¸¤ä¸ªç›®æ ‡å¯¹è±¡==</p><h6 id="_2-ä¸‰è€…æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_2-ä¸‰è€…æƒ…å†µ" aria-hidden="true">#</a> 2. ä¸‰è€…æƒ…å†µ</h6><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160540.png" alt=""></p><p>é»˜è®¤æƒ…å†µï¼š ==Namespace=publicï¼ŒGroup=DEFAULT_GROUPï¼Œé»˜è®¤Clusteræ˜¯DEFAULT==</p><ul><li><p><strong>Nacosé»˜è®¤çš„å‘½åç©ºé—´æ˜¯public</strong>ï¼ŒNamespaceä¸»è¦ç”¨æ¥å®ç°==<strong>éš”ç¦»è®¾è®¡</strong>== æ¯”æ–¹è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªç¯å¢ƒï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸‰ä¸ªNamespaceï¼Œä¸åŒçš„Namespaceä¹‹é—´æ˜¯éš”ç¦»çš„ã€‚</p></li><li><p>Groupé»˜è®¤æ˜¯DEFAULT_GROUPï¼ŒGroupå¯ä»¥æŠŠä¸åŒçš„å¾®æœåŠ¡åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†ç»„é‡Œé¢å»</p></li><li><p><strong>Serviceå°±æ˜¯å¾®æœåŠ¡</strong>ï¼Œä¸€ä¸ªServiceå¯ä»¥åŒ…å«å¤šä¸ªClusterï¼ˆé›†ç¾¤ï¼‰,Nacosé»˜è®¤Clusteræ˜¯DEFAULTï¼ŒClusteræ˜¯å¯¹æŒ‡å®šå¾®æœåŠ¡çš„ä¸€ä¸ªè™šæ‹Ÿåˆ’åˆ† æ¯”æ–¹è¯´ä¸ºäº†å®¹ç¾ï¼Œå°†Serviceå¾®æœåŠ¡åˆ†åˆ«éƒ¨ç½²åœ¨äº†æ­å·æœºæˆ¿å’Œå¹¿å·æœºæˆ¿ï¼Œè¿™æ—¶å°±å¯ä»¥ç»™æ­å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°ï¼ˆHZï¼‰ç»™å¹¿å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°ï¼ˆGZï¼‰ï¼Œè¿˜å¯ä»¥å°½é‡è®©åŒä¸€ä¸ªæœºæˆ¿çš„å¾®æœåŠ¡äº’ç›¸è°ƒç”¨ï¼Œä»¥æå‡æ€§èƒ½ã€‚(åˆ’ç‰‡åˆ’åˆ†)</p></li></ul><p>æœ€åæ˜¯Instanceï¼Œå°±æ˜¯å¾®æœåŠ¡çš„å®ä¾‹ã€‚</p><h4 id="_4-ä¸‰ç§æ–¹æ¡ˆ-åˆ†ç±»é…ç½®" tabindex="-1"><a class="header-anchor" href="#_4-ä¸‰ç§æ–¹æ¡ˆ-åˆ†ç±»é…ç½®" aria-hidden="true">#</a> 4. ä¸‰ç§æ–¹æ¡ˆ (åˆ†ç±»é…ç½®)</h4><h5 id="_1-dataidæ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_1-dataidæ–¹æ¡ˆ" aria-hidden="true">#</a> 1. DataIDæ–¹æ¡ˆ</h5><ul><li><p>æŒ‡å®šspring.profile.activeå’Œé…ç½®æ–‡ä»¶çš„DataIDæ¥ä½¿ä¸åŒç¯å¢ƒä¸‹è¯»å–ä¸åŒçš„é…ç½®</p></li><li><p>é»˜è®¤ç©ºé—´ + é»˜è®¤åˆ†ç»„ + æ–°å»ºdevå’Œtestä¸¤ä¸ªDataID</p></li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160546.png" alt=""></p><ul><li>ä¿®æ”¹application.yml</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#application.yml  [bootstrap.yml ä¼˜å…ˆçº§é«˜äº application.yml]</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
<span class="token comment">#    active: dev #å¼€å‘ç¯å¢ƒ</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> test <span class="token comment">#æµ‹è¯•ç¯å¢ƒ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯• (é…ç½®ä»€ä¹ˆ,åŠ è½½ä»€ä¹ˆ)</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160553.png" alt=""></p><h5 id="_2-groupæ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-groupæ–¹æ¡ˆ" aria-hidden="true">#</a> 2. Groupæ–¹æ¡ˆ</h5><ul><li>é€šè¿‡Groupå®ç°ç¯å¢ƒåŒºåˆ†</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160602.png" alt=""></p><ul><li>é…ç½®ä¿®æ”¹</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160608.png" alt=""></p><ul><li>æµ‹è¯•</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160613.png" alt=""></p><h5 id="_3-namespace-æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_3-namespace-æ–¹æ¡ˆ" aria-hidden="true">#</a> 3. Namespace æ–¹æ¡ˆ</h5><ol><li>æ–°å¢å‘½åç©ºé—´</li></ol><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160620.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160624.png" alt=""></p><ol start="2"><li>é…ç½®config</li></ol><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160629.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160637.png" alt=""></p><ul><li><p>æµ‹è¯•</p></li><li><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>file-extension: yml  #æŒ‡å®šyamlæ ¼å¼çš„é…ç½®
group: TEST_GROUP # æŒ‡å®šç»„å
namespace: af21dbe7-d7d7-45ac-866f-c9d49370c213 # æŒ‡å®šå‘½åç©ºé—´ dev: af21dbe7-d7d7-45ac-866f-c9d49370c213
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_5-æ‰©å±•id" tabindex="-1"><a class="header-anchor" href="#_5-æ‰©å±•id" aria-hidden="true">#</a> 5. æ‰©å±•ID</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160642.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160653.png" alt=""></p><h3 id="_4-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–" aria-hidden="true">#</a> 4. Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–</h3><h4 id="_1-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_1-é›†ç¾¤" aria-hidden="true">#</a> 1. <a href="https://nacos.io/zh-cn/docs/cluster-mode-quick-start.html" target="_blank" rel="noopener noreferrer"> é›†ç¾¤<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h5 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a> <img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160657.png" alt=""></h5><p>**é»˜è®¤Nacosä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“ï¼ˆderbyï¼‰**å®ç°æ•°æ®çš„å­˜å‚¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯åŠ¨å¤šä¸ªé»˜è®¤é…ç½®ä¸‹çš„NacosèŠ‚ç‚¹ï¼Œæ•°æ®å­˜å‚¨æ˜¯å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜çš„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ==<strong>Nacosé‡‡ç”¨äº†é›†ä¸­å¼å­˜å‚¨çš„æ–¹å¼æ¥æ”¯æŒé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œç›®å‰åªæ”¯æŒMysqlçš„å­˜å‚¨ã€‚</strong>==</p><p><a href="https://nacos.io/zh-cn/docs/deployment.html" target="_blank" rel="noopener noreferrer">Nacosæ”¯æŒä¸‰ç§éƒ¨ç½²æ¨¡å¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>å•æœºæ¨¡å¼ï¼šç”¨äºæµ‹è¯•å’Œå•æœºè¯•ç”¨</li><li>é›†ç¾¤æ¨¡å¼ï¼šç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œç¡®ä¿é«˜å¯ç”¨</li><li>å¤šé›†ç¾¤æ¨¡å¼ï¼šç”¨äºå¤šæ•°æ®ä¸­å¿ƒåœºæ™¯</li></ul><h4 id="_2-æŒä¹…åŒ–åˆ‡æ¢é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-æŒä¹…åŒ–åˆ‡æ¢é…ç½®" aria-hidden="true">#</a> 2. æŒä¹…åŒ–åˆ‡æ¢é…ç½®</h4><ul><li>é»˜è®¤Nacosä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“ï¼ˆderby)</li></ul><h5 id="_1-derbyåˆ°mysqlåˆ‡æ¢é…ç½®æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_1-derbyåˆ°mysqlåˆ‡æ¢é…ç½®æ­¥éª¤" aria-hidden="true">#</a> 1. derbyåˆ°mysqlåˆ‡æ¢é…ç½®æ­¥éª¤</h5><ol><li>nacos-server-1.1.4\nacos\conf ç›®å½•ä¸‹æ‰§è¡Œsqlè„šæœ¬ <code>nacos-mysql.sql</code></li><li>nacos-server-1.1.4\nacos\conf ç›®å½•ä¸‹æ‰¾åˆ°<code>application.properties</code>ï¼Œæ·»åŠ é…ç½®ï¼š</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>spring.datasource.platform=mysql
db.num=1
db.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true
db.user=xxx
db.password=xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-mysqlç”Ÿäº§ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-mysqlç”Ÿäº§ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> 2. MYSQLç”Ÿäº§ç¯å¢ƒé…ç½®</h5><h6 id="_1-é¢„è®¡éœ€è¦-1ä¸ªngnix-3ä¸ªnacosæ³¨å†Œä¸­å¿ƒ-1ä¸ªmysql" tabindex="-1"><a class="header-anchor" href="#_1-é¢„è®¡éœ€è¦-1ä¸ªngnix-3ä¸ªnacosæ³¨å†Œä¸­å¿ƒ-1ä¸ªmysql" aria-hidden="true">#</a> 1. é¢„è®¡éœ€è¦,1ä¸ªngnix+3ä¸ªnacosæ³¨å†Œä¸­å¿ƒ+1ä¸ªMySQL</h6><h6 id="_2-é…ç½®nacos-linux" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®nacos-linux" aria-hidden="true">#</a> 2. é…ç½®nacos(linux)</h6><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160705.png" alt=""></p><h6 id="_3-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-é…ç½®" aria-hidden="true">#</a> 3. é…ç½®</h6><ul><li><p>linuxä¸ŠMYSQLé…ç½®</p></li><li><p>application.propertiesé…ç½®</p></li><li><p>linuxä¸Šçš„nacosçš„é›†ç¾¤é…ç½®cluster.conf</p><ul><li>ä¸‰å°nacos,ä¸åŒç«¯å£å·</li><li>å¤åˆ¶å‡ºcluster.conf</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160712.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160721.png" alt=""></p><ul><li><p>å†…å®¹</p><p>åœ¨ &quot;/mynacos/nacos/bin â€œ ç›®å½•ä¸‹startup.sh</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160729.png" alt=""></p><p>ä¿®æ”¹</p></li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/alibaba-Nacos34.png?x-oss-process=style/shuiyin_1" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/alibaba-Nacos35.png?x-oss-process=style/shuiyin_1" alt=""></p><p>ç»“æœ ==ä¿®æ”¹ &quot;#&quot; ä¸º &quot; $&quot;==</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160746.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160749.png" alt=""></p></li></ul><p>â€‹ æ‰§è¡Œæ–¹å¼</p><p>â€‹ ./startup.sh -p 3333 Ubuntu : bash startup.sh -p 3333</p><p>â€‹ <img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160755.png" alt=""></p><h6 id="_4-ngnixé…ç½®-è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#_4-ngnixé…ç½®-è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> 4. ngnixé…ç½® è´Ÿè½½å‡è¡¡</h6><p>/opt/nginx-1.17.9/conf</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160800.png" alt=""></p><p>å¯åŠ¨</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./ngnix <span class="token parameter variable">-c</span> /opt/nginx-1.17.9/conf/ngnix.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="_5-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_5-æµ‹è¯•" aria-hidden="true">#</a> 5. æµ‹è¯•</h6><ul><li><p>nacos é›†ç¾¤å¯åŠ¨</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160807.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160812.png" alt=""></p></li><li><p>ngnixå¯åŠ¨ https://www.cnblogs.com/gede/p/11011693.html</p></li></ul><div class="language-conf ext-conf line-numbers-mode"><pre class="language-conf"><code>nginxæ–‡ä»¶å®‰è£…å®Œæˆä¹‹åçš„æ–‡ä»¶ä½ç½®ï¼š

/usr/sbin/nginxï¼šä¸»ç¨‹åº
/etc/nginxï¼šå­˜æ”¾é…ç½®æ–‡ä»¶
/usr/share/nginxï¼šå­˜æ”¾é™æ€æ–‡ä»¶
/var/log/nginxï¼šå­˜æ”¾æ—¥å¿—

# å½»åº•å¸è½½nginx
apt-get --purge autoremove nginx

service nginx start


# naccosé›†ç¾¤é…ç½®
    upstream cluster{
        server 116.196.118.167:3333;
        server 116.196.118.167:4444;
        server 116.196.118.167:5555;
    }


    server {
        listen       1111;
        server_name  16.196.118.167;

        location / {
            #root   html;
            #index  index.html index.htm;
            proxy_pass http://cluster;
        }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>ç»“æœ</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160830.png" alt="">*</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160834.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160838.png" alt=""></p></li></ul><p>linux http://116.196.118.167:1111/nacos/ (æµ‹è¯•3å°Nacos+1å°Ngnix+1å°MySQL)</p><p>å®¢æˆ·ç«¯è®¿é—®å…ˆè®¿é—®NGINX.</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160843.png" alt=""></p><hr><h2 id="_3-springcloud-alibaba-sentinel-å®ç°ç†”æ–­ä¸é™æµ" tabindex="-1"><a class="header-anchor" href="#_3-springcloud-alibaba-sentinel-å®ç°ç†”æ–­ä¸é™æµ" aria-hidden="true">#</a> 3. SpringCloud Alibaba Sentinel å®ç°ç†”æ–­ä¸é™æµ ğŸ˜„</h2><h3 id="_1-sentinel-ä»£æ›¿äº†-hystrix" tabindex="-1"><a class="header-anchor" href="#_1-sentinel-ä»£æ›¿äº†-hystrix" aria-hidden="true">#</a> 1. <a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä»£æ›¿äº† Hystrix</h3><ul><li><p><a href="https://github.com/alibaba/Sentinel/releases" target="_blank" rel="noopener noreferrer">ä¸‹è½½åœ°å€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://blog.csdn.net/qq_29635485/article/details/103100251?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2&amp;utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2" target="_blank" rel="noopener noreferrer">linux dockerå®‰è£…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>==é¢å‘äº‘åŸç”Ÿå¾®æœåŠ¡çš„<strong>é«˜å¯ç”¨æµæ§é˜²æŠ¤ç»„ä»¶</strong>==</p></li><li><p>==åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ==</p></li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160851.png" alt=""></p><h4 id="_1-sentinel" tabindex="-1"><a class="header-anchor" href="#_1-sentinel" aria-hidden="true">#</a> 1. Sentinel</h4><p>ç‰¹æ€§</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160856.png" alt=""></p><ul><li>æœåŠ¡é›ªå´©</li><li>æœåŠ¡é™çº§</li><li>æœåŠ¡ç†”æ–­</li><li>æœåŠ¡é™æµ</li></ul><p>ç”Ÿæ€å›¾</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160901.png" alt=""></p><h4 id="_2-sentinelåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#_2-sentinelåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†" aria-hidden="true">#</a> 2. Sentinelåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</h4><ul><li><strong>æ ¸å¿ƒåº“</strong>ï¼ˆJavaå®¢æˆ·ç«¯ï¼‰ä¸ä¾èµ–ä»»ä½•æ¡†æ¶/åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäºæ‰€æœ‰Javaè¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹Dubbo/Spring Cloudç­‰æ¡†æ¶ä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚</li><li><strong>æ§åˆ¶å°</strong>ï¼ˆDashboardï¼‰åŸºäºSpringBootå¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„Tomcatç­‰åº”ç”¨å®¹å™¨ã€‚</li></ul><h4 id="_3-sentinelä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_3-sentinelä¸‹è½½" aria-hidden="true">#</a> 3. sentinelä¸‹è½½</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>java <span class="token punctuation">-</span>jar sentinel<span class="token punctuation">-</span>dashboard<span class="token punctuation">-</span>1.7.1.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160907.png" alt=""></p><p>è®¿é—®</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160912.png" alt=""></p><p>ç”¨æˆ·: sentinel å¯†ç : sentinel</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160918.png" alt=""></p><p>å®¹é”™,é™æµ,ç›‘æ§å¹³å°æˆåŠŸ.(æ¯”Hystrixæ–¹ä¾¿)</p><h3 id="_2-æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-æ¡ˆä¾‹" aria-hidden="true">#</a> 2. æ¡ˆä¾‹</h3><h4 id="_1-ä¾èµ–-1" tabindex="-1"><a class="header-anchor" href="#_1-ä¾èµ–-1" aria-hidden="true">#</a> 1. ä¾èµ–</h4><ul><li>springcloud alibaba sentinel</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--springcloud alibaba nacos--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--springcloud alibaba sentinel-datasource-nacos åç»­åšæŒä¹…åŒ–ç”¨åˆ°--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--springcloud alibaba sentinel--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_2-å‡†å¤‡" aria-hidden="true">#</a> 2. å‡†å¤‡</h4><ul><li>æ³¨å†Œä¸­å¿ƒ</li><li>sentinelå¯åŠ¨</li></ul><h4 id="_3-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•" aria-hidden="true">#</a> 3 æµ‹è¯•</h4><ol><li><p>å¯åŠ¨å,ç©ºç©ºå¦‚ä¹Ÿ ==sentinelé‡‡ç”¨äº†<strong>æ‡’åŠ è½½</strong>==</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160931.png" alt=""></p></li><li><p>éœ€è¦æ‰§è¡Œä¸€æ¬¡è®¿é—®,æ‰èƒ½è®¿é—®?</p><ul><li>http://localhost:8401/testA</li><li>http://localhost:8401/testB</li></ul></li></ol><p>â€‹ <img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160936.png" alt=""></p><ol start="3"><li>sentinel8080æ­£åœ¨ç›‘æ§8401</li></ol><h3 id="_3-æµæ§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" tabindex="-1"><a class="header-anchor" href="#_3-æµæ§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" aria-hidden="true">#</a> 3. æµæ§è§„åˆ™ å®˜ç½‘ <sup>æ–¹æ³•ç»†ç²’åº¦</sup></h3><ul><li>æµé‡é™åˆ¶,æ§åˆ¶</li></ul><h4 id="_1-åŸºæœ¬ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-åŸºæœ¬ä»‹ç»" aria-hidden="true">#</a> 1. åŸºæœ¬ä»‹ç»</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160941.png" alt=""></p><ol><li><p>èµ„æºåï¼šå”¯ä¸€åç§°ï¼Œé»˜è®¤è¯·æ±‚è·¯å¾„</p></li><li><p>é’ˆå¯¹æ¥æºï¼šSentinelå¯ä»¥é’ˆå¯¹è°ƒç”¨è€…è¿›è¡Œé™æµï¼Œå¡«å†™å¾®æœåŠ¡åï¼Œé»˜è®¤defaultï¼ˆä¸åŒºåˆ†æ¥æºï¼‰</p></li><li><p>é˜ˆå€¼ç±»å‹/å•æœºé˜ˆå€¼ï¼š</p><ul><li>QPSï¼ˆæ¯ç§’é’Ÿçš„è¯·æ±‚æ•°é‡ï¼‰ï¼šå½“è°ƒç”¨è¯¥apiçš„QPSè¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œè¿›è¡Œé™æµ</li><li>çº¿ç¨‹æ•°ï¼šå½“è°ƒç”¨è¯¥apiçš„çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œè¿›è¡Œé™æµ</li></ul></li><li><p>æ˜¯å¦é›†ç¾¤ï¼šï¼ˆä¸ï¼‰éœ€è¦é›†ç¾¤</p></li><li><p>æµæ§æ¨¡å¼ï¼š</p><ul><li>ç›´æ¥ï¼šapiè¾¾åˆ°é™æµæ¡ä»¶æ—¶ï¼Œç›´æ¥é™æµ</li><li>å…³è”ï¼šå½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±</li><li>é“¾è·¯ï¼šåªè®°å½•æŒ‡å®šé“¾è·¯ä¸Šçš„æµé‡ï¼ˆæŒ‡å®šèµ„æºä»å…¥å£èµ„æºè¿›æ¥çš„æµé‡ï¼Œå¦‚æœè¾¾åˆ°é˜ˆå€¼ï¼Œå°±è¿›è¡Œé™æµï¼‰</li></ul></li><li><p>æµæ§æ•ˆæœï¼š</p><ul><li>å¿«é€Ÿå¤±è´¥ï¼šç›´æ¥å¤±è´¥ï¼ŒæŠ›å¼‚å¸¸</li><li>Warm Upï¼šæ ¹æ®codeFactorï¼ˆå†·åŠ è½½å› å­ï¼Œé»˜è®¤3ï¼‰çš„å€¼ï¼Œä»é˜ˆå€¼/codeFactorï¼Œç»è¿‡é¢„çƒ­æ—¶é•¿ï¼Œæ‰è¾¾åˆ°è®¾ç½®çš„QPSé˜ˆå€¼ã€‚</li><li>æ’é˜Ÿç­‰å¾…ï¼šåŒ€é€Ÿæ’é˜Ÿï¼Œè®©è¯·æ±‚ä»¥åŒ€é€Ÿçš„é€Ÿåº¦é€šè¿‡ï¼Œé˜ˆå€¼ç±»å‹å¿…é¡»è®¾ç½®ä¸ºQPSã€‚å¦åˆ™æ— æ•ˆã€‚</li></ul></li></ol><h4 id="_2-æµæ§æ¨¡å¼-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" tabindex="-1"><a class="header-anchor" href="#_2-æµæ§æ¨¡å¼-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" aria-hidden="true">#</a> 2. æµæ§æ¨¡å¼ <a href="https://github.com/alibaba/Sentinel/wiki/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <sup>æ–¹æ³•ç»†ç²’åº¦</sup></h4><h5 id="_1-æµæ§æ¨¡å¼â€”â€”ç›´æ¥-é»˜è®¤" tabindex="-1"><a class="header-anchor" href="#_1-æµæ§æ¨¡å¼â€”â€”ç›´æ¥-é»˜è®¤" aria-hidden="true">#</a> 1. æµæ§æ¨¡å¼â€”â€”ç›´æ¥(é»˜è®¤)</h5><h6 id="_1-qps" tabindex="-1"><a class="header-anchor" href="#_1-qps" aria-hidden="true">#</a> 1. QPS</h6><ul><li><p>å¿«é€Ÿå¤±è´¥</p></li><li><p>è§„åˆ™: æ¯ç§’åªèƒ½è®¿é—®1æ¬¡,è¶…è¿‡ä¸€æ¬¡==é™æµ==</p></li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160946.png" alt=""></p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160951.png" alt=""></p><p>æ€è€ƒ: ç›´æ¥è°ƒç”¨é»˜è®¤çš„æŠ¥é”™ä¿¡æ¯,æŠ€æœ¯æ–¹é¢OK,ä½†æ˜¯,æ˜¯å¦åº”å“å‘¦æˆ‘ä»¬è‡ªå·±çš„åç»­å¤„ç†? ç±»ä¼¼äºHystrixçš„==fallbackçš„å…œåº•æ–¹æ³•==?</p><h6 id="_2-çº¿ç¨‹æ•°" tabindex="-1"><a class="header-anchor" href="#_2-çº¿ç¨‹æ•°" aria-hidden="true">#</a> 2. çº¿ç¨‹æ•°ï¼š</h6><ul><li>ç›´æ¥å¤±è´¥</li></ul><p>å½“è°ƒç”¨è¯¥apiçš„çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œè¿›è¡Œé™æµ</p><h5 id="_2-å…³è”-å¿«é€Ÿå¤±è´¥" tabindex="-1"><a class="header-anchor" href="#_2-å…³è”-å¿«é€Ÿå¤±è´¥" aria-hidden="true">#</a> 2. å…³è” -<strong>å¿«é€Ÿå¤±è´¥</strong></h5><ul><li>æ”¯ä»˜ä¸‹è®¢å•: æ”¯ä»˜è¾¾åˆ°å³°å€¼,è®©ä¸‹è®¢å•ç³»ç»Ÿé™çº§</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223160956.png" alt=""></p><p>postmanæµ‹è¯•</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161000.png" alt=""></p><ul><li>å½“æœ‰å¤§é‡å¹¶å‘è¯·æ±‚æ‰“åˆ°Bä¸Šï¼ŒAå°±é™æµè‡ªå·±ã€‚</li></ul><h4 id="_3-æµæ§æ•ˆæœ-å®˜ç½‘" tabindex="-1"><a class="header-anchor" href="#_3-æµæ§æ•ˆæœ-å®˜ç½‘" aria-hidden="true">#</a> 3. æµæ§æ•ˆæœ <a href="https://github.com/alibaba/Sentinel/wiki/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h5 id="_1-ç›´æ¥" tabindex="-1"><a class="header-anchor" href="#_1-ç›´æ¥" aria-hidden="true">#</a> 1. ç›´æ¥</h5><h5 id="_2-warm-up-é¢„çƒ­" tabindex="-1"><a class="header-anchor" href="#_2-warm-up-é¢„çƒ­" aria-hidden="true">#</a> 2. Warm Up(é¢„çƒ­)</h5><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161007.png" alt=""></p><h5 id="_3-æ’é˜Ÿç­‰å¾…" tabindex="-1"><a class="header-anchor" href="#_3-æ’é˜Ÿç­‰å¾…" aria-hidden="true">#</a> 3. æ’é˜Ÿç­‰å¾…</h5><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161012.png" alt=""></p><h3 id="_4-é™çº§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" tabindex="-1"><a class="header-anchor" href="#_4-é™çº§è§„åˆ™-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" aria-hidden="true">#</a> 4. é™çº§è§„åˆ™ <a href="https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <sup>æ–¹æ³•ç»†ç²’åº¦</sup></h3><ul><li>==åŒHystrix==</li></ul><h4 id="_1-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> 1. åŸºæœ¬ä½¿ç”¨</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161017.png" alt=""></p><ol><li>RT (å¹³å‡æ—¶é—´,ç§’çº§) <ul><li>å¹³å‡å“åº”æ—¶é—´<strong>è¶…å‡ºé˜ˆå€¼</strong>,ä¸”åœ¨<strong>æ—¶é—´çª—å£å†…é€šè¿‡çš„è¯·æ±‚&gt;=5</strong>,ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³åå‡ºå‘==é™çº§==,çª—å£æœŸè¿‡åå…³é—­æ–­è·¯å™¨</li><li>RTæœ€å¤§4900(è·Ÿå¤§çš„éœ€è¦é€šè¿‡-Dcsp.sentinel.statistic.max.rt=xxxxæ‰èƒ½ç”Ÿæ•ˆ)</li></ul></li><li>å¼‚å¸¸æ¯”ä¾‹(ç§’çº§) <ul><li>QPS &gt;= 5 ä¸” å¼‚å¸¸æ¯”ä¾‹(ç§’çº§ç»Ÿè®¡)è¶…è¿‡é˜ˆå€¼,å‡ºå‘é™çº§;æ—¶é—´çª—å£ç»“æŸå,å…³é—­é™çº§</li></ul></li><li>å¼‚å¸¸æ•°(åˆ†é’Ÿçº§) <ul><li>å¼‚å¸¸æ•°(åˆ†é’Ÿç»Ÿè®¡)è¶…è¿‡é˜ˆå€¼æ˜¯,è§¦å‘é™çº§;æ—¶é—´çª—å£ç»“æŸå,å…³é—­é™çº§.</li></ul></li></ol><h4 id="_2-è¿›ä¸€æ­¥è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#_2-è¿›ä¸€æ­¥è¯´æ˜" aria-hidden="true">#</a> 2. è¿›ä¸€æ­¥è¯´æ˜</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161023.png" alt=""></p><ul><li>sentinelçš„çŸ­è·¯å™¨æ˜¯æ²¡æœ‰åŠå¼€çŠ¶æ€çš„(Hystrixæœ‰ä¸‰ä¸ª)</li></ul><h4 id="_3-æµ‹è¯•-1" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•-1" aria-hidden="true">#</a> 3. æµ‹è¯•</h4><h5 id="_1" tabindex="-1"><a class="header-anchor" href="#_1" aria-hidden="true">#</a> 1.</h5><p>å¹³å‡å“åº”æ—¶é—´ (<code>DEGRADE_GRADE_RT</code>)ï¼šå½“ 1s å†…æŒç»­è¿›å…¥ 5 ä¸ªè¯·æ±‚ï¼Œå¯¹åº”æ—¶åˆ»çš„å¹³å‡å“åº”æ—¶é—´ï¼ˆç§’çº§ï¼‰å‡è¶…è¿‡é˜ˆå€¼ï¼ˆ<code>count</code>ï¼Œä»¥ ms ä¸ºå•ä½ï¼‰ï¼Œé‚£ä¹ˆåœ¨æ¥ä¸‹çš„æ—¶é—´çª—å£ï¼ˆ<code>DegradeRule</code> ä¸­çš„ <code>timeWindow</code>ï¼Œä»¥ s ä¸ºå•ä½ï¼‰ä¹‹å†…ï¼Œå¯¹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šè‡ªåŠ¨åœ°ç†”æ–­ï¼ˆæŠ›å‡º <code>DegradeException</code>ï¼‰ã€‚æ³¨æ„ Sentinel é»˜è®¤ç»Ÿè®¡çš„ RT ä¸Šé™æ˜¯ 4900 msï¼Œ<strong>è¶…å‡ºæ­¤é˜ˆå€¼çš„éƒ½ä¼šç®—ä½œ 4900 ms</strong>ï¼Œè‹¥éœ€è¦å˜æ›´æ­¤ä¸Šé™å¯ä»¥é€šè¿‡å¯åŠ¨é…ç½®é¡¹ <code>-Dcsp.sentinel.statistic.max.rt=xxx</code> æ¥é…ç½®</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161028.png" alt=""></p><ul><li>é…ç½®</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161033.png" alt=""></p><p>....</p><h3 id="_5-çƒ­ç‚¹keyé™æµ-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" tabindex="-1"><a class="header-anchor" href="#_5-çƒ­ç‚¹keyé™æµ-å®˜ç½‘-æ–¹æ³•ç»†ç²’åº¦" aria-hidden="true">#</a> 5. çƒ­ç‚¹keyé™æµ ğŸ˜„ <a href="https://github.com/alibaba/Sentinel/wiki/%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <sup>æ–¹æ³•ç»†ç²’åº¦</sup></h3><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161039.png" alt=""></p><p>ä½•ä¸ºçƒ­ç‚¹ï¼Ÿçƒ­ç‚¹å³ç»å¸¸è®¿é—®çš„æ•°æ®ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›ç»Ÿè®¡æŸä¸ªçƒ­ç‚¹æ•°æ®ä¸­è®¿é—®é¢‘æ¬¡æœ€é«˜çš„ Top K æ•°æ®ï¼Œå¹¶å¯¹å…¶è®¿é—®è¿›è¡Œé™åˆ¶ã€‚æ¯”å¦‚ï¼š</p><ul><li>å•†å“ ID ä¸ºå‚æ•°ï¼Œç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…æœ€å¸¸è´­ä¹°çš„å•†å“ ID å¹¶è¿›è¡Œé™åˆ¶</li><li>ç”¨æˆ· ID ä¸ºå‚æ•°ï¼Œé’ˆå¯¹ä¸€æ®µæ—¶é—´å†…é¢‘ç¹è®¿é—®çš„ç”¨æˆ· ID è¿›è¡Œé™åˆ¶</li></ul><h4 id="_1-ä¹‹å‰æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_1-ä¹‹å‰æ–¹æ³•" aria-hidden="true">#</a> 1. ä¹‹å‰æ–¹æ³•</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161045.png" alt=""></p><p>==BlockException==</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>package com.alibaba.csp.sentinel.slots.block;

public abstract class BlockException extends Exception {

    public static final String BLOCK_EXCEPTION_FLAG = &quot;SentinelBlockException&quot;;
    /**
     * &lt;p&gt;this constant RuntimeException has no stack trace, just has a message
     * {@link #BLOCK_EXCEPTION_FLAG} that marks its name.
     * &lt;/p&gt;
     * &lt;p&gt;
     * Use {@link #isBlockException(Throwable)} to check whether one Exception
     * Sentinel Blocked Exception.
     * &lt;/p&gt;
     */
    public static RuntimeException THROW_OUT_EXCEPTION = new RuntimeException(BLOCK_EXCEPTION_FLAG);

    public static StackTraceElement[] sentinelStackTrace = new StackTraceElement[] {
        new StackTraceElement(BlockException.class.getName(), &quot;block&quot;, &quot;BlockException&quot;, 0)
    };

    static {
        THROW_OUT_EXCEPTION.setStackTrace(sentinelStackTrace);
    }

    protected AbstractRule rule;
    private String ruleLimitApp;

    public BlockException(String ruleLimitApp) {
        super();
        this.ruleLimitApp = ruleLimitApp;
    }

    public BlockException(String ruleLimitApp, AbstractRule rule) {
        super();
        this.ruleLimitApp = ruleLimitApp;
        this.rule = rule;
    }

    public BlockException(String message, Throwable cause) {
        super(message, cause);
    }

    public BlockException(String ruleLimitApp, String message) {
        super(message);
        this.ruleLimitApp = ruleLimitApp;
    }

    public BlockException(String ruleLimitApp, String message, AbstractRule rule) {
        super(message);
        this.ruleLimitApp = ruleLimitApp;
        this.rule = rule;
    }

    @Override
    public Throwable fillInStackTrace() {
        return this;
    }

    public String getRuleLimitApp() {
        return ruleLimitApp;
    }

    public void setRuleLimitApp(String ruleLimitApp) {
        this.ruleLimitApp = ruleLimitApp;
    }

    /**
     * Check whether the exception is sentinel blocked exception. One exception is sentinel blocked
     * exception only when:
     * &lt;ul&gt;
     * &lt;li&gt;the exception or its (sub-)cause is {@link BlockException}, or&lt;/li&gt;
     * &lt;li&gt;the exception&#39;s message is or any of its sub-cause&#39;s message equals to {@link #BLOCK_EXCEPTION_FLAG}&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * @param t the exception.
     * @return return true if the exception marks sentinel blocked exception.
     */
    public static boolean isBlockException(Throwable t) {
        if (null == t) {
            return false;
        }

        int counter = 0;
        Throwable cause = t;
        while (cause != null &amp;&amp; counter++ &lt; 50) {
            if ((cause instanceof BlockException) || (BLOCK_EXCEPTION_FLAG.equals(cause.getMessage()))) {
                return true;
            }
            cause = cause.getCause();
        }

        return false;
    }

    public AbstractRule getRule() {
        return rule;
    }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ¡ˆä¾‹-è‡ªå®šä¹‰å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-æ¡ˆä¾‹-è‡ªå®šä¹‰å¤„ç†" aria-hidden="true">#</a> 2. æ¡ˆä¾‹--è‡ªå®šä¹‰å¤„ç†</h4><ul><li>é…ç½®æ–‡ä»¶</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloudalibaba<span class="token punctuation">-</span>sentinel<span class="token punctuation">-</span>service
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token comment"># NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token comment"># sentinel dashboard åœ°å€</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>
        <span class="token comment"># é»˜è®¤ä¸º8719ï¼Œå¦‚æœè¢«å ç”¨ä¼šè‡ªåŠ¨+1ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
      <span class="token comment"># æµæ§è§„åˆ™æŒä¹…åŒ–åˆ°nacos</span>
      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">dsl</span><span class="token punctuation">:</span>
          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
            <span class="token key atrule">data-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
            <span class="token key atrule">group-id</span><span class="token punctuation">:</span> DEFAULT_GROUP
            <span class="token key atrule">data-type</span><span class="token punctuation">:</span> json
            <span class="token key atrule">rule-type</span><span class="token punctuation">:</span> flow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸šåŠ¡</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * çƒ­ç‚¹é™æµ
 *  @SentinelResource(value = &quot;testHotKey&quot;,blockHandler = &quot;deal_testHotKey&quot;)
 *  value: èµ„æºå
 *  blockHandler: å…œåº•æ–¹æ³•
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testHotKey&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;testHotKey&quot;</span><span class="token punctuation">,</span>blockHandler <span class="token operator">=</span> <span class="token string">&quot;deal_testHotKey&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testHotKey</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;p1&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> p1<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;p1&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> p2<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;testHotKey&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deal_testHotKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> p1<span class="token punctuation">,</span> <span class="token class-name">String</span> p2<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;---------------deal_testHotKey,o(â•¥ï¹â•¥)o&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯•</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161056.png" alt=""></p><p>sentinel</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161100.png" alt=""></p><p>é€‰å–æ–¹å¼</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161108.png" alt=""></p><ul><li>ç»“æœ ==QPS è¶…è¿‡ä¸€æ¬¡,é™çº§å¤„ç†==</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161117.png" alt=""></p><h4 id="_3-å‚æ•°ä¾‹å¤–é¡¹" tabindex="-1"><a class="header-anchor" href="#_3-å‚æ•°ä¾‹å¤–é¡¹" aria-hidden="true">#</a> 3. å‚æ•°ä¾‹å¤–é¡¹</h4><ul><li>ä¸Šè¿°æ¡ˆä¾‹,QPS&gt;1,é©¬ä¸Šé™æµ</li></ul><ol><li><p>ç‰¹ä¾‹</p><ul><li>æ™®é€š: è¶…è¿‡ä¸€ç§’ä¹‹å,è¾¾åˆ°é˜ˆå€¼1å,é©¬ä¸Šè¢«é™æµ</li><li>æˆ‘ä¹ˆæœŸæœ›P1å‚æ•°,å½“å®ƒä¸ºæŸä¸ªç‰¹æ®Šå€¼æ—¶,å®ƒçš„é™æµå’Œå¹³æ—¶ä¸ä¸€æ ·</li><li>==ç‰¹ä¾‹: åŠ å…¥å½“p1çš„å€¼ä¸º5æ—¶,å®ƒçš„é˜ˆå€¼å¯ä»¥è¾¾åˆ°200==</li></ul></li><li><p>é…ç½®</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161122.png" alt=""></p></li><li><p>ç»“æœ</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161126.png" alt=""></p></li></ol><p>==å‰æ: çƒ­ç‚¹çš„å‚æ•°å¿…é¡»ä¸ºåŸºæœ¬ç±»å‹/string==</p><h4 id="_4-æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#_4-æ³¨æ„ç‚¹" aria-hidden="true">#</a> 4. æ³¨æ„ç‚¹</h4><p><strong>@SentinelResource</strong>:</p><p>å¤„ç†çš„æ˜¯Sentinelæ§åˆ¶å°é…ç½®çš„è¿è§„æƒ…å†µ,æœ‰BlockHandleræ–¹æ³•é…ç½®çš„å…œåº•å¤„ç†</p><p><strong>@RuntimeException</strong>:</p><p>int age = 10/0,è¿™ä¸ªæ˜¯javaè¿è¡Œæ—¶æŠ¥å‡ºçš„è¿è¡Œæ—¶å¼‚å¸¸,@SentinelResourceä¸å¤„ç†</p><p>==<strong>æ€»ç»“: @SentinelResourceä¸»ç®¡é…ç½®å‡ºé”™,è¿è¡Œå‡ºé”™è¯¥èµ°å¼‚å¸¸èµ°å¼‚å¸¸</strong>==</p><h3 id="_6-ç³»ç»Ÿè§„åˆ™-å®˜ç½‘-ç³»ç»Ÿ-åº”ç”¨æ•´ä½“-ä»å…¥å£åº§æ•´ä½“" tabindex="-1"><a class="header-anchor" href="#_6-ç³»ç»Ÿè§„åˆ™-å®˜ç½‘-ç³»ç»Ÿ-åº”ç”¨æ•´ä½“-ä»å…¥å£åº§æ•´ä½“" aria-hidden="true">#</a> 6. ç³»ç»Ÿè§„åˆ™ <a href="https://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <sup>ç³»ç»Ÿ(åº”ç”¨æ•´ä½“,ä»å…¥å£åº§æ•´ä½“)</sup></h3><h4 id="_1-ç³»ç»Ÿè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_1-ç³»ç»Ÿè§„åˆ™" aria-hidden="true">#</a> 1. ç³»ç»Ÿè§„åˆ™</h4><p>ç³»ç»Ÿä¿æŠ¤è§„åˆ™æ˜¯ä»åº”ç”¨çº§åˆ«çš„å…¥å£æµé‡è¿›è¡Œæ§åˆ¶ï¼Œä»å•å°æœºå™¨çš„ loadã€CPU ä½¿ç”¨ç‡ã€å¹³å‡ RTã€å…¥å£ QPS å’Œå¹¶å‘çº¿ç¨‹æ•°ç­‰å‡ ä¸ªç»´åº¦ç›‘æ§åº”ç”¨æŒ‡æ ‡ï¼Œè®©ç³»ç»Ÿå°½å¯èƒ½è·‘åœ¨æœ€å¤§ååé‡çš„åŒæ—¶ä¿è¯ç³»ç»Ÿæ•´ä½“çš„ç¨³å®šæ€§ã€‚</p><p>ç³»ç»Ÿä¿æŠ¤è§„åˆ™æ˜¯åº”ç”¨æ•´ä½“ç»´åº¦çš„ï¼Œè€Œä¸æ˜¯èµ„æºç»´åº¦çš„ï¼Œå¹¶ä¸”<strong>ä»…å¯¹å…¥å£æµé‡ç”Ÿæ•ˆ</strong>ã€‚å…¥å£æµé‡æŒ‡çš„æ˜¯è¿›å…¥åº”ç”¨çš„æµé‡ï¼ˆ<code>EntryType.IN</code>ï¼‰ï¼Œæ¯”å¦‚ Web æœåŠ¡æˆ– Dubbo æœåŠ¡ç«¯æ¥æ”¶çš„è¯·æ±‚ï¼Œéƒ½å±äºå…¥å£æµé‡ã€‚</p><p>ç³»ç»Ÿè§„åˆ™æ”¯æŒä»¥ä¸‹çš„æ¨¡å¼ï¼š</p><ul><li><strong>Load è‡ªé€‚åº”</strong>ï¼ˆä»…å¯¹ Linux/Unix-like æœºå™¨ç”Ÿæ•ˆï¼‰ï¼šç³»ç»Ÿçš„ load1 ä½œä¸ºå¯å‘æŒ‡æ ‡ï¼Œè¿›è¡Œè‡ªé€‚åº”ç³»ç»Ÿä¿æŠ¤ã€‚å½“ç³»ç»Ÿ load1 è¶…è¿‡è®¾å®šçš„å¯å‘å€¼ï¼Œä¸”ç³»ç»Ÿå½“å‰çš„å¹¶å‘çº¿ç¨‹æ•°è¶…è¿‡ä¼°ç®—çš„ç³»ç»Ÿå®¹é‡æ—¶æ‰ä¼šè§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆBBR é˜¶æ®µï¼‰ã€‚ç³»ç»Ÿå®¹é‡ç”±ç³»ç»Ÿçš„ <code>maxQps * minRt</code> ä¼°ç®—å¾—å‡ºã€‚è®¾å®šå‚è€ƒå€¼ä¸€èˆ¬æ˜¯ <code>CPU cores * 2.5</code>ã€‚</li><li><strong>CPU usage</strong>ï¼ˆ1.5.0+ ç‰ˆæœ¬ï¼‰ï¼šå½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆå–å€¼èŒƒå›´ 0.0-1.0ï¼‰ï¼Œæ¯”è¾ƒçµæ•ã€‚</li><li><strong>å¹³å‡ RT</strong>ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹³å‡ RT è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚</li><li><strong>å¹¶å‘çº¿ç¨‹æ•°</strong>ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹¶å‘çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚</li><li><strong>å…¥å£ QPS</strong>ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„ QPS è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚</li></ul><h3 id="_7-sentinelresource" tabindex="-1"><a class="header-anchor" href="#_7-sentinelresource" aria-hidden="true">#</a> 7. @SentinelResource</h3><h4 id="_1-æŒ‰ç…§èµ„æºåç§°é™æµ-åç»­å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1-æŒ‰ç…§èµ„æºåç§°é™æµ-åç»­å¤„ç†" aria-hidden="true">#</a> 1. æŒ‰ç…§èµ„æºåç§°é™æµ+åç»­å¤„ç†</h4><ul><li><p>nacoså¯åŠ¨</p></li><li><p>sentinelå¯åŠ¨</p></li><li><p>ä¾èµ–</p></li><li><p>ä»£ç </p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŒ‰èµ„æºåç§°é™æµ
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/byResource&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;byResource&quot;</span><span class="token punctuation">,</span>blockHandler <span class="token operator">=</span> <span class="token string">&quot;handlerException&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">byResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">&quot;æŒ‰èµ„æºåç§°é™æµæµ‹è¯•OK&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Payment</span><span class="token punctuation">(</span><span class="token number">2020L</span><span class="token punctuation">,</span><span class="token string">&quot;serial001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * å…œåº•æ–¹æ³•
 */</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">handlerException</span><span class="token punctuation">(</span><span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span>exception<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCanonicalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\t æœåŠ¡ä¸å¯ç”¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»“æœ: ==æ­¤ç§æ–¹æ³•æ˜¯<strong>ä¸´æ—¶çš„</strong>,å…³é—­æœåŠ¡å,sentinelæ§åˆ¶å°çš„æµæ§æ¶ˆå¤±==</li></ul><h4 id="_2-æŒ‰ç…§urlåœ°å€ç§°é™æµ-åç»­å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-æŒ‰ç…§urlåœ°å€ç§°é™æµ-åç»­å¤„ç†" aria-hidden="true">#</a> 2. æŒ‰ç…§urlåœ°å€ç§°é™æµ+åç»­å¤„ç†</h4><p>....</p><h4 id="_3-ä¸Šé¢å…œåº•æ–¹æ¡ˆé¢ä¸´çš„é—®é¢˜-hystrix" tabindex="-1"><a class="header-anchor" href="#_3-ä¸Šé¢å…œåº•æ–¹æ¡ˆé¢ä¸´çš„é—®é¢˜-hystrix" aria-hidden="true">#</a> 3. ä¸Šé¢å…œåº•æ–¹æ¡ˆé¢ä¸´çš„é—®é¢˜ (Hystrix)</h4><ul><li>ç³»ç»Ÿé»˜è®¤çš„,æ²¡æœ‰ä½“ç°æˆ‘ä»¬çš„ä¸šåŠ¡è¦æ±‚</li><li>ä¾ç…§ç°æœ‰æ¡ä»¶,æˆ‘ä»¬è‡ªå®šä¹‰çš„å¤„ç†æ–¹æ³•æœ‰ä½•ä¸šåŠ¡<strong>ä»£ç è€¦åˆ</strong>åœ¨ä¸€å—,ä¸ç›´è§‚</li><li>æ¯ä¸ªä¸šåŠ¡æ–¹æ³•éƒ½æ·»åŠ å…œåº•,é‚£<strong>ä»£ç è†¨èƒ€</strong>åŠ å‰§</li><li><strong>å…¨å±€ç»Ÿä¸€çš„å¤„ç†æ–¹æ³•æ²¡æœ‰ä½“ç°</strong></li></ul><h4 id="_4-å®¢æˆ·è‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_4-å®¢æˆ·è‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘" aria-hidden="true">#</a> 4. å®¢æˆ·è‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘</h4><ul><li>è·Ÿä¸šåŠ¡ä»£ç è§£è€¦</li></ul><ol><li>è‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘ customerBlockHandler</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/rateLimit/customerBlockHandler&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;customerBlockHandler&quot;</span><span class="token punctuation">,</span>
                  <span class="token comment">// é‚£ä¸ªç±»</span>
        blockHandlerClass <span class="token operator">=</span> <span class="token class-name">CustomerBlockHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
                  <span class="token comment">// é‚£ä¸ªæ–¹æ³•</span>
        blockHandler <span class="token operator">=</span> <span class="token string">&quot;handlerException2&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">customerBlockHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">&quot;æŒ‰å®¢æˆ·è‡ªå®šä¹‰&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Payment</span><span class="token punctuation">(</span><span class="token number">2020L</span><span class="token punctuation">,</span><span class="token string">&quot;serial002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomerBlockHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CommonResult</span> <span class="token function">handlerException</span><span class="token punctuation">(</span><span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">4444</span><span class="token punctuation">,</span><span class="token string">&quot;æŒ‰å®¢æˆ·è‡ªå®šä¹‰ï¼Œglobal handlerException-----1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CommonResult</span> <span class="token function">handlerException2</span><span class="token punctuation">(</span><span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">4444</span><span class="token punctuation">,</span><span class="token string">&quot;æŒ‰å®¢æˆ·è‡ªå®šä¹‰ï¼Œglobal handlerException-----2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161134.png" alt=""></p><h4 id="_5-æ›´å¤šæ³¨è§£å±æ€§è¯´æ˜-å®˜ç½‘" tabindex="-1"><a class="header-anchor" href="#_5-æ›´å¤šæ³¨è§£å±æ€§è¯´æ˜-å®˜ç½‘" aria-hidden="true">#</a> 5. æ›´å¤šæ³¨è§£å±æ€§è¯´æ˜ <a href="https://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h5 id="_1-sentinelæ ¸å¿ƒapi" tabindex="-1"><a class="header-anchor" href="#_1-sentinelæ ¸å¿ƒapi" aria-hidden="true">#</a> 1. sentinelæ ¸å¿ƒAPI</h5><ul><li>sphuå®šä¹‰èµ„æº</li><li>traceå®šä¹‰ç»Ÿè®¡</li><li>contextUtilå®šä¹‰äº†ä¸Šä¸‹æ–‡</li></ul><h3 id="_8-æœåŠ¡é€šæ–­" tabindex="-1"><a class="header-anchor" href="#_8-æœåŠ¡é€šæ–­" aria-hidden="true">#</a> 8. æœåŠ¡é€šæ–­</h3><h4 id="_1-sentinelæ•´åˆribbon-openfeign-fallback" tabindex="-1"><a class="header-anchor" href="#_1-sentinelæ•´åˆribbon-openfeign-fallback" aria-hidden="true">#</a> 1. sentinelæ•´åˆribbon+openfeign+fallback</h4><p>ribbon: 9003/9004 æ¶ˆè´¹è€… 84</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#æ¿€æ´»sentinelå¯¹feignçš„æ”¯æŒ</span>
<span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>feign</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;nacos-payment-provider&quot;</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token class-name">PaymentFallbackService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/paymentSQL/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">paymentSQL</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentFallbackService</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">paymentSQL</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span><span class="token string">&quot;æœåŠ¡é™çº§è¿”å›ï¼Œ------------PaymentFallbackService&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Payment</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token string">&quot;errorSerial&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>controller</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CircleBreakerController</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SERVICE_URL</span> <span class="token operator">=</span> <span class="token string">&quot;http://nacos-payment-provider&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/fallback/{id}&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//    @SentinelResource(value = &quot;fallback&quot;) //æ²¡æœ‰é…ç½®</span>
<span class="token comment">//    @SentinelResource(value = &quot;fallback&quot;,fallback = &quot;handlerFallback&quot;) //é…ç½®äº†fallbackçš„ï¼Œfallbackåªè´Ÿè´£ä¸šåŠ¡å¼‚å¸¸</span>
<span class="token comment">//    @SentinelResource(value = &quot;fallback&quot;,blockHandler = &quot;blockHandler&quot;) // é…ç½®äº†blockHandlerï¼Œåªè´Ÿè´£sentinelæ§åˆ¶å°é…ç½®è¿è§„</span>
    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token string">&quot;handlerFallback&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;blockHandler&quot;</span><span class="token punctuation">,</span>
            exceptionsToIgnore <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">IllegalArgumentException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// é…ç½®äº†blockHandlerå’Œfallback</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> commonResult <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">SERVICE_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/paymentSQL/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;IllegalArgumentException,éæ³•å‚æ•°å¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>commonResult<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;NullPointerException,è¯¥IDæ²¡æœ‰è®°å½•ï¼Œç©ºæŒ‡é’ˆå¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> commonResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æœ¬ä¾‹æ˜¯fallback</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">handlerFallback</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Payment</span> payment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Payment</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> <span class="token string">&quot;å…œåº•å¼‚å¸¸handlerï¼Œexceptionå†…å®¹&quot;</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">blockHandler</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Payment</span> payment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Payment</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">445</span><span class="token punctuation">,</span> <span class="token string">&quot;blockHandler-sentinel é™æµï¼Œæ— æ­¤æµæ°´å·ï¼šblockException&quot;</span> <span class="token operator">+</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// --------------- open feign---------</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/paymentSQL/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">paymentSQL</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentSQL</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ç»“æœ</p></li></ul><p>==1. æ—¢è¦é…ç½®sentinel(blockHandler),åˆè¦é…ç½®fallback.ä¸¤ç§å…œåº•æ–¹æ³•==</p><p>==sentinel: ç®¡ç†sentinelæ§åˆ¶å°çš„è¿è§„å‡ºé”™,ä¸ç®¡è¿è¡Œæ—¶å¼‚å¸¸==</p><p>==fallback: ç®¡ç†è¿è¡Œæ—¶å¼‚å¸¸==</p><p>==2. å½“blockHandlerå’Œfallbackéƒ½è¿›è¡Œäº†é…ç½®,åˆ™è¢«é™æµè€Œé™çº§æŠ›å‡ºBlockExceptionæ—¶,åªä¼šè¿›è¡Œ<strong>blockHandlerå¤„ç†é€»è¾‘</strong>==</p><p>==3. feigné…ç½®fallbacké˜²æ­¢,è¢«è°ƒç”¨çš„æœåŠ¡æ–¹å®•æœº,æ¶ˆè´¹æ–¹æ´»æ´»è€—æ­»==</p><h4 id="_2-å¼‚å¸¸å¿½ç•¥å±æ€§-exceptionstoignore" tabindex="-1"><a class="header-anchor" href="#_2-å¼‚å¸¸å¿½ç•¥å±æ€§-exceptionstoignore" aria-hidden="true">#</a> 2. å¼‚å¸¸å¿½ç•¥å±æ€§ exceptionsToIgnore</h4><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161142.png" alt=""></p><p>è¿™ä¸ªå±æ€§,åœ¨æœ‰å¼‚å¸¸æ—¶,ä¸åœ¨æœ‰fallbackæ–¹æ³•å…œåº•,æ²¡æœ‰é™çº§æ•ˆæœäº†.</p><h3 id="_9-è§„åˆ™æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_9-è§„åˆ™æŒä¹…åŒ–" aria-hidden="true">#</a> 9. è§„åˆ™æŒä¹…åŒ–</h3><ul><li>å…³é—­æœåŠ¡,sentinelæ§åˆ¶å°çš„æµæ§è§„åˆ™æ¶ˆå¤±?????,æ˜¯æŒä¹…???æ˜¯ä¸´æ—¶???</li></ul><h4 id="_1-æ˜¯ä»€ä¹ˆ-2" tabindex="-1"><a class="header-anchor" href="#_1-æ˜¯ä»€ä¹ˆ-2" aria-hidden="true">#</a> 1. æ˜¯ä»€ä¹ˆ</h4><ul><li>ä¸€æ—¦é‡å¯,sentinelè§„åˆ™å°†æ¶ˆå¤±,ç”Ÿäº§ç¯å¢ƒéœ€è¦é™é…ç½®è§„åˆ™è¿›è¡Œ<strong>æŒä¹…åŒ–</strong></li></ul><h4 id="_2-æ€ä¹ˆç©" tabindex="-1"><a class="header-anchor" href="#_2-æ€ä¹ˆç©" aria-hidden="true">#</a> 2. æ€ä¹ˆç©?</h4><ul><li>å°†é™æµé…ç½®è§„åˆ™==<strong>æŒä¹…åŒ–è¿›Nacosä¿å­˜</strong>==,åªè¦åˆ·æ–°8401æŸä¸ªreståœ°å€,sentinelæ§åˆ¶å°çš„æµæ§è§„åˆ™å°±èƒ½çœ‹åˆ°,åªè¦Nacosé‡Œé¢çš„é…ç½®ä¸åˆ é™¤,é’ˆå¯¹8401ä¸Šçš„sentinelä¸Šçš„æµæ§è§„åˆ™æŒç»­æœ‰æ•ˆ.</li></ul><h4 id="_3-å®ç°æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_3-å®ç°æ­¥éª¤" aria-hidden="true">#</a> 3. å®ç°æ­¥éª¤</h4><ol><li><p>ä¾èµ–</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--sentinel-datasource-nacos åç»­æŒä¹…åŒ–ç”¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloudalibaba<span class="token punctuation">-</span>sentinel<span class="token punctuation">-</span>service
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token comment"># NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token comment"># sentinel dashboard åœ°å€</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>
        <span class="token comment"># é»˜è®¤ä¸º8719ï¼Œå¦‚æœè¢«å ç”¨ä¼šè‡ªåŠ¨+1ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
      <span class="token comment"># æµæ§è§„åˆ™æŒä¹…åŒ–åˆ°nacos</span>
      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">dsl</span><span class="token punctuation">:</span>
          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
            <span class="token comment"># data-id: ${spring.application.name}</span>
            <span class="token key atrule">data-id</span><span class="token punctuation">:</span> cloudalibaba<span class="token punctuation">-</span>sentinel<span class="token punctuation">-</span>service
            <span class="token key atrule">group-id</span><span class="token punctuation">:</span> DEFAULT_GROUP
            <span class="token key atrule">data-type</span><span class="token punctuation">:</span> json
            <span class="token key atrule">rule-type</span><span class="token punctuation">:</span> flow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>nacosé…ç½®</p><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161149.png" alt=""></p></li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/rateLime/byUrl&quot;</span><span class="token punctuation">,</span> # èµ„æºåç§°
        <span class="token property">&quot;limitApp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> # æ¥æºåº”ç”¨
        <span class="token property">&quot;grade&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # é˜ˆå€¼ç±»å‹<span class="token punctuation">,</span><span class="token number">0</span>è¡¨ç¤ºçº¿ç¨‹æ•°<span class="token punctuation">,</span><span class="token number">1</span>è¡¨ç¤ºQPS
        <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # å•çº§é˜ˆå€¼
        <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # æµæ§æ¨¡å¼<span class="token punctuation">,</span><span class="token number">0</span>è¡¨ç¤ºç›´æ¥<span class="token punctuation">,</span><span class="token number">1</span>è¡¨ç¤ºå…³è”<span class="token punctuation">,</span><span class="token number">2</span>è¡¨ç¤ºé“¾è·¯
        <span class="token property">&quot;controlBehavior&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # æµæ§æ•ˆæœ<span class="token punctuation">,</span><span class="token number">1</span>è¡¨ç¤ºWarm Up<span class="token punctuation">,</span><span class="token number">2</span>è¡¨ç¤ºæ’é˜Ÿç­‰å¾…
        <span class="token property">&quot;clusterModer&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> # æ˜¯å¦é›†ç¾¤
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>æ³¨æ„äº‹é¡¹ <ul><li>é‡å¯åå¤šæ¬¡è°ƒç”¨</li></ul></li></ol><h2 id="_4-springcloud-alibaba-seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_4-springcloud-alibaba-seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" aria-hidden="true">#</a> 4. SpringCloud Alibaba Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡</h2><p><strong>åˆ†å¸ƒå¼é—®é¢˜ï¼š</strong></p><p>å•ä½“åº”ç”¨è¢«æ‹†åˆ†æˆå¾®æœåŠ¡åº”ç”¨ï¼ŒåŸæ¥çš„ä¸‰ä¸ªæ¨¡å—è¢«æ‹†åˆ†æˆä¸‰ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„æ•°æ®æºï¼Œä¸šåŠ¡æ“ä½œéœ€è¦è°ƒç”¨ä¸‰ä¸ªæœåŠ¡æ¥å®Œæˆã€‚æ­¤æ—¶æ¯ä¸ªæœåŠ¡å†…éƒ¨çš„æ•°æ®ä¸€è‡´æ€§ç”±æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯ï¼Œä½†æ˜¯å…¨å±€çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ²¡æ³•ä¿è¯</p><h3 id="_1-seateæ¦‚è¿°-å®˜ç½‘" tabindex="-1"><a class="header-anchor" href="#_1-seateæ¦‚è¿°-å®˜ç½‘" aria-hidden="true">#</a> 1. seateæ¦‚è¿° <a href="https://seata.io/zh-cn/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><p>Seataæ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ã€‚</p><h4 id="_1-èƒ½å¹²å•¥" tabindex="-1"><a class="header-anchor" href="#_1-èƒ½å¹²å•¥" aria-hidden="true">#</a> 1. èƒ½å¹²å•¥?</h4><p>åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†è¿‡ç¨‹çš„ä¸€ID+ä¸‰ç»„ä»¶æ¨¡å‹ï¼š</p><table><thead><tr><th><strong>Transaction ID XID</strong></th><th><strong>å…¨å±€å”¯ä¸€çš„äº‹åŠ¡ID</strong></th></tr></thead><tbody><tr><td>Transaction Coordinator(TC)</td><td>==äº‹åŠ¡åè°ƒå™¨==ï¼Œç»´æŠ¤å…¨å±€äº‹åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œè´Ÿè´£åè°ƒå¹¶é©±åŠ¨äº‹åŠ¡çš„æäº¤æˆ–å›æ»š</td></tr><tr><td>Transaction Manager(TM )</td><td>==äº‹åŠ¡ç®¡ç†å™¨,==æ§åˆ¶å…¨å±€äº‹åŠ¡çš„è¾¹ç•Œï¼Œè´Ÿè´£å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œå¹¶æœ€ç»ˆå‘èµ·å…¨å±€æäº¤æˆ–å…¨å±€å›æ»šçš„å†³è®®</td></tr><tr><td>Resource Manager(RM)</td><td>==èµ„æºç®¡ç†å™¨==æ§åˆ¶åˆ†æ”¯äº‹åŠ¡ï¼Œè´Ÿè´£åˆ†æ”¯æ³¨å†Œã€çŠ¶æ€æ±‡æŠ¥ï¼Œå¹¶æ¥æ”¶äº‹åŠ¡åè°ƒå™¨çš„æŒ‡ä»¤ï¼Œé©±åŠ¨åˆ†æ”¯(æœ¬åœ°)äº‹åŠ¡çš„æäº¤æˆ–å›æ»š</td></tr></tbody></table><p>å¤„ç†è¿‡ç¨‹ï¼šRM:</p><ol><li>TMå‘TCç”³è¯·å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œå…¨å±€äº‹åŠ¡åˆ›å»ºæˆåŠŸå¹¶ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„XID</li><li>XIDåœ¨å¾®æœåŠ¡è°ƒç”¨é“¾è·¯çš„ä¸Šä¸‹æ–‡ä¸­ä¼ æ’­</li><li>RMå‘TCæ³¨å†Œåˆ†æ”¯äº‹åŠ¡ï¼Œå°†å…¶çº³å…¥XIDå¯¹åº”å…¨å±€äº‹åŠ¡çš„ç®¡è¾–</li><li>TMå‘TCå‘èµ·é’ˆå¯¹XIDçš„å…¨å±€æäº¤æˆ–å›æ»šå†³è®®</li><li>TCè°ƒåº¦XIDä¸‹ç®¡è¾–çš„å…¨éƒ¨åˆ†æ”¯äº‹åŠ¡å®Œæˆæäº¤æˆ–å›æ»š</li></ol><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161154.png" alt=""></p><h4 id="_2-ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_2-ä¸‹è½½" aria-hidden="true">#</a> 2. <a href="https://seata.io/zh-cn/blog/download.html" target="_blank" rel="noopener noreferrer">ä¸‹è½½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h4 id="_3-æ€ä¹ˆç©" tabindex="-1"><a class="header-anchor" href="#_3-æ€ä¹ˆç©" aria-hidden="true">#</a> 3. æ€ä¹ˆç©</h4><ul><li><p>ä»¥å‰äº‹åŠ¡ @Transactional</p></li><li><p>ç°åœ¨ ==@GlobalTransactional==</p></li></ul><h4 id="_5-seateé…ç½®" tabindex="-1"><a class="header-anchor" href="#_5-seateé…ç½®" aria-hidden="true">#</a> 5. seateé…ç½®</h4><ul><li>è‡ªå®šä¹‰äº‹åŠ¡ç»„åç§°+äº‹åŠ¡æ—¥å¿—å­˜å‚¨æ¨¡å¼ä¸ºdb+æ•°æ®åº“è¿æ¥ä¿¡æ¯</li></ul><h5 id="_1-file-conf-serviceæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-file-conf-serviceæ¨¡å—" aria-hidden="true">#</a> 1. file.conf serviceæ¨¡å—</h5><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161200.png" alt=""></p><ul><li>storeæ¨¡å—</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161205.png" alt=""></p><ul><li>db</li></ul><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161209.png" alt=""></p><h5 id="_2-æ•°æ®æ§åº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_2-æ•°æ®æ§åº“è¡¨" aria-hidden="true">#</a> 2. æ•°æ®æ§åº“è¡¨</h5><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- the table to store GlobalSession data</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token identifier"><span class="token punctuation">`</span>global_table<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>global_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>  <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>transaction_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>application_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>transaction_service_group<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>transaction_name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>timeout<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>begin_time<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>application_data<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_create<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_modified<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">key</span> <span class="token identifier"><span class="token punctuation">`</span>idx_gmt_modified_status<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gmt_modified<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">key</span> <span class="token identifier"><span class="token punctuation">`</span>idx_transaction_id<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>transaction_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">-- the table to store BranchSession data</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token identifier"><span class="token punctuation">`</span>branch_table<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>branch_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>branch_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>transaction_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>resource_group_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>resource_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>lock_key<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>branch_type<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>client_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>application_data<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_create<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_modified<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>branch_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">key</span> <span class="token identifier"><span class="token punctuation">`</span>idx_xid<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">-- the table to store lock data</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token identifier"><span class="token punctuation">`</span>lock_table<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>lock_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>row_key<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>xid<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>transaction_id<span class="token punctuation">`</span></span> long <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>branch_id<span class="token punctuation">`</span></span> long<span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>resource_id<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>pk<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_create<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>gmt_modified<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>row_key<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-register-conf" tabindex="-1"><a class="header-anchor" href="#_3-register-conf" aria-hidden="true">#</a> 3. register.conf</h5><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161216.bmp" alt=""></p><h3 id="_2-æ¡ˆä¾‹-1" tabindex="-1"><a class="header-anchor" href="#_2-æ¡ˆä¾‹-1" aria-hidden="true">#</a> 2. æ¡ˆä¾‹</h3><h4 id="_1-ä¾èµ–-2" tabindex="-1"><a class="header-anchor" href="#_1-ä¾èµ–-2" aria-hidden="true">#</a> 1. ä¾èµ–</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>seata-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/20210223161221.png" alt=""></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/chggx-knowlodge-vuepress/java/framework/springcloud/1.SpringCloud.H%E5%9F%BA%E7%A1%80.html" class="" aria-label="SpringCloud.HåŸºç¡€"><!--[--><!--]--> SpringCloud.HåŸºç¡€ <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/chggx-knowlodge-vuepress/assets/app.099ebd34.js" defer></script>
  </body>
</html>
