(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{443:function(s,t,n){"use strict";n.r(t);var a=n(2),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"配置开发环境-将程序配置为服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置开发环境-将程序配置为服务"}},[s._v("#")]),s._v(" 配置开发环境-将程序配置为服务")]),s._v(" "),t("h2",{attrs:{id:"将程序配置为服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将程序配置为服务"}},[s._v("#")]),s._v(" 将程序配置为服务 😄")]),s._v(" "),t("h3",{attrs:{id:"配置信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置信息"}},[s._v("#")]),s._v(" 配置信息")]),s._v(" "),t("p",[s._v("systemctl启动服务编写\nCentos7的服务systemctl脚本存放在："),t("code",[s._v("/usr/lib/systemd/")]),s._v("目录下，有系统（system）和用户（user）之分，一般需要开机不登录就能运行的程序，就存放在"),t("code",[s._v("/usr/lib/systemd/system/")]),s._v("目录下")]),s._v(" "),t("p",[s._v("每一个服务以.service结尾，一般会分为3部分：[Unit]、[Service]和[Install]，以nginx为实例如下：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/systemd/system/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx-server\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ExecStart需要按照实际情况修改成自己的地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/nginx/sbin/nginx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("Nginx配置如下")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/20220702175006.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作命令"}},[s._v("#")]),s._v(" 操作命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl start nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx服务：")]),s._v("\nsystemctl stop nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止nginx服务")]),s._v("\nsystemctl status nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx服务状态")]),s._v("\nsystemctl restart nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启nginx服务")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机自启动")]),s._v("\nsystemctl disable nginx.service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止开机自启动")]),s._v("\nsystemctl list-units "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有已经启动的服务")]),s._v("\nsystemctl daemon-reload "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改完配置文件后，重新加载配置文件,")]),s._v("\nsystemctl reload nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查防火墙状态 看到active(running)就意味着防火墙打开了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status firewalld\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop firewalld\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start firewalld\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面的命令是临时的，重启后就失效了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 彻底关闭防火墙")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable firewalld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("参考：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/sinron_wu/article/details/105216132",target:"_blank",rel:"noopener noreferrer"}},[s._v("三种开机自启方式"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://blog.csdn.net/weixin_45876097/article/details/120378316",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux启动配置文件"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://longgege.blog.csdn.net/article/details/109781230",target:"_blank",rel:"noopener noreferrer"}},[s._v("systemctl设置开机自启"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);