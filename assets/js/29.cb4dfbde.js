(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{353:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jvm-程序计数器-pc寄存器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm-程序计数器-pc寄存器"}},[s._v("#")]),s._v(" JVM-程序计数器(PC寄存器)")]),s._v(" "),a("h2",{attrs:{id:"_1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[s._v("#")]),s._v(" 1. 介绍")]),s._v(" "),a("p",[s._v("JVM中的程序计数寄存器（Program Counter Register）中，Register的命名源于CPU的寄存器，寄存器存储指令相关的现场信息。CPU只有把数据装载到寄存器才能够运行。这里，并非是广义上所指的物理寄存器，或许将其翻译为PC计数器（或指令计数器）会更加贴切（也称为程序钩子），并且也不容易引起一些不必要的误会。JVM中的PC寄存器是对物理PC寄存器的一种抽象模拟。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E7%AE%80%E5%9B%BE.png",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("栈没有垃圾回收,有内存溢出(OOM)")]),s._v(" "),a("p",[s._v("堆和方法区有垃圾回收(GC/OOM)")]),s._v(" "),a("p",[s._v("PC寄存器没有GC和OOM")])]),s._v(" "),a("h2",{attrs:{id:"_2-作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-作用"}},[s._v("#")]),s._v(" 2. 作用")]),s._v(" "),a("p",[a("code",[s._v("PC寄存器用来存储指向下一条指令的地址")]),s._v("，也即将要执行的指令代码。由执行引擎读取下一条指令。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/PC%E5%AF%84%E5%AD%98%E5%99%A8%E4%BD%9C%E7%94%A8.png",alt:""}})]),s._v(" "),a("p",[s._v("它是一块很小的内存空间，几乎可以忽略不记。也是运行速度最快的存储区域。")]),s._v(" "),a("p",[s._v("在JVM规范中，每个线程都有它自己的程序计数器，是线程私有的，生命周期与线程的生命周期保持一致。")]),s._v(" "),a("p",[s._v("任何时间一个线程都只有一个方法在执行，也就是所谓的"),a("code",[s._v("当前方法")]),s._v("。程序计数器会存储当前线程正在执行的Java方法的JVM指令地址；或者，如果是在执行native方法，则是未指定值（undefned）。")]),s._v(" "),a("p",[s._v("它是程序控制流的指示器，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令。")]),s._v(" "),a("p",[s._v("它是唯一一个在Java虚拟机规范中没有规定任何outotMemoryError情况的区域。")]),s._v(" "),a("blockquote",[a("p",[s._v("游标,集合迭代器")])]),s._v(" "),a("h2",{attrs:{id:"_3-案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-案例"}},[s._v("#")]),s._v(" 3. 案例")]),s._v(" "),a("p",[s._v("我们首先写一个简单的代码")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @Author: CHGGX\n * @Date: 2020/09/06 8:26\n * @Description: <h1> PC寄存器案例 </h1>\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PCRegisterTest")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("反编译命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("javap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-verbose")]),s._v(" PCRegisterTest.class\n或者 javap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" PCRegisterTest.class\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("得到下面结果")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Classfile /D:/java-code/java/jvm/target/classes/com/chggx/jvm/chapter04/PCRegi\nsterTest.class\n  Last modified "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-9-6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("501")]),s._v(" bytes\n  MD5 checksum 588b9b406f9e4a1537c4970fa22c6fd7\n  Compiled from "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PCRegisterTest.java"')]),s._v("\npublic class com.chggx.jvm.chapter04.PCRegisterTest\n  minor version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  major version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool:\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#1 = Methodref          #3.#21         // java/lang/Object."<init>":()V')]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 = Class              #22            // com/chggx/jvm/chapter04/PCRegiste")]),s._v("\nrTest\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 = Class              #23            // java/lang/Object")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4 = Utf8               <init>")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5 = Utf8               ()V")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6 = Utf8               Code")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#7 = Utf8               LineNumberTable")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#8 = Utf8               LocalVariableTable")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#9 = Utf8               this")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#10 = Utf8               Lcom/chggx/jvm/chapter04/PCRegisterTest;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#11 = Utf8               main")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#12 = Utf8               ([Ljava/lang/String;)V")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#13 = Utf8               args")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#14 = Utf8               [Ljava/lang/String;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#15 = Utf8               i")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#16 = Utf8               I")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#17 = Utf8               j")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#18 = Utf8               k")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#19 = Utf8               SourceFile")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#20 = Utf8               PCRegisterTest.java")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#21 = NameAndType        #4:#5          // "<init>":()V')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#22 = Utf8               com/chggx/jvm/chapter04/PCRegisterTest")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#23 = Utf8               java/lang/Object")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  public com.chggx.jvm.chapter04.PCRegisterTest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n    flags: ACC_PUBLIC\n    Code:\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("locals")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("args_size")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": invokespecial "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#1                  // Method java/lang/Object."<ini')]),s._v("\nt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('":()V\n         4: return\n      LineNumberTable:\n        line 8: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   Lcom/chggx/jvm/chapter04/PCRegisterTest;\n\n  public static void main(java.lang.String[]);\n    descriptor: ([Ljava/lang/String;)V\n    flags: ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=2, locals=4, args_size=1\n         0: bipush        10\n         2: istore_1\n         3: bipush        20\n         5: istore_2\n         6: iload_1\n         7: iload_2\n         8: iadd\n         9: istore_3\n        10: return\n      LineNumberTable:\n        line 11: 0\n        line 12: 3\n        line 13: 6\n        line 14: 10\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0      11     0  args   [Ljava/lang/String;\n            3       8     1     i   I\n            6       5     2     j   I\n           10       1     3     k   I\n}\nSourceFile: "')]),s._v('PCRegisterTest.java"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br")])]),a("p",[s._v("从上面反编译结果可以看出: 发现在字节码的左边有一个行号标识，它其实就是指令地址，用于指向当前执行到哪里。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("locals")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("args_size")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": bipush        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": istore_1\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": bipush        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": istore_2\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(": iload_1\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(": iload_2\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(": iadd\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(": istore_3\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/%E5%8F%8D%E7%BC%96%E8%AF%91.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_4-常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-常见问题"}},[s._v("#")]),s._v(" 4. 常见问题")]),s._v(" "),a("h3",{attrs:{id:"使用pc寄存器存储字节码指令地址有什么用呢-问什么使用pc寄存器记录当前线程执行地址呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用pc寄存器存储字节码指令地址有什么用呢-问什么使用pc寄存器记录当前线程执行地址呢"}},[s._v("#")]),s._v(" 使用PC寄存器存储字节码指令地址有什么用呢？（问什么使用PC寄存器记录当前线程执行地址呢？）")]),s._v(" "),a("p",[s._v("因为CPU需要不停地奇幻各个线程，这个时候切换回来以后，就得知道接着从哪开始继续执行。")]),s._v(" "),a("p",[s._v("JVM的字节码解释器就需要通过改变PC寄存器的值来明确下一跳应该执行什么样的字节码指令。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/%E4%BD%BF%E7%94%A8PC%E5%AF%84%E5%AD%98%E5%99%A8%E5%AD%98%E5%82%A8%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4%E5%9C%B0%E5%9D%80%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%E5%91%A2%EF%BC%9F.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"pc寄存器问什么会被设定为私有的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pc寄存器问什么会被设定为私有的"}},[s._v("#")]),s._v(" PC寄存器问什么会被设定为私有的？")]),s._v(" "),a("p",[s._v("我们都知道所谓的多线程在一个特定的时间段内只会执行其中一个线程的方法，CPU会不停的做任务切换，这样必然导致经常中断或恢复，如何保证分毫无差呢？"),a("code",[s._v("为了能够准确的记录各个线程正在执行的当前字节码指令地址，最好的办法自然是为每一个线程都分配一个PC寄存器")]),s._v("。这样一来各个线程之间便可以进行独立计算，从而不会出现相互干扰的情况。")]),s._v(" "),a("p",[s._v("由于CPU时间片轮限制，众多线程在并发执行过程中，任何一个确定的是哦，一个处理器或者多个处理器中的一个内核，只会执行某个线程中的一条指令。")]),s._v(" "),a("p",[s._v("这个必然导致经常中断或恢复，如何保证分毫无差呢？每个线程在创建后，都会产生自己的程序计数器和栈帧，程序计数器在各个线程之间互不影响。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/PC%E5%AF%84%E5%AD%98%E5%99%A8%E9%97%AE%E4%BB%80%E4%B9%88%E4%BC%9A%E8%A2%AB%E8%AE%BE%E5%AE%9A%E4%B8%BA%E7%A7%81%E6%9C%89%E7%9A%84%EF%BC%9F.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"cpu时间片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpu时间片"}},[s._v("#")]),s._v(" CPU时间片")]),s._v(" "),a("p",[s._v("CPU时间片即CPU分配给各个程序的时间，每个线程被分配一个时间段，称作它的时间片。")]),s._v(" "),a("p",[s._v("在宏观上：我们可以同时打开多个应用程序，每个程序并行不悖，同时运行。")]),s._v(" "),a("p",[s._v("但在微观上：由于只有一个CPU，一次只能处理程序要求的一部分，如何处理公平，一种方法就是引入时间片，每个程序轮流执行。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/2022/CPU%E6%97%B6%E9%97%B4%E7%89%87.png",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);