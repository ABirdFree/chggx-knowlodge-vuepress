(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{516:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"elasticsearch-概述和安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-概述和安装"}},[a._v("#")]),a._v(" ElasticSearch-概述和安装")]),a._v(" "),s("blockquote",[s("p",[a._v("本次ElasticSearch版本 "),s("code",[a._v("ElasticSearch7.6.1")]),a._v(",Java版本 "),s("code",[a._v("Java8")])]),a._v(" "),s("p",[a._v("环境资源 :")]),a._v(" "),s("p",[a._v("​\t链接："),s("a",{attrs:{href:"https://pan.baidu.com/s/1zJHCPe2vB0KguE_DhknhMA",target:"_blank",rel:"noopener noreferrer"}},[a._v("地址"),s("OutboundLink")],1),a._v("  提取码：h7n4")])]),a._v(" "),s("h2",{attrs:{id:"_1-elasticsearch概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-elasticsearch概述"}},[a._v("#")]),a._v(" 1. ElasticSearch概述")]),a._v(" "),s("p",[a._v("Elaticsearch，简称为es， es是一个开源的"),s("code",[a._v("高扩展")]),a._v("的"),s("code",[a._v("分布式全文检索引擎")]),a._v("，它可以近乎"),s("code",[a._v("实时的存储、检索数据")]),a._v("；本身扩展性很好，可以扩展到上百台服务器，处理PB级别（大数据时代）的数据。es也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的"),s("code",[a._v("RESTful API")]),a._v("来隐藏Lucene的复杂性，从而让全文搜索变得简单。")]),a._v(" "),s("h2",{attrs:{id:"_2-es安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-es安装"}},[a._v("#")]),a._v(" 2. ES安装")]),a._v(" "),s("blockquote",[s("p",[a._v("声明：JDK1.8 ，最低要求！ ElasticSearch 客户端，界面工具！")]),a._v(" "),s("p",[a._v("Java开发，ElasticSearch 的版本和我们之后对应的 Java 的核心jar包！ 版本对应！JDK 环境是正常！")])]),a._v(" "),s("h3",{attrs:{id:"_2-1-下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-下载"}},[a._v("#")]),a._v(" 2.1 下载")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.elastic.co/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官网"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160313-571506.png",alt:""}})]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.elastic.co/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160318-715834.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_2-2-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-安装"}},[a._v("#")]),a._v(" 2.2 安装")]),a._v(" "),s("h4",{attrs:{id:"解压即可"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压即可"}},[a._v("#")]),a._v(" 解压即可")]),a._v(" "),s("h4",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[a._v("#")]),a._v(" 目录结构")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160320-170395.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("功能")])]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("bin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("启动文件 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("config")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("配置文件 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlog4j2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("日志配置文件 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tjvm.options")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("java 虚拟机相关的配置  配置ES内存参数 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\telasticsearch.yml")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("elasticsearch 的配置文件！ 默认 9200 端口！ 跨域！ ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("lib")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("相关jar包 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("logs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("日志！ ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("modules")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("功能模块 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("plugins")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("插件！")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h4",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("p",[a._v("双击 "),s("code",[a._v("bin")]),a._v(" 目录下的 "),s("code",[a._v("elasticsearch.bat")]),a._v(" 启动ES")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160324-722026.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("使用Java版本,需要"),s("code",[a._v("Java11")]),a._v(",这里使用"),s("code",[a._v("Java8")]),a._v(".")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160322-724639.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("默认端口号: 9200")]),a._v(" "),s("p",[a._v("通信端口号: 9300")])]),a._v(" "),s("h4",{attrs:{id:"访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[a._v("#")]),a._v(" 访问")]),a._v(" "),s("p",[a._v("地址 http://localhost:9200/")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160327-343123.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_2-3-安装可视化界面-es-head的插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-安装可视化界面-es-head的插件"}},[a._v("#")]),a._v(" 2.3 安装可视化界面 es head的插件")]),a._v(" "),s("h4",{attrs:{id:"下载地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载地址"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://github.com/mobz/elasticsearch-head/",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("此项目需要环境 "),s("code",[a._v("node.js")]),a._v(" ,"),s("code",[a._v("npm")])]),a._v(" "),s("h4",{attrs:{id:"启动-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-2"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run start\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h4",{attrs:{id:"连接测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连接测试"}},[a._v("#")]),a._v(" 连接测试")]),a._v(" "),s("p",[a._v("访问 http://localhost:9100/")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160330-370119.png",alt:""}})]),a._v(" "),s("p",[s("strong",[a._v("存在跨域问题")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("配置es, 修改 "),s("code",[a._v("elasticsearch.yaml")]),a._v(" 添加如下:")])]),a._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("http.cors.enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("http.cors.allow-origin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h4",{attrs:{id:"重启es服务器-然后再次连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重启es服务器-然后再次连接"}},[a._v("#")]),a._v(" 重启es服务器，然后再次连接")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160338-564498.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("这个head我们就把它当做数据展示工具！我们后面所有的查询，使用"),s("code",[a._v("Kibana")]),a._v(" ！")])]),a._v(" "),s("h3",{attrs:{id:"_2-4-了解-elk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-了解-elk"}},[a._v("#")]),a._v(" 2.4 了解 ELK")]),a._v(" "),s("p",[s("code",[a._v("ELK")]),a._v("是"),s("code",[a._v("Elasticsearch、Logstash、Kibana")]),a._v("三大开源框架首字母大写简称。市面上也被成为Elastic Stack。")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("Elasticsearch是一个基于Lucene、分布式、通过Restful方式进行交互的近实时搜索平台框架。像类似百度、谷歌这种大数据全文搜索引擎的场景都可以使用Elasticsearch作为底层支持框架，可见Elasticsearch提供的搜索能力确实强大,市面上很多时候我们简称Elasticsearch为es。")])]),a._v(" "),s("li",[s("p",[a._v("Logstash是ELK的中央数据流引擎，用于从不同目标（文件/数据存储/MQ）收集的不同格式数据，经过过滤后支持输出到不同目的地（文件/MQ/redis/elasticsearch/kafka等）。Kibana可以将elasticsearch的数据通过友好的页面展示出来，提供实时分析的功能。")])])]),a._v(" "),s("h3",{attrs:{id:"_2-5-kibana"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-kibana"}},[a._v("#")]),a._v(" 2.5 "),s("a",{attrs:{href:"https://www.elastic.co/cn/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibana"),s("OutboundLink")],1)]),a._v(" "),s("h4",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),s("p",[a._v("Kibana是一个"),s("code",[a._v("针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据")]),a._v("。使用Kibana，可以通过各种图表进行高级数据分析及展示。Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显Elasticsearch查询动态。设置Kibana非常简单。无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动Elasticsearch索引监测。")]),a._v(" "),s("h4",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://www.elastic.co/cn/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160340-540068.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("Kibana 版本要和 Es 一致！")])]),a._v(" "),s("h4",{attrs:{id:"解压目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压目录"}},[a._v("#")]),a._v(" 解压目录")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160342-579071.png",alt:""}})]),a._v(" "),s("h4",{attrs:{id:"启动-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-3"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("p",[a._v("双击 "),s("code",[a._v("bin")]),a._v(" 目录下 "),s("code",[a._v("kibana.bat")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160345-996622.png",alt:""}})]),a._v(" "),s("h4",{attrs:{id:"访问-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问-2"}},[a._v("#")]),a._v(" 访问")]),a._v(" "),s("p",[a._v("http://localhost:5601")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160347-752251.png",alt:""}})]),a._v(" "),s("h4",{attrs:{id:"测试工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试工具"}},[a._v("#")]),a._v(" 测试工具")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/160349-776795.png",alt:""}})]),a._v(" "),s("blockquote",[s("p",[a._v("开发工具！ （Post、curl、head、谷歌浏览器插件测试！）")])]),a._v(" "),s("h4",{attrs:{id:"汉化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#汉化"}},[a._v("#")]),a._v(" 汉化")]),a._v(" "),s("ul",[s("li",[a._v("在 "),s("code",[a._v("x-pack\\plugins\\translations\\translations\\zh-CN.json")]),a._v(" 已有中文设置")])]),a._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"messages"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"common.ui.aggResponse.allDocsTitle"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"所有文档"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"common.ui.aggResponse.fieldLabel"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"字段"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"common.ui.aggResponse.valueLabel"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"值"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"xpack.watcher.watchEdit.thresholdWatchExpression.aggType.fieldIsRequiredValidationMessage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"此字段必填。"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"xpack.watcher.watcherDescription"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"通过创建、管理和监测警报来检测数据中的更改。"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("ul",[s("li",[a._v("修改 "),s("code",[a._v("config\\kibana.yml")])])]),a._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Specifies locale to be used for all localizable strings, dates and number formats.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Supported languages are the following: English - en , by default , Chinese - zh-CN .")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('#i18n.locale: "en"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("i18n.locale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"zh-CN"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[a._v("访问")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/161859-96714.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"_3-es核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-es核心概念"}},[a._v("#")]),a._v(" 3. ES核心概念")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("索引")])]),a._v(" "),s("li",[s("p",[a._v("字段类型（mapping）")])]),a._v(" "),s("li",[s("p",[a._v("文档（documents）")])])]),a._v(" "),s("blockquote",[s("p",[a._v("elasticsearch是"),s("code",[a._v("面向文档")]),a._v("，关系行数据库 和 elasticsearch 客观的对比！一切都是"),s("code",[a._v("JSON")]),a._v("！")])]),a._v(" "),s("h3",{attrs:{id:"_3-1-关系行数据库-和-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-关系行数据库-和-elasticsearch"}},[a._v("#")]),a._v(" 3.1 关系行数据库 和 elasticsearch")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[a._v("Relational DB")]),a._v(" "),s("code",[a._v("[MySQL]")])]),a._v(" "),s("th",[s("strong",[a._v("Elasticsearch")])])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("数据库(database)")]),a._v(" "),s("td",[a._v("索引(indices)")])]),a._v(" "),s("tr",[s("td",[a._v("表(tables)")]),a._v(" "),s("td",[a._v("类型(types) "),s("code",[a._v("[会被弃用]")])])]),a._v(" "),s("tr",[s("td",[a._v("行(rows)")]),a._v(" "),s("td",[a._v("文档（documents）")])]),a._v(" "),s("tr",[s("td",[a._v("字段(columns)")]),a._v(" "),s("td",[a._v("域(fields)")])])])]),a._v(" "),s("blockquote",[s("p",[a._v("elasticsearch(集群)中可以包含多个索引(数据库)，每个索引中可以包含多个类型(表)，每个类型下又包含多 个文档(行)，每个文档中又包含多个字段(列)。")])]),a._v(" "),s("h3",{attrs:{id:"_3-2-逻辑设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-逻辑设计"}},[a._v("#")]),a._v(" 3.2 逻辑设计")]),a._v(" "),s("p",[a._v("elasticsearch 在后台把每个"),s("code",[a._v("索引划分成多个分片")]),a._v("，每分分片可以在集群中的不同服务器间迁移")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("一个elasticsearch 就是一个集群！默认的集群名称就是 elaticsearh")])])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/161902-895104.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_3-3-逻辑设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-逻辑设计"}},[a._v("#")]),a._v(" 3.3 逻辑设计")]),a._v(" "),s("p",[s("code",[a._v("一个索引类型中，包含多个文档")]),a._v("，比如说文档1，文档2。 当我们索引一篇文档时，可以通过这样的一各顺序找到 它: 索引 ▷ 类型 ▷ 文档ID ，通过这个组合我们就能索引到某个具体的文档。 注意:ID不必是整数，实际上它是个字符串。")]),a._v(" "),s("h4",{attrs:{id:"文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[a._v("#")]),a._v(" 文档")]),a._v(" "),s("blockquote",[s("p",[a._v("就是一条数据")])]),a._v(" "),s("p",[a._v("就是我们的一条条数据")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("user")]),a._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("zhangsan 18 ")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("kuangshen 3")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("之前说elasticsearch是面向文档的，那么就意味着"),s("code",[a._v('索引和搜索数据的最小单位是 "文档"')]),a._v("，elasticsearch中，文档有几个 重要属性 :")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("自我包含，一篇文档同时包含字段和对应的值，也就是同时包含 key:value！")])]),a._v(" "),s("li",[s("p",[a._v("可以是层次型的，一个文档中包含自文档，复杂的逻辑实体就是这么来的！ {就是一个json对象！fastjson进行自动转换！}")])]),a._v(" "),s("li",[s("p",[a._v("灵活的结构，文档不依赖预先定义的模式，我们知道关系型数据库中，要提前定义字段才能使用，在elasticsearch中，对于字段是非常灵活的，有时候，我们可以忽略该字段，或者动态的添加一个新的字段。")])])]),a._v(" "),s("p",[a._v("尽管我们可以随意的新增或者忽略某个字段，但是，每个字段的类型非常重要，比如一个年龄字段类型，可以是字符 串也可以是整形。因elasticsearch会保存字段和类型之间的映射及其他的设置。这种映射具体到每个映射的每种类型，这也是为什么在elasticsearch中，类型有时候也称为"),s("code",[a._v("映射类型")]),a._v("。")]),a._v(" "),s("h4",{attrs:{id:"类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型"}},[a._v("#")]),a._v(" 类型")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202010/02/161904-884130.png",alt:""}})]),a._v(" "),s("p",[a._v("类型是文档的逻辑容器，就像关系型数据库一样，表格是行的容器。 类型中对于字段的定义称为映射，比如 name 映 射为字符串类型。 我们说文档是无模式的，它们不需要拥有映射中所定义的所有字段，比如新增一个字段，那么elasticsearch是怎么做的呢?elasticsearch会自动的将新字段加入映射，但是这个字段的不确定它是什么类型，elasticsearch就开始猜，如果这个值是18，那么elasticsearch会认为它是整形。 但是elasticsearch也可能猜不对， 所以最安全的方式就是提前定义好所需要的映射，这点跟关系型数据库殊途同归了，先定义好字段，然后再使用，别整什么幺蛾子。")]),a._v(" "),s("h4",{attrs:{id:"索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[a._v("#")]),a._v(" 索引")]),a._v(" "),s("blockquote",[s("p",[a._v("就是数据库！")])]),a._v(" "),s("p",[a._v("索引是映射类型的容器，elasticsearch中的索引是一个非常大的文档集合。索引存储了映射类型的字段和其他设置。 然后它们被存储到了各个分片上了。")])])}),[],!1,null,null,null);s.default=r.exports}}]);