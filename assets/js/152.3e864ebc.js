(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{499:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"nginx-è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" Nginx-è´Ÿè½½å‡è¡¡")]),a._v(" "),s("h2",{attrs:{id:"_1-è´Ÿè½½å‡è¡¡æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-è´Ÿè½½å‡è¡¡æ¦‚è¿°"}},[a._v("#")]),a._v(" 1. è´Ÿè½½å‡è¡¡æ¦‚è¿°")]),a._v(" "),s("p",[a._v("æ—©æœŸçš„ç½‘ç«™æµé‡å’Œä¸šåŠ¡åŠŸèƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œå•å°æœåŠ¡å™¨è¶³ä»¥æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†æ˜¯éšç€äº’è”ç½‘çš„å‘å±•ï¼Œä¸šåŠ¡æµé‡è¶Šæ¥è¶Šå¤§å¹¶ä¸”ä¸šåŠ¡é€»è¾‘ä¹Ÿè·Ÿç€è¶Šæ¥è¶Šå¤æ‚ï¼Œå•å°æœåŠ¡å™¨çš„æ€§èƒ½åŠå•ç‚¹æ•…éšœé—®é¢˜å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼Œå› æ­¤éœ€è¦å¤šå°æœåŠ¡å™¨è¿›è¡Œæ€§èƒ½çš„æ°´å¹³æ‰©å±•åŠé¿å…å•ç‚¹æ•…éšœå‡ºç°ã€‚é‚£ä¹ˆå¦‚ä½•å°†ä¸åŒç”¨æˆ·çš„è¯·æ±‚æµé‡åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šå‘¢ï¼Ÿ")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021376.png",alt:"202303182021376"}})]),a._v(" "),s("h2",{attrs:{id:"_2-è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹"}},[a._v("#")]),a._v(" 2. è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹")]),a._v(" "),s("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡çš„åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çš„åŸç†"}},[a._v("#")]),a._v(" è´Ÿè½½å‡è¡¡çš„åŸç†")]),a._v(" "),s("p",[a._v("ç³»ç»Ÿçš„æ‰©å±•å¯ä»¥åˆ†ä¸ºçºµå‘æ‰©å±•å’Œæ¨ªå‘æ‰©å±•ã€‚")]),a._v(" "),s("p",[a._v("çºµå‘æ‰©å±•æ˜¯ä»å•æœºçš„è§’åº¦å‡ºå‘ï¼Œé€šè¿‡å¢åŠ ç³»ç»Ÿçš„ç¡¬ä»¶å¤„ç†èƒ½åŠ›æ¥æå‡æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›")]),a._v(" "),s("p",[a._v("æ¨ªå‘æ‰©å±•æ˜¯é€šè¿‡æ·»åŠ æœºå™¨æ¥æ»¡è¶³å¤§å‹ç½‘ç«™æœåŠ¡çš„å¤„ç†èƒ½åŠ›ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021324.png",alt:"1584602513812"}})]),a._v(" "),s("p",[a._v('è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦çš„è§’è‰²åˆ†åˆ«æ˜¯"åº”ç”¨é›†ç¾¤"å’Œ"è´Ÿè½½å‡è¡¡å™¨"ã€‚')]),a._v(" "),s("p",[a._v("åº”ç”¨é›†ç¾¤ï¼šå°†åŒä¸€åº”ç”¨éƒ¨ç½²åˆ°å¤šå°æœºå™¨ä¸Šï¼Œç»„æˆå¤„ç†é›†ç¾¤ï¼Œæ¥æ”¶è´Ÿè½½å‡è¡¡è®¾å¤‡åˆ†å‘çš„è¯·æ±‚ï¼Œè¿›è¡Œå¤„ç†å¹¶è¿”å›å“åº”çš„æ•°æ®ã€‚")]),a._v(" "),s("p",[a._v("è´Ÿè½½å‡è¡¡å™¨:å°†ç”¨æˆ·è®¿é—®çš„è¯·æ±‚æ ¹æ®å¯¹åº”çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåˆ†å‘åˆ°é›†ç¾¤ä¸­çš„ä¸€å°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚")]),a._v(" "),s("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡çš„ä½œç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çš„ä½œç”¨"}},[a._v("#")]),a._v(" è´Ÿè½½å‡è¡¡çš„ä½œç”¨ ğŸš—")]),a._v(" "),s("p",[a._v("1ã€è§£å†³æœåŠ¡å™¨çš„é«˜å¹¶å‘å‹åŠ›ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å¤„ç†æ€§èƒ½ã€‚")]),a._v(" "),s("p",[a._v("2ã€æä¾›æ•…éšœè½¬ç§»ï¼Œå®ç°é«˜å¯ç”¨ã€‚")]),a._v(" "),s("p",[a._v("3ã€é€šè¿‡æ·»åŠ æˆ–å‡å°‘æœåŠ¡å™¨æ•°é‡ï¼Œå¢å¼ºç½‘ç«™çš„å¯æ‰©å±•æ€§ã€‚")]),a._v(" "),s("p",[a._v("4ã€åœ¨è´Ÿè½½å‡è¡¡å™¨ä¸Šè¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚")]),a._v(" "),s("h2",{attrs:{id:"_3-è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼"}},[a._v("#")]),a._v(" 3. è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼")]),a._v(" "),s("h3",{attrs:{id:"_3-1-æ–¹å¼ä¸€-ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-æ–¹å¼ä¸€-ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©"}},[a._v("#")]),a._v(" 3.1 æ–¹å¼ä¸€:ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©")]),a._v(" "),s("p",[a._v("è¿™ç§æ–¹å¼æ¯”è¾ƒåŸå§‹ï¼Œåªè¦å®ç°çš„æ–¹å¼å°±æ˜¯åœ¨ç½‘ç«™ä¸»é¡µä¸Šé¢æä¾›ä¸åŒçº¿è·¯ã€ä¸åŒæœåŠ¡å™¨é“¾æ¥æ–¹å¼ï¼Œè®©ç”¨æˆ·æ¥é€‰æ‹©è‡ªå·±è®¿é—®çš„å…·ä½“æœåŠ¡å™¨ï¼Œæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021658.png",alt:"1584602887881"}})]),a._v(" "),s("h3",{attrs:{id:"_3-2-æ–¹å¼äºŒ-dnsè½®è¯¢æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æ–¹å¼äºŒ-dnsè½®è¯¢æ–¹å¼"}},[a._v("#")]),a._v(" 3.2 æ–¹å¼äºŒ: DNSè½®è¯¢æ–¹å¼")]),a._v(" "),s("p",[a._v("DNS: åŸŸåç³»ç»Ÿï¼ˆæœåŠ¡ï¼‰åè®®ï¼ˆDNSï¼‰æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç½‘ç»œç›®å½•æœåŠ¡ï¼Œä¸»è¦ç”¨äºåŸŸåä¸ IP åœ°å€çš„ç›¸äº’è½¬æ¢ã€‚")]),a._v(" "),s("p",[a._v("å¤§å¤šåŸŸåæ³¨å†Œå•†éƒ½æ”¯æŒå¯¹åŒä¸€ä¸ªä¸»æœºåæ·»åŠ å¤šæ¡Aè®°å½•ï¼Œè¿™å°±æ˜¯DNSè½®è¯¢ï¼ŒDNSæœåŠ¡å™¨å°†è§£æè¯·æ±‚æŒ‰ç…§Aè®°å½•çš„é¡ºåºï¼Œéšæœºåˆ†é…åˆ°ä¸åŒçš„IPä¸Šï¼Œè¿™æ ·å°±èƒ½å®Œæˆç®€å•çš„è´Ÿè½½å‡è¡¡ã€‚DNSè½®è¯¢çš„æˆæœ¬éå¸¸ä½ï¼Œåœ¨ä¸€äº›ä¸é‡è¦çš„æœåŠ¡å™¨ï¼Œè¢«ç»å¸¸ä½¿ç”¨ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021635.png",alt:"1591010973996"}})]),a._v(" "),s("p",[a._v("å¦‚ä¸‹æ˜¯æˆ‘ä»¬ä¸ºæŸä¸€ä¸ªåŸŸåæ·»åŠ çš„IPåœ°å€ï¼Œç”¨2å°æœåŠ¡å™¨æ¥åšè´Ÿè½½å‡è¡¡ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021656.png",alt:"1590064506355"}})]),a._v(" "),s("p",[a._v("éªŒè¯:")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" www.nginx521.cn\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("æ¸…ç©ºæœ¬åœ°çš„dnsç¼“å­˜")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("ipconfig/flushdns\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("æˆ‘ä»¬å‘ç°ä½¿ç”¨DNSæ¥å®ç°è½®è¯¢ï¼Œä¸éœ€è¦æŠ•å…¥è¿‡å¤šçš„æˆæœ¬ï¼Œè™½ç„¶DNSè½®è¯¢æˆæœ¬ä½å»‰ï¼Œä½†æ˜¯DNSè´Ÿè½½å‡è¡¡å­˜åœ¨æ˜æ˜¾çš„ç¼ºç‚¹ã€‚")]),a._v(" "),s("p",[a._v("1.å¯é æ€§ä½")]),a._v(" "),s("p",[a._v("å‡è®¾ä¸€ä¸ªåŸŸåDNSè½®è¯¢å¤šå°æœåŠ¡å™¨ï¼Œå¦‚æœå…¶ä¸­çš„ä¸€å°æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è®¿é—®è¯¥æœåŠ¡å™¨çš„è¯·æ±‚å°†ä¸ä¼šæœ‰æ‰€å›åº”ï¼Œå³ä½¿ä½ å°†è¯¥æœåŠ¡å™¨çš„IPä»DNSä¸­å»æ‰ï¼Œä½†æ˜¯ç”±äºå„å¤§å®½å¸¦æ¥å…¥å•†å°†ä¼—å¤šçš„DNSå­˜æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œä»¥èŠ‚çœè®¿é—®æ—¶é—´ï¼Œå¯¼è‡´DNSä¸ä¼šå®æ—¶æ›´æ–°ã€‚æ‰€ä»¥DNSè½®æµä¸Šä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œä½†æ˜¯å´å­˜åœ¨å¯é æ€§ä¸é«˜çš„ç¼ºç‚¹ã€‚")]),a._v(" "),s("p",[a._v("2.è´Ÿè½½å‡è¡¡ä¸å‡è¡¡")]),a._v(" "),s("p",[a._v("DNSè´Ÿè½½å‡è¡¡é‡‡ç”¨çš„æ˜¯ç®€å•çš„è½®è¯¢è´Ÿè½½ç®—æ³•ï¼Œä¸èƒ½åŒºåˆ†æœåŠ¡å™¨çš„å·®å¼‚ï¼Œä¸èƒ½åæ˜ æœåŠ¡å™¨çš„å½“å‰è¿è¡ŒçŠ¶æ€ï¼Œä¸èƒ½åšåˆ°ä¸ºæ€§èƒ½å¥½çš„æœåŠ¡å™¨å¤šåˆ†é…è¯·æ±‚ï¼Œå¦å¤–æœ¬åœ°è®¡ç®—æœºä¹Ÿä¼šç¼“å­˜å·²ç»è§£æçš„åŸŸååˆ°IPåœ°å€çš„æ˜ å°„ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ä½¿ç”¨è¯¥DNSæœåŠ¡å™¨çš„ç”¨æˆ·åœ¨ä¸€å®šæ—¶é—´å†…è®¿é—®çš„æ˜¯åŒä¸€å°WebæœåŠ¡å™¨ï¼Œä»è€Œå¼•å‘WebæœåŠ¡å™¨å‡çš„è´Ÿè½½ä¸å‡è¡¡ã€‚")]),a._v(" "),s("p",[a._v("è´Ÿè½½ä¸å‡è¡¡åˆ™ä¼šå¯¼è‡´æŸå‡ å°æœåŠ¡å™¨è´Ÿè·å¾ˆä½ï¼Œè€Œå¦å¤–å‡ å°æœåŠ¡å™¨è´Ÿè·ç¡®å¾ˆé«˜ï¼Œå¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ…¢ï¼Œé…ç½®é«˜çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å°‘ï¼Œè€Œé…ç½®ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å¤šã€‚")]),a._v(" "),s("h3",{attrs:{id:"_3-3-æ–¹å¼ä¸‰-å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-æ–¹å¼ä¸‰-å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" 3.3 æ–¹å¼ä¸‰: å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡")]),a._v(" "),s("p",[a._v("ä»‹ç»å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼ŒOSI(open system interconnection),å«å¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹ï¼Œè¿™ä¸ªæ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISOæŒ‡å®šçš„ä¸€ä¸ªä¸åŸºäºå…·ä½“æœºå‹ã€æ“ä½œç³»ç»Ÿæˆ–å…¬å¸çš„ç½‘ç»œä½“ç³»ç»“æ„ã€‚è¯¥æ¨¡å‹å°†ç½‘ç»œé€šä¿¡çš„å·¥ä½œåˆ†ä¸ºä¸ƒå±‚ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021544.png",alt:"1584693830966"}})]),a._v(" "),s("p",[a._v("åº”ç”¨å±‚ï¼šä¸ºåº”ç”¨ç¨‹åºæä¾›ç½‘ç»œæœåŠ¡ã€‚")]),a._v(" "),s("p",[a._v("è¡¨ç¤ºå±‚ï¼šå¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–ã€ç¼–ç ã€åŠ å¯†ã€å‹ç¼©ç­‰æ“ä½œã€‚")]),a._v(" "),s("p",[a._v("ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç»´æŠ¤ã€ç®¡ç†ä¼šè¯è¿æ¥ã€‚")]),a._v(" "),s("p",[a._v("ä¼ è¾“å±‚ï¼šå»ºç«‹ã€ç»´æŠ¤ã€ç®¡ç†ç«¯åˆ°ç«¯çš„è¿æ¥ï¼Œå¸¸è§çš„æœ‰TCP/UDPã€‚")]),a._v(" "),s("p",[a._v("ç½‘ç»œå±‚ï¼šIPå¯»å€å’Œè·¯ç”±é€‰æ‹©")]),a._v(" "),s("p",[a._v("æ•°æ®é“¾è·¯å±‚ï¼šæ§åˆ¶ç½‘ç»œå±‚ä¸ç‰©ç†å±‚ä¹‹é—´çš„é€šä¿¡ã€‚")]),a._v(" "),s("p",[a._v("ç‰©ç†å±‚ï¼šæ¯”ç‰¹æµä¼ è¾“ã€‚")]),a._v(" "),s("p",[a._v("æ‰€è°“å››å±‚è´Ÿè½½å‡è¡¡æŒ‡çš„æ˜¯OSIä¸ƒå±‚æ¨¡å‹ä¸­çš„ä¼ è¾“å±‚ï¼Œä¸»è¦æ˜¯åŸºäºIP+PORTçš„è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("å®ç°å››å±‚è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼š\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ç¡¬ä»¶ï¼šF5")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("BIG-IPã€Radwareç­‰")]),a._v("\nè½¯ä»¶ï¼šLVSã€Nginxã€Hayproxyç­‰\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("æ‰€è°“çš„ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡çš„æ˜¯åœ¨åº”ç”¨å±‚ï¼Œä¸»è¦æ˜¯åŸºäºè™šæ‹Ÿçš„URLæˆ–ä¸»æœºIPçš„è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("å®ç°ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼š\nè½¯ä»¶ï¼šNginxã€Hayproxyç­‰\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("å››å±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…æ˜¯åœ¨åº•å±‚å°±è¿›è¡Œäº†åˆ†å‘ï¼Œè€Œä¸ƒå±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…åˆ™åœ¨æœ€é¡¶ç«¯è¿›è¡Œåˆ†å‘ï¼Œæ‰€ä»¥å››å±‚è´Ÿè½½å‡è¡¡çš„æ•ˆç‡æ¯”ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„è¦é«˜ã€‚\nå››å±‚è´Ÿè½½å‡è¡¡ä¸è¯†åˆ«åŸŸåï¼Œè€Œä¸ƒå±‚è´Ÿè½½å‡è¡¡è¯†åˆ«åŸŸåã€‚\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("å¤„ç†å››å±‚å’Œä¸ƒå±‚è´Ÿè½½ä»¥ä¸ºå…¶å®è¿˜æœ‰äºŒå±‚ã€ä¸‰å±‚è´Ÿè½½å‡è¡¡ï¼ŒäºŒå±‚æ˜¯åœ¨æ•°æ®é“¾è·¯å±‚åŸºäºmacåœ°å€æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œä¸‰å±‚æ˜¯åœ¨ç½‘ç»œå±‚ä¸€èˆ¬é‡‡ç”¨è™šæ‹ŸIPåœ°å€çš„æ–¹å¼å®ç°è´Ÿè½½å‡è¡¡ã€‚")]),a._v(" "),s("p",[a._v("å®é™…ç¯å¢ƒé‡‡ç”¨çš„æ¨¡å¼")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("å››å±‚è´Ÿè½½(LVS)+ä¸ƒå±‚è´Ÿè½½(Nginx)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-4-nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" 3.4 Nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡ ğŸ˜„")]),a._v(" "),s("p",[a._v("Nginxè¦å®ç°ä¸ƒå±‚è´Ÿè½½å‡è¡¡éœ€è¦ç”¨åˆ°proxy_passä»£ç†æ¨¡å—é…ç½®ã€‚Nginxé»˜è®¤å®‰è£…æ”¯æŒè¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åšä»»ä½•å¤„ç†ã€‚Nginxçš„è´Ÿè½½å‡è¡¡æ˜¯åœ¨Nginxçš„åå‘ä»£ç†åŸºç¡€ä¸ŠæŠŠç”¨æˆ·çš„è¯·æ±‚æ ¹æ®æŒ‡å®šçš„ç®—æ³•åˆ†å‘åˆ°ä¸€ç»„ã€upstreamè™šæ‹ŸæœåŠ¡æ± ã€‘ã€‚")]),a._v(" "),s("h4",{attrs:{id:"nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[a._v("#")]),a._v(" Nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤")]),a._v(" "),s("h5",{attrs:{id:"upstreamæŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upstreamæŒ‡ä»¤"}},[a._v("#")]),a._v(" upstreamæŒ‡ä»¤")]),a._v(" "),s("p",[a._v("è¯¥æŒ‡ä»¤æ˜¯ç”¨æ¥å®šä¹‰ä¸€ç»„æœåŠ¡å™¨ï¼Œå®ƒä»¬å¯ä»¥æ˜¯ç›‘å¬ä¸åŒç«¯å£çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥æ˜¯åŒæ—¶ç›‘å¬TCPå’ŒUnix socketçš„æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å¯ä»¥æŒ‡å®šä¸åŒçš„æƒé‡ï¼Œé»˜è®¤ä¸º1ã€‚")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("è¯­æ³•")]),a._v(" "),s("th",[a._v("upstream name {...}")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("é»˜è®¤å€¼")]),a._v(" "),s("td",[a._v("â€”")])]),a._v(" "),s("tr",[s("td",[a._v("ä½ç½®")]),a._v(" "),s("td",[a._v("http")])])])]),a._v(" "),s("h5",{attrs:{id:"serveræŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serveræŒ‡ä»¤"}},[a._v("#")]),a._v(" serveræŒ‡ä»¤")]),a._v(" "),s("p",[a._v("è¯¥æŒ‡ä»¤ç”¨æ¥æŒ‡å®šåç«¯æœåŠ¡å™¨çš„åç§°å’Œä¸€äº›å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨åŸŸåã€IPã€ç«¯å£æˆ–è€…unix socket")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("è¯­æ³•")]),a._v(" "),s("th",[a._v("server name [paramerters]")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("é»˜è®¤å€¼")]),a._v(" "),s("td",[a._v("â€”")])]),a._v(" "),s("tr",[s("td",[a._v("ä½ç½®")]),a._v(" "),s("td",[a._v("upstream")])])])]),a._v(" "),s("h4",{attrs:{id:"nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹"}},[a._v("#")]),a._v(" Nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹ ğŸš—")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021571.png",alt:"1590248160635"}})]),a._v(" "),s("p",[a._v("æœåŠ¡ç«¯è®¾ç½®")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("  9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    server_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    default_type")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("text/html;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    location")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    \treturn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("200 '<h1>192.168.200.146:9001</h1>';")]),a._v("\n    }\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("  9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    server_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    default_type")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("text/html;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    location")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    \treturn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("200 '<h1>192.168.200.146:9002</h1>';")]),a._v("\n    }\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("  9003;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    server_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    default_type")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("text/html;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    location")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("    \treturn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("200 '<h1>192.168.200.146:9003</h1>';")]),a._v("\n    }\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br")])]),s("p",[a._v("è´Ÿè½½å‡è¡¡å™¨è®¾ç½®")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9091;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9092;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9093;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h4",{attrs:{id:"è´Ÿè½½å‡è¡¡çŠ¶æ€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çŠ¶æ€"}},[a._v("#")]),a._v(" è´Ÿè½½å‡è¡¡çŠ¶æ€")]),a._v(" "),s("p",[a._v("ä»£ç†æœåŠ¡å™¨åœ¨è´Ÿè´£å‡è¡¡è°ƒåº¦ä¸­çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("çŠ¶æ€")]),a._v(" "),s("th",[a._v("æ¦‚è¿°")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("down")]),a._v(" "),s("td",[a._v("å½“å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡")])]),a._v(" "),s("tr",[s("td",[a._v("backup")]),a._v(" "),s("td",[a._v("é¢„ç•™çš„å¤‡ä»½æœåŠ¡å™¨")])]),a._v(" "),s("tr",[s("td",[a._v("max_fails")]),a._v(" "),s("td",[a._v("å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°")])]),a._v(" "),s("tr",[s("td",[a._v("fail_timeout")]),a._v(" "),s("td",[a._v("ç»è¿‡max_failså¤±è´¥å, æœåŠ¡æš‚åœæ—¶é—´")])]),a._v(" "),s("tr",[s("td",[a._v("max_conns")]),a._v(" "),s("td",[a._v("é™åˆ¶æœ€å¤§çš„æ¥æ”¶è¿æ¥æ•°")])])])]),a._v(" "),s("h5",{attrs:{id:"down"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#down"}},[a._v("#")]),a._v(" down")]),a._v(" "),s("p",[a._v("down:å°†è¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºæ°¸ä¹…ä¸å¯ç”¨ï¼Œé‚£ä¹ˆè¯¥ä»£ç†æœåŠ¡å™¨å°†ä¸å‚ä¸è´Ÿè½½å‡è¡¡ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001 down;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[a._v("è¯¥çŠ¶æ€ä¸€èˆ¬ä¼šå¯¹éœ€è¦åœæœºç»´æŠ¤çš„æœåŠ¡å™¨è¿›è¡Œè®¾ç½®ã€‚")]),a._v(" "),s("h5",{attrs:{id:"backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backup"}},[a._v("#")]),a._v(" backup")]),a._v(" "),s("p",[a._v("backup:å°†è¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºå¤‡ä»½æœåŠ¡å™¨ï¼Œå½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œå°†ç”¨æ¥ä¼ é€’è¯·æ±‚ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001 down;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002 backup;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[a._v("æ­¤æ—¶éœ€è¦å°†9094ç«¯å£çš„è®¿é—®ç¦æ­¢æ‰æ¥æ¨¡æ‹Ÿä¸‹å”¯ä¸€èƒ½å¯¹å¤–æä¾›è®¿é—®çš„æœåŠ¡å®•æœºä»¥åï¼Œbackupçš„å¤‡ä»½æœåŠ¡å™¨å°±è¦å¼€å§‹å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ­¤æ—¶ä¸ºäº†æµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨é˜²ç«å¢™æ¥è¿›è¡Œæ‹¦æˆªã€‚")]),a._v(" "),s("p",[a._v("ä»‹ç»ä¸€ä¸ªå·¥å…·"),s("code",[a._v("firewall-cmd")]),a._v(",è¯¥å·¥å…·æ˜¯Linuxæä¾›çš„ä¸“é—¨ç”¨æ¥æ“ä½œfirewallçš„ã€‚")]),a._v(" "),s("p",[a._v("æŸ¥è¯¢é˜²ç«å¢™ä¸­æŒ‡å®šçš„ç«¯å£æ˜¯å¦å¼€æ”¾")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("firewall-cmd --query-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9001")]),a._v("/tcp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("å¦‚ä½•å¼€æ”¾ä¸€ä¸ªæŒ‡å®šçš„ç«¯å£")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("firewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9002")]),a._v("/tcp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("æ‰¹é‡æ·»åŠ å¼€å‘ç«¯å£")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("firewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9001")]),a._v("-9003/tcp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("å¦‚ä½•ç§»é™¤ä¸€ä¸ªæŒ‡å®šçš„ç«¯å£")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("firewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --remove-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9003")]),a._v("/tcp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("é‡æ–°åŠ è½½")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("firewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--reload")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("å…¶ä¸­")]),a._v(" "),s("p",[a._v("â€‹\t --permanentè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…")]),a._v(" "),s("p",[a._v("â€‹\t --add-portè¡¨ç¤ºæ·»åŠ æŒ‡å®šç«¯å£")]),a._v(" "),s("p",[a._v("â€‹\t --remove-portè¡¨ç¤ºç§»é™¤æŒ‡å®šç«¯å£")]),a._v(" "),s("h5",{attrs:{id:"max-conns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#max-conns"}},[a._v("#")]),a._v(" max_conns")]),a._v(" "),s("p",[a._v("max_conns=number:ç”¨æ¥è®¾ç½®ä»£ç†æœåŠ¡å™¨åŒæ—¶æ´»åŠ¨é“¾æ¥çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ï¼Œä½¿ç”¨è¯¥é…ç½®å¯ä»¥æ ¹æ®åç«¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„å¹¶å‘é‡æ¥è¿›è¡Œè®¾ç½®ï¼Œé˜²æ­¢åç«¯æœåŠ¡å™¨è¢«å‹å®ã€‚")]),a._v(" "),s("h5",{attrs:{id:"max-failså’Œfail-timeout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#max-failså’Œfail-timeout"}},[a._v("#")]),a._v(" max_failså’Œfail_timeout")]),a._v(" "),s("p",[a._v("max_fails=number:è®¾ç½®å…è®¸è¯·æ±‚ä»£ç†æœåŠ¡å™¨å¤±è´¥çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1ã€‚")]),a._v(" "),s("p",[a._v("fail_timeout=time:è®¾ç½®ç»è¿‡max_failså¤±è´¥åï¼ŒæœåŠ¡æš‚åœçš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯10ç§’ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.133:9001 down;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.133:9002 backup;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.133:9003 max_fails=3 fail_timeout=15;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h4",{attrs:{id:"è´Ÿè½½å‡è¡¡ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡ç­–ç•¥"}},[a._v("#")]),a._v(" è´Ÿè½½å‡è¡¡ç­–ç•¥ ğŸ˜„")]),a._v(" "),s("p",[a._v("ä»‹ç»å®ŒNginxè´Ÿè½½å‡è¡¡çš„ç›¸å…³æŒ‡ä»¤åï¼Œæˆ‘ä»¬å·²ç»èƒ½å®ç°å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆé™¤äº†é‡‡ç”¨é»˜è®¤çš„åˆ†é…æ–¹å¼ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½é‡‡ç”¨ä»€ä¹ˆæ ·çš„è´Ÿè½½ç®—æ³•?")]),a._v(" "),s("p",[a._v("Nginxçš„upstreamæ”¯æŒå¦‚ä¸‹å…­ç§æ–¹å¼çš„åˆ†é…ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯:")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("ç®—æ³•åç§°")]),a._v(" "),s("th",[a._v("è¯´æ˜")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("è½®è¯¢")]),a._v(" "),s("td",[a._v("é»˜è®¤æ–¹å¼")])]),a._v(" "),s("tr",[s("td",[a._v("weight")]),a._v(" "),s("td",[a._v("æƒé‡æ–¹å¼")])]),a._v(" "),s("tr",[s("td",[a._v("ip_hash")]),a._v(" "),s("td",[a._v("ä¾æ®ipåˆ†é…æ–¹å¼")])]),a._v(" "),s("tr",[s("td",[a._v("least_conn")]),a._v(" "),s("td",[a._v("ä¾æ®æœ€å°‘è¿æ¥æ–¹å¼")])]),a._v(" "),s("tr",[s("td",[a._v("url_hash")]),a._v(" "),s("td",[a._v("ä¾æ®URLåˆ†é…æ–¹å¼")])]),a._v(" "),s("tr",[s("td",[a._v("fair")]),a._v(" "),s("td",[a._v("ä¾æ®å“åº”æ—¶é—´æ–¹å¼")])])])]),a._v(" "),s("h5",{attrs:{id:"è½®è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è½®è¯¢"}},[a._v("#")]),a._v(" è½®è¯¢")]),a._v(" "),s("p",[a._v("æ˜¯upstreamæ¨¡å—è´Ÿè½½å‡è¡¡é»˜è®¤çš„ç­–ç•¥ã€‚æ¯ä¸ªè¯·æ±‚ä¼šæŒ‰æ—¶é—´é¡ºåºé€ä¸ªåˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ã€‚è½®è¯¢ä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001 weight=1;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h5",{attrs:{id:"weightåŠ æƒ-åŠ æƒè½®è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#weightåŠ æƒ-åŠ æƒè½®è¯¢"}},[a._v("#")]),a._v(" weightåŠ æƒ[åŠ æƒè½®è¯¢]")]),a._v(" "),s("p",[a._v("weight=number:ç”¨æ¥è®¾ç½®æœåŠ¡å™¨çš„æƒé‡ï¼Œé»˜è®¤ä¸º1ï¼Œæƒé‡æ•°æ®è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„å‡ ç‡è¶Šå¤§ï¼›è¯¥æƒé‡å€¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å®é™…å·¥ä½œç¯å¢ƒä¸­ä¸åŒçš„åç«¯æœåŠ¡å™¨ç¡¬ä»¶é…ç½®è¿›è¡Œè°ƒæ•´çš„ï¼Œæ‰€æœ‰æ­¤ç­–ç•¥æ¯”è¾ƒé€‚åˆæœåŠ¡å™¨çš„ç¡¬ä»¶é…ç½®å·®åˆ«æ¯”è¾ƒå¤§çš„æƒ…å†µã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001 weight=10;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002 weight=5;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003 weight=3;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h5",{attrs:{id:"ip-hash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ip-hash"}},[a._v("#")]),a._v(" ip_hash")]),a._v(" "),s("p",[a._v("å½“å¯¹åç«¯çš„å¤šå°åŠ¨æ€åº”ç”¨æœåŠ¡å™¨åšè´Ÿè½½å‡è¡¡æ—¶ï¼Œip_hashæŒ‡ä»¤èƒ½å¤Ÿå°†æŸä¸ªå®¢æˆ·ç«¯IPçš„è¯·æ±‚é€šè¿‡å“ˆå¸Œç®—æ³•å®šä½åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·ï¼Œå½“æ¥è‡ªæŸä¸€ä¸ªIPçš„ç”¨æˆ·åœ¨åç«¯WebæœåŠ¡å™¨Aä¸Šç™»å½•åï¼Œåœ¨è®¿é—®è¯¥ç«™ç‚¹çš„å…¶ä»–URLï¼Œèƒ½ä¿è¯å…¶è®¿é—®çš„è¿˜æ˜¯åç«¯webæœåŠ¡å™¨Aã€‚")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("è¯­æ³•")]),a._v(" "),s("th",[a._v("ip_hash;")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("é»˜è®¤å€¼")]),a._v(" "),s("td",[a._v("â€”")])]),a._v(" "),s("tr",[s("td",[a._v("ä½ç½®")]),a._v(" "),s("td",[a._v("upstream")])])])]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n\tip_hash;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("p",[a._v("éœ€è¦é¢å¤–å¤šè¯´ä¸€ç‚¹çš„æ˜¯ä½¿ç”¨ip_hashæŒ‡ä»¤æ— æ³•ä¿è¯åç«¯æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ï¼Œå¯èƒ½å¯¼è‡´æœ‰äº›åç«¯æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å¤šï¼Œæœ‰äº›åç«¯æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚å°‘ï¼Œè€Œä¸”è®¾ç½®åç«¯æœåŠ¡å™¨æƒé‡ç­‰æ–¹æ³•å°†ä¸èµ·ä½œç”¨ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021301.png",alt:"1591706748677"}})]),a._v(" "),s("h5",{attrs:{id:"least-conn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#least-conn"}},[a._v("#")]),a._v(" least_conn")]),a._v(" "),s("p",[a._v("æœ€å°‘è¿æ¥ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™è¿æ¥æ•°è¾ƒå°‘çš„åç«¯æœåŠ¡å™¨ã€‚è½®è¯¢ç®—æ³•æ˜¯æŠŠè¯·æ±‚å¹³å‡çš„è½¬å‘ç»™å„ä¸ªåç«¯ï¼Œä½¿å®ƒä»¬çš„è´Ÿè½½å¤§è‡´ç›¸åŒï¼›ä½†æ˜¯ï¼Œæœ‰äº›è¯·æ±‚å ç”¨çš„æ—¶é—´å¾ˆé•¿ï¼Œä¼šå¯¼è‡´å…¶æ‰€åœ¨çš„åç«¯è´Ÿè½½è¾ƒé«˜ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œleast_connè¿™ç§æ–¹å¼å°±å¯ä»¥è¾¾åˆ°æ›´å¥½çš„è´Ÿè½½å‡è¡¡æ•ˆæœã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n\tleast_conn;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("p",[a._v("æ­¤è´Ÿè½½å‡è¡¡ç­–ç•¥é€‚åˆè¯·æ±‚å¤„ç†æ—¶é—´é•¿çŸ­ä¸ä¸€é€ æˆæœåŠ¡å™¨è¿‡è½½çš„æƒ…å†µã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021362.png",alt:"1591809623736"}})]),a._v(" "),s("h5",{attrs:{id:"url-hash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-hash"}},[a._v("#")]),a._v(" url_hash")]),a._v(" "),s("p",[a._v("æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œè¦é…åˆç¼“å­˜å‘½ä¸­æ¥ä½¿ç”¨ã€‚åŒä¸€ä¸ªèµ„æºå¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šåˆ°è¾¾ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå¯¼è‡´ä¸å¿…è¦çš„å¤šæ¬¡ä¸‹è½½ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œä»¥åŠä¸€äº›èµ„æºæ—¶é—´çš„æµªè´¹ã€‚è€Œä½¿ç”¨url_hashï¼Œå¯ä»¥ä½¿å¾—åŒä¸€ä¸ªurlï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªèµ„æºè¯·æ±‚ï¼‰ä¼šåˆ°è¾¾åŒä¸€å°æœåŠ¡å™¨ï¼Œä¸€æ—¦ç¼“å­˜ä½äº†èµ„æºï¼Œå†æ­¤æ”¶åˆ°è¯·æ±‚ï¼Œå°±å¯ä»¥ä»ç¼“å­˜ä¸­è¯»å–ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\thash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("&request_uri;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("p",[a._v("è®¿é—®å¦‚ä¸‹åœ°å€ï¼š")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("//192.168.200.133:8083/a")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("//192.168.200.133:8083/b")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("//192.168.200.133:8083/c")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021368.png",alt:"1591812222306"}})]),a._v(" "),s("h5",{attrs:{id:"fair"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fair"}},[a._v("#")]),a._v(" fair")]),a._v(" "),s("p",[a._v("fairé‡‡ç”¨çš„ä¸æ˜¯å†…å»ºè´Ÿè½½å‡è¡¡ä½¿ç”¨çš„è½®æ¢çš„å‡è¡¡ç®—æ³•ï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®é¡µé¢å¤§å°ã€åŠ è½½æ—¶é—´é•¿çŸ­æ™ºèƒ½çš„è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—çš„fairè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n\tfair;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("p",[a._v("ä½†æ˜¯å¦‚ä½•ç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºfairå±äºç¬¬ä¸‰æ–¹æ¨¡å—å®ç°çš„è´Ÿè½½å‡è¡¡ã€‚éœ€è¦æ·»åŠ "),s("code",[a._v("nginx-upstream-fair")]),a._v(",å¦‚ä½•æ·»åŠ å¯¹åº”çš„æ¨¡å—:")]),a._v(" "),s("ol",[s("li",[a._v("ä¸‹è½½nginx-upstream-fairæ¨¡å—")])]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ä¸‹è½½åœ°å€ä¸º")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\thttps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("//github.com/gnosek/nginx-upstream-fair")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("å°†ä¸‹è½½çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è¿›è¡Œè§£å‹ç¼©")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("unzip")]),a._v(" nginx-upstream-fair-master.zip\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("é‡å‘½åèµ„æº")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" nginx-upstream-fair-master fair\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("ä½¿ç”¨./configureå‘½ä»¤å°†èµ„æºæ·»åŠ åˆ°Nginxæ¨¡å—ä¸­")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("./configure --add-module"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/fair\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[a._v("ç¼–è¯‘")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("ç¼–è¯‘å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œngx_http_upstream_srv_conf_tç»“æ„ä¸­ç¼ºå°‘default_port")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021601.png",alt:"1584941470457"}})]),a._v(" "),s("p",[a._v("è§£å†³æ–¹æ¡ˆ:")]),a._v(" "),s("p",[a._v("åœ¨Nginxçš„æºç ä¸­ src/http/ngx_http_upstream.h,æ‰¾åˆ°"),s("code",[a._v("ngx_http_upstream_srv_conf_s")]),a._v("ï¼Œåœ¨æ¨¡å—ä¸­æ·»åŠ æ·»åŠ default_portå±æ€§")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("in_port_t\t   default_port\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021779.png",alt:"1584943399597"}})]),a._v(" "),s("p",[a._v("ç„¶åå†è¿›è¡Œmake.")]),a._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[a._v("æ›´æ–°Nginx")])]),a._v(" "),s("p",[a._v("â€‹\t 6.1 å°†sbinç›®å½•ä¸‹çš„nginxè¿›è¡Œå¤‡ä»½")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginxold\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("â€‹\t6.2 å°†å®‰è£…ç›®å½•ä¸‹çš„objsä¸­çš„nginxæ‹·è´åˆ°sbinç›®å½•")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" objs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" nginx /usr/local/nginx/sbin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("â€‹\t 6.3 æ›´æ–°Nginx")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" upgrade\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ol",{attrs:{start:"7"}},[s("li",[a._v("ç¼–è¯‘æµ‹è¯•ä½¿ç”¨Nginx")])]),a._v(" "),s("blockquote",[s("p",[a._v("ä¸Šé¢ä»‹ç»äº†Nginxå¸¸ç”¨çš„è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œæœ‰äººè¯´æ˜¯5ç§ï¼Œæ˜¯æŠŠè½®è¯¢å’ŒåŠ æƒè½®è¯¢å½’ä¸ºä¸€ç§ï¼Œä¹Ÿæœ‰äººè¯´æ˜¯6ç§ã€‚é‚£ä¹ˆåœ¨å’±ä»¬ä»¥åçš„å¼€å‘ä¸­åˆ°åº•ä½¿ç”¨å“ªç§ï¼Œè¿™ä¸ªéœ€è¦æ ¹æ®å®é™…é¡¹ç›®çš„åº”ç”¨åœºæ™¯æ¥å†³å®šçš„ã€‚")])]),a._v(" "),s("h4",{attrs:{id:"è´Ÿè½½å‡è¡¡æ¡ˆä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡æ¡ˆä¾‹"}},[a._v("#")]),a._v(" è´Ÿè½½å‡è¡¡æ¡ˆä¾‹ ğŸ˜„")]),a._v(" "),s("h5",{attrs:{id:"æ¡ˆä¾‹ä¸€-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä¸€-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" æ¡ˆä¾‹ä¸€ï¼šå¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h5",{attrs:{id:"æ¡ˆä¾‹äºŒ-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹äºŒ-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" æ¡ˆä¾‹äºŒï¼šå¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001 weight=7;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002 weight=5;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003 weight=3;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8083;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h5",{attrs:{id:"æ¡ˆä¾‹ä¸‰-å¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä¸‰-å¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" æ¡ˆä¾‹ä¸‰ï¼šå¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("videobackend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("filebackend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9004;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlisten")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8084;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/video/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://videobackend;")]),a._v("\n\t}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/file/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://filebackend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])]),s("h5",{attrs:{id:"æ¡ˆä¾‹å››-å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹å››-å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" æ¡ˆä¾‹å››ï¼šå¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("itcastbackend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("itheimabackend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9004;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n\tlisten\t8085;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("www.itcast.cn;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://itcastbackend;")]),a._v("\n\t}\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n\tlisten\t8086;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("www.itheima.cn;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://itheimabackend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br")])]),s("h5",{attrs:{id:"æ¡ˆä¾‹äº”-å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹äº”-å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" æ¡ˆä¾‹äº”ï¼šå®ç°å¸¦æœ‰URLé‡å†™çš„è´Ÿè½½å‡è¡¡")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("backend{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9001;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9002;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:9003;")]),a._v("\n}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n\tlisten\t80;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tserver_name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/file/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\trewrite")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("^(/file/.*) /server/$1 last;")]),a._v("\n\t}\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\tlocation")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("\t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://backend;")]),a._v("\n\t}\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("h3",{attrs:{id:"_3-4-nginxå››å±‚è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-nginxå››å±‚è´Ÿè½½å‡è¡¡"}},[a._v("#")]),a._v(" 3.4 Nginxå››å±‚è´Ÿè½½å‡è¡¡")]),a._v(" "),s("p",[a._v("Nginxåœ¨1.9ä¹‹åï¼Œå¢åŠ äº†ä¸€ä¸ªstreamæ¨¡å—ï¼Œç”¨æ¥å®ç°å››å±‚åè®®çš„è½¬å‘ã€ä»£ç†ã€è´Ÿè½½å‡è¡¡ç­‰ã€‚streamæ¨¡å—çš„ç”¨æ³•è·Ÿhttpçš„ç”¨æ³•ç±»ä¼¼ï¼Œå…è®¸æˆ‘ä»¬é…ç½®ä¸€ç»„TCPæˆ–è€…UDPç­‰åè®®çš„ç›‘å¬ï¼Œç„¶åé€šè¿‡proxy_passæ¥è½¬å‘æˆ‘ä»¬çš„è¯·æ±‚ï¼Œé€šè¿‡upstreamæ·»åŠ å¤šä¸ªåç«¯æœåŠ¡ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚")]),a._v(" "),s("p",[a._v("å››å±‚åè®®è´Ÿè½½å‡è¡¡çš„å®ç°ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨åˆ°LVSã€HAProxyã€F5ç­‰ï¼Œè¦ä¹ˆå¾ˆè´µè¦ä¹ˆé…ç½®å¾ˆéº»çƒ¦ï¼Œè€ŒNginxçš„é…ç½®ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œæ›´èƒ½å¿«é€Ÿå®Œæˆå·¥ä½œã€‚")]),a._v(" "),s("h4",{attrs:{id:"æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ"}},[a._v("#")]),a._v(" æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ")]),a._v(" "),s("p",[a._v("Nginxé»˜è®¤æ˜¯æ²¡æœ‰ç¼–è¯‘è¿™ä¸ªæ¨¡å—çš„ï¼Œéœ€è¦ä½¿ç”¨åˆ°streamæ¨¡å—ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š"),s("code",[a._v("--with-stream")]),a._v("ã€‚")]),a._v(" "),s("p",[a._v("å®Œæˆæ·»åŠ "),s("code",[a._v("--with-stream")]),a._v("çš„å®ç°æ­¥éª¤:")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[a._v("ã€‹å°†åŸæœ‰/usr/local/nginx/sbin/nginxè¿›è¡Œå¤‡ä»½\nã€‹æ‹·è´nginxä¹‹å‰çš„é…ç½®ä¿¡æ¯\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ã€‹åœ¨nginxçš„å®‰è£…æºç è¿›è¡Œé…ç½®æŒ‡å®šå¯¹åº”æ¨¡å—")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v(" ./configure --with-stream")]),a._v("\nã€‹é€šè¿‡makeæ¨¡æ¿è¿›è¡Œç¼–è¯‘\nã€‹å°†objsä¸‹é¢çš„nginxç§»åŠ¨åˆ°/usr/local/nginx/sbinä¸‹\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ã€‹åœ¨æºç ç›®å½•ä¸‹æ‰§è¡Œ")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v(" make upgradeè¿›è¡Œå‡çº§ï¼Œè¿™ä¸ªå¯ä»¥å®ç°ä¸åœæœºæ·»åŠ æ–°æ¨¡å—çš„åŠŸèƒ½")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h4",{attrs:{id:"nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[a._v("#")]),a._v(" Nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤")]),a._v(" "),s("h5",{attrs:{id:"streamæŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#streamæŒ‡ä»¤"}},[a._v("#")]),a._v(" streamæŒ‡ä»¤")]),a._v(" "),s("p",[a._v("è¯¥æŒ‡ä»¤æä¾›åœ¨å…¶ä¸­æŒ‡å®šæµæœåŠ¡å™¨æŒ‡ä»¤çš„é…ç½®æ–‡ä»¶ä¸Šä¸‹æ–‡ã€‚å’ŒhttpæŒ‡ä»¤åŒçº§ã€‚")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("è¯­æ³•")]),a._v(" "),s("th",[a._v("stream { ... }")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("é»˜è®¤å€¼")]),a._v(" "),s("td",[a._v("â€”")])]),a._v(" "),s("tr",[s("td",[a._v("ä½ç½®")]),a._v(" "),s("td",[a._v("main")])])])]),a._v(" "),s("h5",{attrs:{id:"upstreamæŒ‡ä»¤-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upstreamæŒ‡ä»¤-2"}},[a._v("#")]),a._v(" upstreamæŒ‡ä»¤")]),a._v(" "),s("p",[a._v("è¯¥æŒ‡ä»¤å’Œhttpçš„upstreamæŒ‡ä»¤æ˜¯ç±»ä¼¼çš„ã€‚")]),a._v(" "),s("h4",{attrs:{id:"å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹"}},[a._v("#")]),a._v(" å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹")]),a._v(" "),s("h5",{attrs:{id:"éœ€æ±‚åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚åˆ†æ"}},[a._v("#")]),a._v(" éœ€æ±‚åˆ†æ")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202303182021325.png",alt:"1591897178807"}})]),a._v(" "),s("p",[a._v("å®ç°æ­¥éª¤")]),a._v(" "),s("p",[a._v("(1)å‡†å¤‡RedisæœåŠ¡å™¨,åœ¨ä¸€æ¡æœåŠ¡å™¨ä¸Šå‡†å¤‡ä¸‰ä¸ªRedisï¼Œç«¯å£åˆ†åˆ«æ˜¯6379,6378")]),a._v(" "),s("p",[a._v("1.ä¸Šä¼ redisçš„å®‰è£…åŒ…ï¼Œ"),s("code",[a._v("redis-4.0.14.tar.gz")])]),a._v(" "),s("p",[a._v("2.å°†å®‰è£…åŒ…è¿›è¡Œè§£å‹ç¼©")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxf")]),a._v(" redis-4.0.14.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("3.è¿›å…¥redisçš„å®‰è£…åŒ…")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" redis-4.0.14\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("4.ä½¿ç”¨makeå’Œinstallè¿›è¡Œç¼–è¯‘å’Œå®‰è£…")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/redis/redis01 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("5.æ‹·è´redisé…ç½®æ–‡ä»¶"),s("code",[a._v("redis.conf")]),a._v("åˆ°/usr/local/redis/redis01/binç›®å½•ä¸­")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" redis.conf\t/usr/local/redis/redis01/bin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("6.ä¿®æ”¹redis.confé…ç½®æ–‡ä»¶")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("port  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#redisçš„ç«¯å£")]),a._v("\ndaemonize "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#åå°å¯åŠ¨redis")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("7.å°†redis01å¤åˆ¶ä¸€ä»½ä¸ºredis02")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local/redis\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" redis01 redis02\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("8.å°†redis02æ–‡ä»¶æ–‡ä»¶å¤¹ä¸­çš„redis.confè¿›è¡Œä¿®æ”¹")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("port  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6378")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#redisçš„ç«¯å£")]),a._v("\ndaemonize "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#åå°å¯åŠ¨redis")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("9.åˆ†åˆ«å¯åŠ¨ï¼Œå³å¯è·å–ä¸¤ä¸ªRedis.å¹¶æŸ¥çœ‹")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" redis\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("ä½¿ç”¨Nginxå°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„RedisæœåŠ¡å™¨ä¸Šã€‚")]),a._v(" "),s("p",[a._v("(2)å‡†å¤‡TomcatæœåŠ¡å™¨.")]),a._v(" "),s("p",[a._v("1.ä¸Šä¼ tomcatçš„å®‰è£…åŒ…ï¼Œ"),s("code",[a._v("apache-tomcat-8.5.56.tar.gz")])]),a._v(" "),s("p",[a._v("2.å°†å®‰è£…åŒ…è¿›è¡Œè§£å‹ç¼©")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxf")]),a._v(" apache-tomcat-8.5.56.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("3.è¿›å…¥tomcatçš„binç›®å½•")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" apache-tomcat-8.5.56/bin\n./startup\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("nginx.confé…ç½®")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("stream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("redisbackend {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("                server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:6379;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("                server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:6378;")]),a._v("\n        }\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        upstream")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("tomcatbackend {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        \t\tserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.200.146:8080;")]),a._v("\n        }\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("                listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v(" 81;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("                proxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("redisbackend;")]),a._v("\n        }\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("{")]),a._v("\n        \t\tlisten\t82;\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("        \t\tproxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("tomcatbackend;")]),a._v("\n        }\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])]),s("p",[a._v("è®¿é—®æµ‹è¯•ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);