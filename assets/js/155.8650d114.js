(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{503:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nginx-ä½¿ç”¨æŠ€å·§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-ä½¿ç”¨æŠ€å·§"}},[t._v("#")]),t._v(" Nginx-ä½¿ç”¨æŠ€å·§")]),t._v(" "),s("h2",{attrs:{id:"nginxä¼˜åŒ–é™æ€æ–‡ä»¶åŠ è½½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¼˜åŒ–é™æ€æ–‡ä»¶åŠ è½½"}},[t._v("#")]),t._v(" Nginxä¼˜åŒ–é™æ€æ–‡ä»¶åŠ è½½")]),t._v(" "),s("blockquote",[s("p",[t._v("å‚è€ƒæ–‡æ¡£ï¼š"),s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzIxMDcxMjMyOA==&mid=2247483997&idx=2&sn=c5b64fb137e2edb976ac5c0934ba9b30&chksm=9761203aa016a92c57288ad0ccfb766d611e1f0a87de3567dd491dafc2c907a6f3fc70eb757e&cur_album_id=2747217161751986178&scene=189&key=ac2485eae2674e5412fbc9c410926f7ff224a4ba3b3fb823e3d1ff44c17e4d77e4dff40e5162df803ab0ebf41ff8c95990c600380b298c474233619f33e9d32871660a20616ab41acba9f7185b26c1252d2ea79d3bb44a8d24d206734cc5e5bcf29a2048c416be0e46a27d3b0dce4e01eef68cd155950c0c86c3323e5d4a6d3e&ascene=0&uin=Mjk5NDkyOTUx&devicetype=Windows+11+x64&version=63090217&lang=zh_CN&countrycode=CN&exportkey=n_ChQIAhIQaAriH%2F0f68eQAumUWOS1ExLgAQIE97dBBAEAAAAAAHp1CYoebm4AAAAOpnltbLcz9gKNyK89dVj0VIdSR0gySrliRO4xZlN%2FdITdSGdNoyBRd%2FdtYrTex8cRmpJVO4ny9lUvdYlTdr449hpjOHmprKU%2BndHdPa2yQoP9VA4wv7froDYx5aKfkbcFwWcW3tDpmM0Gz5ty4NPIct9oYBBBiUvkxS3laUD9Y%2BpfWFxDp04%2BLGfCxFt65vd2Fempvrv499yhdP2GLGVR7Uyyk23aLV8zjLenAhbR9fFf04vwcnzQry5JuRw5ECwByH27a9emaPpy&acctmode=0&pass_ticket=hBu4tw0p85ewC1UTco5Xlw5o7FpSh3qToh5%2B3r5%2Fg0AitbTg2CSuyWJKb2YUaYEolyZr6JqvBchBGOw6xLrVEw%3D%3D&wx_header=1&fontgear=2",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡æ¡£åœ°å€"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"é…ç½®https"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®https"}},[t._v("#")]),t._v(" é…ç½®Https ğŸ˜„")]),t._v(" "),s("h3",{attrs:{id:"_1-å‚è€ƒæ–‡æ¡£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‚è€ƒæ–‡æ¡£"}},[t._v("#")]),t._v(" 1. å‚è€ƒæ–‡æ¡£")]),t._v(" "),s("p",[t._v("nginxé…ç½®httpsè®¿é—®ï¼š")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/qd2013498006/article/details/122159653",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‚è€ƒæ–‡æ¡£ä¸€"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.jb51.net/article/241538.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‚è€ƒæ–‡æ¡£äºŒ"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/xiaoyaodijun/p/15744066.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‚è€ƒæ–‡æ¡£ä¸‰"),s("OutboundLink")],1),t._v(" ğŸš—")]),t._v(" "),s("h3",{attrs:{id:"_2-é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é—®é¢˜"}},[t._v("#")]),t._v(" 2. é—®é¢˜")]),t._v(" "),s("h4",{attrs:{id:"é—®é¢˜ä¸€-æ²¡æœ‰é…ç½®sslæ¨¡å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜ä¸€-æ²¡æœ‰é…ç½®sslæ¨¡å—"}},[t._v("#")]),t._v(" é—®é¢˜ä¸€: æ²¡æœ‰é…ç½®sslæ¨¡å—")]),t._v(" "),s("p",[t._v("è§£å†³"),s("a",{attrs:{href:"https://so.csdn.net/so/search?q=nginx&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx"),s("OutboundLink")],1),t._v(': [emerg] the "ssl" parameter requires ngx_http_ssl_module in /usr/local/nginxçš„é—®é¢˜?')]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/guo_qiangqiang/article/details/95622649",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginxå¦‚æœæœªå¼€å¯SSLæ¨¡å—ï¼Œé…ç½®Httpsæ—¶æç¤ºé”™è¯¯"),s("OutboundLink")],1),t._v(" ğŸš—")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/bq-med/articles/17121317.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å·²ç»ç¼–è¯‘çš„nginxæ·»åŠ with-http_ssl_moduleæ¨¡å— "),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/sbin/nginx --with-http_stub_status_module --with-http_ssl_module\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("blockquote",[s("p",[t._v("è·å–é‡æ–°å®‰è£…åˆ é™¤ä¹‹å‰é…ç½®çš„nginxç›®å½•ï¼Œä½¿ç”¨nginxæºç é‡æ–°é…ç½®ï¼ˆ./configureæ—¶å€™ï¼Œæ·»åŠ ä¸Šè¾¹é…ç½®ï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"_3-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-é…ç½®"}},[t._v("#")]),t._v(" 3. é…ç½®")]),t._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("  # å…è´¹è¯ä¹¦")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    server")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # SSL è®¿é—®ç«¯å£å·ä¸º 443")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         listen")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("443 ssl;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         server_name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ts.cnlxc.cn;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # æ›¿æ¢æˆå·²ä¸Šä¼ çš„è¯ä¹¦æ–‡ä»¶çš„ç›®å½•å’Œåç§°ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_certificate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/opt/develop/ssl/9570621_ts.cnlxc.cn.pem;  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # æ›¿æ¢æˆå·²ä¸Šä¼ çš„è¯ä¹¦ç§é’¥æ–‡ä»¶çš„ç›®å½•å’Œåç§°ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_certificate_key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/opt/develop/ssl/9570621_ts.cnlxc.cn.key; ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_session_timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5m;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # è¯·æŒ‰ç…§ä»¥ä¸‹å¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_ciphers")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("         # è¯·æŒ‰ç…§ä»¥ä¸‹åè®®é…ç½®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_protocols")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("TLSv1.1 TLSv1.2 TLSv1.3;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         ssl_prefer_server_ciphers")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("on;")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("         if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("($host != 'ts.cnlxc.cn') {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            rewrite")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("^/(.*)$ https://ts.cnlxc.cn/$1 permanent;")]),t._v("\n         }\n       \n       \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # /vue/dist/ æ‰“åŒ…åçš„distç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        root")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/opt/project/static/document;")]),t._v("\n       \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # æ–‡ä»¶ä»£ç†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/upFiles/ {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            alias")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/opt/project/upFiles/;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\t        add_header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("'Access-Control-Allow-Origin' '*';")]),t._v("\n        }\n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    }")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" ")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # ç½‘ç«™")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    server")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        listen")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("      80;")]),t._v("\n        \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # é…ç½®https")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        server_name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ts.cnlxc.cn;")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        #å°†è¯·æ±‚è½¬æˆhttps")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        rewrite")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("^(.*)$ https://$host$1 permanent;")]),t._v("\n        \n    \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # http é…ç½®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # server_name  localhost;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # root   /opt/project/static/document;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # location / {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        #    try_files $uri $uri/ /index.html;  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # }")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # location @rewrites {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        #   rewrite ^(.+)$ /index.html last;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # }")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # error_page   500 502 503 504  /50x.html;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # location = /50x.html {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        #     root   html;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # }")]),t._v("\n    }\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br")])]),s("h2",{attrs:{id:"å¼€å¯http-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å¯http-2"}},[t._v("#")]),t._v(" å¼€å¯HTTP/2")]),t._v(" "),s("h3",{attrs:{id:"é…ç½®éªŒè¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®éªŒè¯"}},[t._v("#")]),t._v(" é…ç½®éªŒè¯")]),t._v(" "),s("p",[t._v("HTTP/2æ ‡å‡†æ˜¯ä»Googleçš„SPDYä¸Šè¿›è¡Œæ”¹è¿›çš„ï¼Œæ¯”èµ·HTTP/1.1æå‡äº†ä¸å°‘æ€§èƒ½ï¼Œå°¤å…¶æ˜¯éœ€è¦å¹¶è¡Œå¤šä¸ªè¯·æ±‚çš„æ—¶å€™å¯ä»¥æ˜¾è‘—å‡å°‘å»¶è¿Ÿã€‚åœ¨ç°åœ¨çš„ç½‘ç»œä¸Šï¼Œä¸€ä¸ªç½‘é¡µå¹³å‡éœ€è¦è¯·æ±‚å‡ åæ¬¡ï¼Œè€Œåœ¨ HTTP 1.1 æ—¶ä»£æµè§ˆå™¨èƒ½åšçš„å°±æ˜¯å¤šå¼€å‡ ä¸ªTCPè¿æ¥ï¼ˆé€šå¸¸æ˜¯ 6 ä¸ªï¼‰è¿›è¡Œå¹¶è¡ŒHTTPè¯·æ±‚ï¼Œè€Œ HTTP 2 ä¸­å¯ä»¥åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸­è¿›è¡Œå¤šä¸ªHTTPè¯·æ±‚ã€‚HTTP 2 åŸç”Ÿæ”¯æŒå¤šä¸ªå¹¶è¡Œè¯·æ±‚ï¼Œå› æ­¤å¤§å¤§å‡å°‘äº†é¡ºåºæ‰§è¡Œçš„è¯·æ±‚çš„å¾€è¿”ç¨‹ï¼Œå¯ä»¥é¦–è¦è€ƒè™‘å¼€å¯ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("HTTPæ˜¯åŸºäºTCPä¸Šçš„åè®®ï¼Œæ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½éœ€è¦å…ˆå»ºç«‹ä¸€æ¬¡TCPã€‚åˆ°äº†HTTP/2ï¼Œä¸€ä¸ªTCPå¯ä»¥å‘é€å¤šä¸ªHTTPè¯·æ±‚")])]),t._v(" "),s("p",[s("strong",[t._v("1.åœ¨ Nginx ä¸­å¼€å¯ HTTP 2.0 éå¸¸ç®€å•ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ª http2 æ ‡å¿—å³å¯")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("listen 443 ssl;\n# æ”¹ä¸º\nlisten 443 ssl http2;\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("å¦‚æœä½ æ‹…å¿ƒä½ çš„ç”¨æˆ·ç”¨çš„æ˜¯æ—§çš„å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚ Python çš„ requestsï¼Œæš‚æ—¶è¿˜ä¸æ”¯æŒ HTTP 2 çš„è¯ï¼Œé‚£ä¹ˆå…¶å®ä¸ç”¨æ‹…å¿ƒã€‚å¦‚æœç”¨æˆ·çš„å®¢æˆ·ç«¯ä¸æ”¯æŒ HTTP 2ï¼Œé‚£ä¹ˆè¿æ¥ä¼šè‡ªåŠ¨é™çº§ä¸º HTTP 1.1ï¼Œä¿æŒäº†åå‘å…¼å®¹ã€‚å› æ­¤ï¼Œæ‰€æœ‰ä½¿ç”¨æ—§ Client çš„ç”¨æˆ·ï¼Œä»ç„¶ä¸å—å½±å“ï¼Œè€Œæ–°çš„å®¢æˆ·ç«¯åˆ™å¯ä»¥äº«å— HTTP/2 çš„æ–°ç‰¹æ€§")])]),t._v(" "),s("p",[s("strong",[t._v("2.ç¡®è®¤ä½ çš„ç½‘ç«™æˆ–è€… API å¼€å¯äº† HTTP 2")])]),t._v(" "),s("p",[t._v("åœ¨ Chrome ä¸­æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç‚¹å¼€ Protocol ä¹‹ååœ¨æ‰€æœ‰çš„è¯·æ±‚ä¸­éƒ½å¯ä»¥çœ‹åˆ°è¯·æ±‚ç”¨çš„åè®®äº†ã€‚å¦‚æœ protocol è¿™åˆ—çš„å€¼æ˜¯ h2 çš„è¯ï¼Œé‚£ä¹ˆç”¨çš„å°±æ˜¯ HTTP 2 äº†")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://chggx-typora.oss-cn-beijing.aliyuncs.com/typora/202304121351429.png",alt:"image-20230412135115308"}})]),t._v(" "),s("blockquote",[s("p",[t._v("h2åè®®ï¼šè¡¨ç¤ºé…ç½®http2æˆåŠŸ")]),t._v(" "),s("p",[t._v("http/1.1ï¼šæ˜¯ä½¿ç”¨é˜¿é‡Œäº‘OSSäº‘å­˜å‚¨ï¼Œåå½¢æˆçš„è¿æ¥ã€‚è·Ÿé…ç½®çš„nginxä¸åŒã€‚")])]),t._v(" "),s("h3",{attrs:{id:"é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜"}},[t._v("#")]),t._v(" é—®é¢˜")]),t._v(" "),s("h4",{attrs:{id:"é—®é¢˜ä¸€-å¼€å¯http2å¤±è´¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜ä¸€-å¼€å¯http2å¤±è´¥"}},[t._v("#")]),t._v(" é—®é¢˜ä¸€ï¼šå¼€å¯http2å¤±è´¥")]),t._v(" "),s("p",[t._v('nginx: [emerg] the "http2" parameter requires ngx_http_v2_module in /opt/develop/nginx/conf/nginx.conf:54')]),t._v(" "),s("p",[t._v("å‚è€ƒæ–‡æ¡£ï¼š")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://nginx.org/en/docs/http/ngx_http_v2_module.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜ç½‘æ–‡æ¡£"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/u013810234/article/details/114905554",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginxé…ç½®å¼€å¯HTTP2æ”¯æŒ"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("--with-http_v2_moduleï¼š"),s("a",{attrs:{href:"https://blog.csdn.net/qubes/article/details/120546123",target:"_blank",rel:"noopener noreferrer"}},[t._v("éœ€è¦http2æ¨¡å—"),s("OutboundLink")],1),t._v(" ğŸš—")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨æ„ï¼šç‰ˆæœ¬åœ¨1.9.5ä»¥ä¸Š ï¼Œ")]),t._v(" "),s("ul",[s("li",[t._v("é‡æ–°å®‰è£…æ·»åŠ æ­¤æ¨¡å—ï¼š"),s("a",{attrs:{href:"https://blog.csdn.net/guo_qiangqiang/article/details/95622649",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‚è€ƒé…ç½®"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/sbin/nginx --with-http_v2_module\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("åˆ é™¤ä¹‹å‰è§£å‹åçš„æ–‡ä»¶ï¼Œé‡æ–°å®‰è£… ğŸš—")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--sbin-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/sbin/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--modules-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/modules "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--conf-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/conf/nginx.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--error-log-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/logs/error.log "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--http-log-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/logs/access.log "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--pid-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/logs/nginx.pid "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--lock-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/develop/nginx/logs/nginx.lock "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--with-http_stub_status_module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--with-http_ssl_module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--with-http_v2_module\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])])]),t._v(" "),s("h2",{attrs:{id:"é™æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é™æµ"}},[t._v("#")]),t._v(" é™æµ ğŸ˜„")]),t._v(" "),s("h3",{attrs:{id:"_1-å‚è€ƒæ–‡ç« "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‚è€ƒæ–‡ç« "}},[t._v("#")]),t._v(" 1. å‚è€ƒæ–‡ç« ")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/wangmourena/article/details/109569068",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginxçš„é™æµç­–ç•¥"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://huaweicloud.csdn.net/63561b63d3efff3090b5a7d7.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginxé™æµ"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/hanjinjuan/article/details/119701523",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx å¦‚ä½•é™æµå’Œè®¿é—®æ§åˆ¶ï¼ˆè¯¦è§£ï¼‰"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2-é—®é¢˜-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é—®é¢˜-2"}},[t._v("#")]),t._v(" 2. é—®é¢˜")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/fenlin88l/article/details/90475854",target:"_blank",rel:"noopener noreferrer"}},[t._v('å¯¹nginxçš„imit_conn_zoneç†è§£é…ç½®_"zero size shared memory zone "perip"_'),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_3-é…ç½®-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-é…ç½®-2"}},[t._v("#")]),t._v(" 3. é…ç½®")]),t._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("http")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # é™æµè®¾ç½®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # è¿™åªæ˜¯è®¾ç½®æµé‡é™åˆ¶å’Œå…±äº«å†…å­˜åŒºåŸŸçš„å‚æ•°ï¼Œä½†å®é™…ä¸Šå¹¶ä¸é™åˆ¶è¯·æ±‚é€Ÿç‡ã€‚å…·ä½“çš„é™åˆ¶éœ€è¦å®šä¹‰å…·ä½“çš„url")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    limit_req_zone")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("$binary_remote_addr zone=contentRateLimit:10m rate=2r/s;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # æ ¹æ®IPåœ°å€æ¥é™åˆ¶ï¼Œå­˜å‚¨å†…å­˜å¤§å°10M")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    limit_conn_zone")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("$server_name zone=perip:10m;   # $binary_remote_addræ˜¯é™åˆ¶åŒä¸€å®¢æˆ·ç«¯ipåœ°å€ï¼›")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    limit_conn_zone")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("$server_name zone=perserver:10m; # é™åˆ¶åŒä¸€serveræœ€å¤§å¹¶å‘æ•°ï¼›")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/ {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # ä½¿ç”¨é™æµé… ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # é…åˆlimit_req_zoneé…ç½®ä½¿ç”¨------å¹³å‡æ¯ç§’å…è®¸ä¸è¶…è¿‡2ä¸ªè¯·æ±‚ï¼Œçªå‘ä¸è¶…è¿‡4ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å¤„ç†çªå‘4ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œæ²¡æœ‰å»¶è¿Ÿï¼Œç­‰åˆ°å®Œæˆä¹‹åï¼ŒæŒ‰ç…§æ­£å¸¸çš„é€Ÿç‡å¤„ç†ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("               limit_req")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("zone=contentRateLimit burst=4 nodelay;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # é™åˆ¶å¹¶å‘è¿æ¥æ•°ï¼šé…åˆlimit_conn_zoneä½¿ç”¨------å•ä¸ªå®¢æˆ·ç«¯ipä¸æœåŠ¡å™¨çš„è¿æ¥æ•°ï¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("               limit_conn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("perip 2;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # é™åˆ¶å¹¶å‘è¿æ¥æ•°ï¼šé…åˆlimit_conn_zoneä½¿ç”¨------é™åˆ¶ä¸æœåŠ¡å™¨çš„æ€»è¿æ¥æ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("               limit_conn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("perserver 20; ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # é™åˆ¶ä¸‹è½½é€Ÿåº¦ï¼šé™é€Ÿä¸º 100KB/ç§’")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("               # æ˜¯å¯¹æ¯ä¸ªè¿æ¥é™é€Ÿ100kã€‚è¿™é‡Œæ˜¯å¯¹è¿æ¥é™é€Ÿï¼Œè€Œä¸æ˜¯å¯¹IPé™é€Ÿï¼å¦‚æœä¸€ä¸ªIPå…è®¸ä¸¤ä¸ªå¹¶å‘è¿æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªIPå°±æ˜¯é™é€Ÿlimit_rate * 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("               limit_rate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("100k; ")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("               index")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("index.html index.htm;")]),t._v("\n    }\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);